(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},howler={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var a=this||n;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var c=this||n;if(a=parseFloat(a),c.ctx||_(),typeof a<"u"&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a,n.ctx.currentTime);for(var f=0;f<c._howls.length;f++)if(!c._howls[f]._webAudio)for(var m=c._howls[f]._getSoundIds(),v=0;v<m.length;v++){var g=c._howls[f]._soundById(m[v]);g&&g._node&&(g._node.volume=g._volume*a)}return c}return c._volume},mute:function(a){var c=this||n;c.ctx||_(),c._muted=a,c.usingWebAudio&&c.masterGain.gain.setValueAtTime(a?0:c._volume,n.ctx.currentTime);for(var f=0;f<c._howls.length;f++)if(!c._howls[f]._webAudio)for(var m=c._howls[f]._getSoundIds(),v=0;v<m.length;v++){var g=c._howls[f]._soundById(m[v]);g&&g._node&&(g._node.muted=a?!0:g._muted)}return c},stop:function(){for(var a=this||n,c=0;c<a._howls.length;c++)a._howls[c].stop();return a},unload:function(){for(var a=this||n,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,_()),a},codecs:function(a){return(this||n)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||n;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var c=new Audio;typeof c.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var c=new Audio;c.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||n,c=null;try{c=typeof Audio<"u"?new Audio:null}catch{return a}if(!c||typeof c.canPlayType!="function")return a;var f=c.canPlayType("audio/mpeg;").replace(/^no$/,""),m=a._navigator?a._navigator.userAgent:"",v=m.match(/OPR\/([0-6].)/g),g=v&&parseInt(v[0].split("/")[1],10)<33,y=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,b=m.match(/Version\/(.*?) /),N=y&&b&&parseInt(b[1],10)<15;return a._codecs={mp3:!!(!g&&(f||c.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(c.canPlayType('audio/wav; codecs="1"')||c.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(c.canPlayType("audio/x-m4b;")||c.canPlayType("audio/m4b;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!N&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!N&&c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||n;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var c=function(f){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,a._releaseHtml5Audio(m)}catch{a.noAudio=!0;break}for(var v=0;v<a._howls.length;v++)if(!a._howls[v]._webAudio)for(var g=a._howls[v]._getSoundIds(),y=0;y<g.length;y++){var b=a._howls[v]._soundById(g[y]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}a._autoResume();var N=a.ctx.createBufferSource();N.buffer=a._scratchBuffer,N.connect(a.ctx.destination),typeof N.start>"u"?N.noteOn(0):N.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),N.onended=function(){N.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",c,!0),document.removeEventListener("touchend",c,!0),document.removeEventListener("click",c,!0),document.removeEventListener("keydown",c,!0);for(var x=0;x<a._howls.length;x++)a._howls[x]._emit("unlock")}};return document.addEventListener("touchstart",c,!0),document.addEventListener("touchend",c,!0),document.addEventListener("click",c,!0),document.addEventListener("keydown",c,!0),a}},_obtainHtml5Audio:function(){var a=this||n;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var c=new Audio().play();return c&&typeof Promise<"u"&&(c instanceof Promise||typeof c.then=="function")&&c.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var c=this||n;return a._unlocked&&c._html5AudioPool.push(a),c},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!n.usingWebAudio)){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio){for(var f=0;f<a._howls[c]._sounds.length;f++)if(!a._howls[c]._sounds[f]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(!!a.autoSuspend){a._suspendTimer=null,a.state="suspending";var m=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(m,m)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!n.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var c=0;c<a._howls.length;c++)a._howls[c]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var n=new e,r=function(a){var c=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}c.init(a)};r.prototype={init:function(a){var c=this;return n.ctx||_(),c._autoplay=a.autoplay||!1,c._format=typeof a.format!="string"?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src=typeof a.src!="string"?a.src:[a.src],c._volume=a.volume!==void 0?a.volume:1,c._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],c._playLock=!1,c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=a.onload?[{fn:a.onload}]:[],c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._onunlock=a.onunlock?[{fn:a.onunlock}]:[],c._onresume=[],c._webAudio=n.usingWebAudio&&!c._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(c),c._autoplay&&c._queue.push({event:"play",action:function(){c.play()}}),c._preload&&c._preload!=="none"&&c.load(),c},load:function(){var a=this,c=null;if(n.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var f=0;f<a._src.length;f++){var m,v;if(a._format&&a._format[f])m=a._format[f];else{if(v=a._src[f],typeof v!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(v),m||(m=/\.([^.]+)$/.exec(v.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&n.codecs(m)){c=a._src[f];break}}if(!c){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=c,a._state="loading",window.location.protocol==="https:"&&c.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new s(a),a._webAudio&&i(a),a},play:function(a,c){var f=this,m=null;if(typeof a=="number")m=a,a=null;else{if(typeof a=="string"&&f._state==="loaded"&&!f._sprite[a])return null;if(typeof a>"u"&&(a="__default",!f._playLock)){for(var v=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(v++,m=f._sounds[g]._id);v===1?a=null:m=null}}var y=m?f._soundById(m):f._inactiveSound();if(!y)return null;if(m&&!a&&(a=y._sprite||"__default"),f._state!=="loaded"){y._sprite=a,y._ended=!1;var b=y._id;return f._queue.push({event:"play",action:function(){f.play(b)}}),b}if(m&&!y._paused)return c||f._loadQueue("play"),y._id;f._webAudio&&n._autoResume();var N=Math.max(0,y._seek>0?y._seek:f._sprite[a][0]/1e3),x=Math.max(0,(f._sprite[a][0]+f._sprite[a][1])/1e3-N),A=x*1e3/Math.abs(y._rate),L=f._sprite[a][0]/1e3,V=(f._sprite[a][0]+f._sprite[a][1])/1e3;y._sprite=a,y._ended=!1;var P=function(){y._paused=!1,y._seek=N,y._start=L,y._stop=V,y._loop=!!(y._loop||f._sprite[a][2])};if(N>=V){f._ended(y);return}var j=y._node;if(f._webAudio){var H=function(){f._playLock=!1,P(),f._refreshBuffer(y);var J=y._muted||f._muted?0:y._volume;j.gain.setValueAtTime(J,n.ctx.currentTime),y._playStart=n.ctx.currentTime,typeof j.bufferSource.start>"u"?y._loop?j.bufferSource.noteGrainOn(0,N,86400):j.bufferSource.noteGrainOn(0,N,x):y._loop?j.bufferSource.start(0,N,86400):j.bufferSource.start(0,N,x),A!==1/0&&(f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),A)),c||setTimeout(function(){f._emit("play",y._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?H():(f._playLock=!0,f.once("resume",H),f._clearTimer(y._id))}else{var ae=function(){j.currentTime=N,j.muted=y._muted||f._muted||n._muted||j.muted,j.volume=y._volume*n.volume(),j.playbackRate=y._rate;try{var J=j.play();if(J&&typeof Promise<"u"&&(J instanceof Promise||typeof J.then=="function")?(f._playLock=!0,P(),J.then(function(){f._playLock=!1,j._unlocked=!0,c?f._loadQueue():f._emit("play",y._id)}).catch(function(){f._playLock=!1,f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):c||(f._playLock=!1,P(),f._emit("play",y._id)),j.playbackRate=y._rate,j.paused){f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||y._loop?f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),A):(f._endTimers[y._id]=function(){f._ended(y),j.removeEventListener("ended",f._endTimers[y._id],!1)},j.addEventListener("ended",f._endTimers[y._id],!1))}catch(F){f._emit("playerror",y._id,F)}};j.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(j.src=f._src,j.load());var ie=window&&window.ejecta||!j.readyState&&n._navigator.isCocoonJS;if(j.readyState>=3||ie)ae();else{f._playLock=!0,f._state="loading";var le=function(){f._state="loaded",ae(),j.removeEventListener(n._canPlayEvent,le,!1)};j.addEventListener(n._canPlayEvent,le,!1),f._clearTimer(y._id)}}return y._id},pause:function(a){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"pause",action:function(){c.pause(a)}}),c;for(var f=c._getSoundIds(a),m=0;m<f.length;m++){c._clearTimer(f[m]);var v=c._soundById(f[m]);if(v&&!v._paused&&(v._seek=c.seek(f[m]),v._rateSeek=0,v._paused=!0,c._stopFade(f[m]),v._node))if(c._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),c._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||c._emit("pause",v?v._id:null)}return c},stop:function(a,c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(a)}}),f;for(var m=f._getSoundIds(a),v=0;v<m.length;v++){f._clearTimer(m[v]);var g=f._soundById(m[v]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[v]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),c||f._emit("stop",g._id))}return f},mute:function(a,c){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(a,c)}}),f;if(typeof c>"u")if(typeof a=="boolean")f._muted=a;else return f._muted;for(var m=f._getSoundIds(c),v=0;v<m.length;v++){var g=f._soundById(m[v]);g&&(g._muted=a,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(a?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:a),f._emit("mute",g._id))}return f},volume:function(){var a=this,c=arguments,f,m;if(c.length===0)return a._volume;if(c.length===1||c.length===2&&typeof c[1]>"u"){var v=a._getSoundIds(),g=v.indexOf(c[0]);g>=0?m=parseInt(c[0],10):f=parseFloat(c[0])}else c.length>=2&&(f=parseFloat(c[0]),m=parseInt(c[1],10));var y;if(typeof f<"u"&&f>=0&&f<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,c)}}),a;typeof m>"u"&&(a._volume=f),m=a._getSoundIds(m);for(var b=0;b<m.length;b++)y=a._soundById(m[b]),y&&(y._volume=f,c[2]||a._stopFade(m[b]),a._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(f,n.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=f*n.volume()),a._emit("volume",y._id))}else return y=m?a._soundById(m):a._sounds[0],y?y._volume:0;return a},fade:function(a,c,f,m){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(a,c,f,m)}}),v;a=Math.min(Math.max(0,parseFloat(a)),1),c=Math.min(Math.max(0,parseFloat(c)),1),f=parseFloat(f),v.volume(a,m);for(var g=v._getSoundIds(m),y=0;y<g.length;y++){var b=v._soundById(g[y]);if(b){if(m||v._stopFade(g[y]),v._webAudio&&!b._muted){var N=n.ctx.currentTime,x=N+f/1e3;b._volume=a,b._node.gain.setValueAtTime(a,N),b._node.gain.linearRampToValueAtTime(c,x)}v._startFadeInterval(b,a,c,f,g[y],typeof m>"u")}}return v},_startFadeInterval:function(a,c,f,m,v,g){var y=this,b=c,N=f-c,x=Math.abs(N/.01),A=Math.max(4,x>0?m/x:m),L=Date.now();a._fadeTo=f,a._interval=setInterval(function(){var V=(Date.now()-L)/m;L=Date.now(),b+=N*V,b=Math.round(b*100)/100,N<0?b=Math.max(f,b):b=Math.min(f,b),y._webAudio?a._volume=b:y.volume(b,a._id,!0),g&&(y._volume=b),(f<c&&b<=f||f>c&&b>=f)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,y.volume(f,a._id),y._emit("fade",a._id))},A)},_stopFade:function(a){var c=this,f=c._soundById(a);return f&&f._interval&&(c._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,c.volume(f._fadeTo,a),f._fadeTo=null,c._emit("fade",a)),c},loop:function(){var a=this,c=arguments,f,m,v;if(c.length===0)return a._loop;if(c.length===1)if(typeof c[0]=="boolean")f=c[0],a._loop=f;else return v=a._soundById(parseInt(c[0],10)),v?v._loop:!1;else c.length===2&&(f=c[0],m=parseInt(c[1],10));for(var g=a._getSoundIds(m),y=0;y<g.length;y++)v=a._soundById(g[y]),v&&(v._loop=f,a._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=f,f&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,a.playing(g[y])&&(a.pause(g[y],!0),a.play(g[y],!0)))));return a},rate:function(){var a=this,c=arguments,f,m;if(c.length===0)m=a._sounds[0]._id;else if(c.length===1){var v=a._getSoundIds(),g=v.indexOf(c[0]);g>=0?m=parseInt(c[0],10):f=parseFloat(c[0])}else c.length===2&&(f=parseFloat(c[0]),m=parseInt(c[1],10));var y;if(typeof f=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,c)}}),a;typeof m>"u"&&(a._rate=f),m=a._getSoundIds(m);for(var b=0;b<m.length;b++)if(y=a._soundById(m[b]),y){a.playing(m[b])&&(y._rateSeek=a.seek(m[b]),y._playStart=a._webAudio?n.ctx.currentTime:y._playStart),y._rate=f,a._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):y._node&&(y._node.playbackRate=f);var N=a.seek(m[b]),x=(a._sprite[y._sprite][0]+a._sprite[y._sprite][1])/1e3-N,A=x*1e3/Math.abs(y._rate);(a._endTimers[m[b]]||!y._paused)&&(a._clearTimer(m[b]),a._endTimers[m[b]]=setTimeout(a._ended.bind(a,y),A)),a._emit("rate",y._id)}}else return y=a._soundById(m),y?y._rate:a._rate;return a},seek:function(){var a=this,c=arguments,f,m;if(c.length===0)a._sounds.length&&(m=a._sounds[0]._id);else if(c.length===1){var v=a._getSoundIds(),g=v.indexOf(c[0]);g>=0?m=parseInt(c[0],10):a._sounds.length&&(m=a._sounds[0]._id,f=parseFloat(c[0]))}else c.length===2&&(f=parseFloat(c[0]),m=parseInt(c[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,c)}}),a;var y=a._soundById(m);if(y)if(typeof f=="number"&&f>=0){var b=a.playing(m);b&&a.pause(m,!0),y._seek=f,y._ended=!1,a._clearTimer(m),!a._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=f);var N=function(){b&&a.play(m,!0),a._emit("seek",m)};if(b&&!a._webAudio){var x=function(){a._playLock?setTimeout(x,0):N()};setTimeout(x,0)}else N()}else if(a._webAudio){var A=a.playing(m)?n.ctx.currentTime-y._playStart:0,L=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(L+A*Math.abs(y._rate))}else return y._node.currentTime;return a},playing:function(a){var c=this;if(typeof a=="number"){var f=c._soundById(a);return f?!f._paused:!1}for(var m=0;m<c._sounds.length;m++)if(!c._sounds[m]._paused)return!0;return!1},duration:function(a){var c=this,f=c._duration,m=c._soundById(a);return m&&(f=c._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,f=0;f<c.length;f++)c[f]._paused||a.stop(c[f]._id),a._webAudio||(a._clearSound(c[f]._node),c[f]._node.removeEventListener("error",c[f]._errorFn,!1),c[f]._node.removeEventListener(n._canPlayEvent,c[f]._loadFn,!1),c[f]._node.removeEventListener("ended",c[f]._endFn,!1),n._releaseHtml5Audio(c[f]._node)),delete c[f]._node,a._clearTimer(c[f]._id);var m=n._howls.indexOf(a);m>=0&&n._howls.splice(m,1);var v=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===a._src||a._src.indexOf(n._howls[f]._src)>=0){v=!1;break}return o&&v&&delete o[a._src],n.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,c,f,m){var v=this,g=v["_on"+a];return typeof c=="function"&&g.push(m?{id:f,fn:c,once:m}:{id:f,fn:c}),v},off:function(a,c,f){var m=this,v=m["_on"+a],g=0;if(typeof c=="number"&&(f=c,c=null),c||f)for(g=0;g<v.length;g++){var y=f===v[g].id;if(c===v[g].fn&&y||!c&&y){v.splice(g,1);break}}else if(a)m["_on"+a]=[];else{var b=Object.keys(m);for(g=0;g<b.length;g++)b[g].indexOf("_on")===0&&Array.isArray(m[b[g]])&&(m[b[g]]=[])}return m},once:function(a,c,f){var m=this;return m.on(a,c,f,1),m},_emit:function(a,c,f){for(var m=this,v=m["_on"+a],g=v.length-1;g>=0;g--)(!v[g].id||v[g].id===c||a==="load")&&(setTimeout(function(y){y.call(this,c,f)}.bind(m,v[g].fn),0),v[g].once&&m.off(a,v[g].fn,v[g].id));return m._loadQueue(a),m},_loadQueue:function(a){var c=this;if(c._queue.length>0){var f=c._queue[0];f.event===a&&(c._queue.shift(),c._loadQueue()),a||f.action()}return c},_ended:function(a){var c=this,f=a._sprite;if(!c._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(c._ended.bind(c,a),100),c;var m=!!(a._loop||c._sprite[f][2]);if(c._emit("end",a._id),!c._webAudio&&m&&c.stop(a._id,!0).play(a._id),c._webAudio&&m){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=n.ctx.currentTime;var v=(a._stop-a._start)*1e3/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),v)}return c._webAudio&&!m&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),n._autoSuspend()),!c._webAudio&&!m&&c.stop(a._id,!0),c},_clearTimer:function(a){var c=this;if(c._endTimers[a]){if(typeof c._endTimers[a]!="function")clearTimeout(c._endTimers[a]);else{var f=c._soundById(a);f&&f._node&&f._node.removeEventListener("ended",c._endTimers[a],!1)}delete c._endTimers[a]}return c},_soundById:function(a){for(var c=this,f=0;f<c._sounds.length;f++)if(a===c._sounds[f]._id)return c._sounds[f];return null},_inactiveSound:function(){var a=this;a._drain();for(var c=0;c<a._sounds.length;c++)if(a._sounds[c]._ended)return a._sounds[c].reset();return new s(a)},_drain:function(){var a=this,c=a._pool,f=0,m=0;if(!(a._sounds.length<c)){for(m=0;m<a._sounds.length;m++)a._sounds[m]._ended&&f++;for(m=a._sounds.length-1;m>=0;m--){if(f<=c)return;a._sounds[m]._ended&&(a._webAudio&&a._sounds[m]._node&&a._sounds[m]._node.disconnect(0),a._sounds.splice(m,1),f--)}}},_getSoundIds:function(a){var c=this;if(typeof a>"u"){for(var f=[],m=0;m<c._sounds.length;m++)f.push(c._sounds[m]._id);return f}else return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=n.ctx.createBufferSource(),a._node.bufferSource.buffer=o[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,n.ctx.currentTime),c},_cleanBuffer:function(a){var c=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),f))try{a.bufferSource.buffer=n._scratchBuffer}catch{}return a.bufferSource=null,c},_clearSound:function(a){var c=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);c||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(a){this._parent=a,this.init()};s.prototype={init:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,c._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,f=n._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),a._node.gain.setValueAtTime(f,n.ctx.currentTime),a._node.paused=!0,a._node.connect(n.masterGain)):n.noAudio||(a._node=n._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(n._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=c._src,a._node.preload=c._preload===!0?"auto":c._preload,a._node.volume=f*n.volume(),a._node.load()),a},reset:function(){var a=this,c=a._parent;return a._muted=c._muted,a._loop=c._loop,a._volume=c._volume,a._rate=c._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(a._node.duration*10)/10,Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue()),a._node.removeEventListener(n._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,c=a._parent;c._duration===1/0&&(c._duration=Math.ceil(a._node.duration*10)/10,c._sprite.__default[1]===1/0&&(c._sprite.__default[1]=c._duration*1e3),c._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var o={},i=function(a){var c=a._src;if(o[c]){a._duration=o[c].duration,u(a);return}if(/^data:[^;]+;base64,/.test(c)){for(var f=atob(c.split(",")[1]),m=new Uint8Array(f.length),v=0;v<f.length;++v)m[v]=f.charCodeAt(v);l(m.buffer,a)}else{var g=new XMLHttpRequest;g.open(a._xhr.method,c,!0),g.withCredentials=a._xhr.withCredentials,g.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(y){g.setRequestHeader(y,a._xhr.headers[y])}),g.onload=function(){var y=(g.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,a)},g.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete o[c],a.load())},d(g)}},d=function(a){try{a.send()}catch{a.onerror()}},l=function(a,c){var f=function(){c._emit("loaderror",null,"Decoding audio data failed.")},m=function(v){v&&c._sounds.length>0?(o[c._src]=v,u(c,v)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(a).then(m).catch(f):n.ctx.decodeAudioData(a,m,f)},u=function(a,c){c&&!a._duration&&(a._duration=c.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},_=function(){if(!!n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),c=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=c?parseInt(c[1],10):null;if(a&&f&&f<9){var m=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!m&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof commonjsGlobal<"u"?(commonjsGlobal.HowlerGlobal=e,commonjsGlobal.Howler=n,commonjsGlobal.Howl=r,commonjsGlobal.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;if(r=typeof r!="number"?o._pos[1]:r,s=typeof s!="number"?o._pos[2]:s,typeof n=="number")o._pos=[n,r,s],typeof o.ctx.listener.positionX<"u"?(o.ctx.listener.positionX.setTargetAtTime(o._pos[0],Howler.ctx.currentTime,.1),o.ctx.listener.positionY.setTargetAtTime(o._pos[1],Howler.ctx.currentTime,.1),o.ctx.listener.positionZ.setTargetAtTime(o._pos[2],Howler.ctx.currentTime,.1)):o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]);else return o._pos;return o},HowlerGlobal.prototype.orientation=function(n,r,s,o,i,d){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(r=typeof r!="number"?u[1]:r,s=typeof s!="number"?u[2]:s,o=typeof o!="number"?u[3]:o,i=typeof i!="number"?u[4]:i,d=typeof d!="number"?u[5]:d,typeof n=="number")l._orientation=[n,r,s,o,i,d],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(d,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,r,s,o,i,d);else return u;return l},Howl.prototype.init=function(n){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,r)}}),s;var o=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var i=s._getSoundIds(r),d=0;d<i.length;d++){var l=s._soundById(i[d]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,o),o==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",l._id);else return l._stereo}return s},Howl.prototype.pos=function(n,r,s,o){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"pos",action:function(){i.pos(n,r,s,o)}}),i;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof o>"u")if(typeof n=="number")i._pos=[n,r,s];else return i._pos;for(var d=i._getSoundIds(o),l=0;l<d.length;l++){var u=i._soundById(d[l]);if(u)if(typeof n=="number")u._pos=[n,r,s],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setPosition(n,r,s)),i._emit("pos",u._id);else return u._pos}return i},Howl.prototype.orientation=function(n,r,s,o){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"orientation",action:function(){i.orientation(n,r,s,o)}}),i;if(r=typeof r!="number"?i._orientation[1]:r,s=typeof s!="number"?i._orientation[2]:s,typeof o>"u")if(typeof n=="number")i._orientation=[n,r,s];else return i._orientation;for(var d=i._getSoundIds(o),l=0;l<d.length;l++){var u=i._soundById(d[l]);if(u)if(typeof n=="number")u._orientation=[n,r,s],u._node&&(u._panner||(u._pos||(u._pos=i._pos||[0,0,-.5]),e(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setOrientation(n,r,s)),i._emit("orientation",u._id);else return u._orientation}return i},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,s,o,i;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof o>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return i=n._soundById(parseInt(r[0],10)),i?i._pannerAttr:n._pannerAttr;else r.length===2&&(s=r[0],o=parseInt(r[1],10));for(var d=n._getSoundIds(o),l=0;l<d.length;l++)if(i=n._soundById(d[l]),i){var u=i._pannerAttr;u={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:u.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:u.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:u.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:u.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:u.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:u.panningModel};var _=i._panner;_?(_.coneInnerAngle=u.coneInnerAngle,_.coneOuterAngle=u.coneOuterAngle,_.coneOuterGain=u.coneOuterGain,_.distanceModel=u.distanceModel,_.maxDistance=u.maxDistance,_.refDistance=u.refDistance,_.rolloffFactor=u.rolloffFactor,_.panningModel=u.panningModel):(i._pos||(i._pos=n._pos||[0,0,-.5]),e(i,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,n.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(howler);function makeMap(t,e){const n=Object.create(null),r=t.split(",");for(let s=0;s<r.length;s++)n[r[s]]=!0;return e?s=>!!n[s.toLowerCase()]:s=>!!n[s]}function normalizeStyle(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=isString(r)?parseStringStyle(r):normalizeStyle(r);if(s)for(const o in s)e[o]=s[o]}return e}else{if(isString(t))return t;if(isObject$1(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const r=n.split(propertyDelimiterRE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray$1(t))for(let n=0;n<t.length;n++){const r=normalizeClass(t[n]);r&&(e+=r+" ")}else if(isObject$1(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString=t=>isString(t)?t:t==null?"":isArray$1(t)||isObject$1(t)&&(t.toString===objectToString||!isFunction(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s])=>(n[`${r} =>`]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$1(e)&&!isArray$1(e)&&!isPlainObject(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty.call(t,e),isArray$1=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject$1=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$1(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const s=e[r];wasTracked(s)&&!newTracked(s)?s.delete(t):e[n++]=s,s.w&=~trackOpBit,s.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,r)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,n){if(shouldTrack&&activeEffect){let r=targetMap.get(t);r||targetMap.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=createDep()),trackEffects(s)}}function trackEffects(t,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,n=!wasTracked(t)):n=!t.has(activeEffect),n&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,n,r,s,o){const i=targetMap.get(t);if(!i)return;let d=[];if(e==="clear")d=[...i.values()];else if(n==="length"&&isArray$1(t)){const l=toNumber(r);i.forEach((u,_)=>{(_==="length"||_>=l)&&d.push(u)})}else switch(n!==void 0&&d.push(i.get(n)),e){case"add":isArray$1(t)?isIntegerKey(n)&&d.push(i.get("length")):(d.push(i.get(ITERATE_KEY)),isMap(t)&&d.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(t)||(d.push(i.get(ITERATE_KEY)),isMap(t)&&d.push(i.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&d.push(i.get(ITERATE_KEY));break}if(d.length===1)d[0]&&triggerEffects(d[0]);else{const l=[];for(const u of d)u&&l.push(...u);triggerEffects(createDep(l))}}function triggerEffects(t,e){const n=isArray$1(t)?t:[...t];for(const r of n)r.computed&&triggerEffect(r);for(const r of n)r.computed||triggerEffect(r)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=toRaw(this);for(let o=0,i=this.length;o<i;o++)track(r,"get",o+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking();const r=toRaw(this)[e].apply(this,n);return resetTracking(),r}}),t}function createGetter(t=!1,e=!1){return function(r,s,o){if(s==="__v_isReactive")return!t;if(s==="__v_isReadonly")return t;if(s==="__v_isShallow")return e;if(s==="__v_raw"&&o===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(r))return r;const i=isArray$1(r);if(!t&&i&&hasOwn(arrayInstrumentations,s))return Reflect.get(arrayInstrumentations,s,o);const d=Reflect.get(r,s,o);return(isSymbol(s)?builtInSymbols.has(s):isNonTrackableKeys(s))||(t||track(r,"get",s),e)?d:isRef(d)?i&&isIntegerKey(s)?d:d.value:isObject$1(d)?t?readonly(d):reactive(d):d}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(n,r,s,o){let i=n[r];if(isReadonly(i)&&isRef(i)&&!isRef(s))return!1;if(!t&&(!isShallow(s)&&!isReadonly(s)&&(i=toRaw(i),s=toRaw(s)),!isArray$1(n)&&isRef(i)&&!isRef(s)))return i.value=s,!0;const d=isArray$1(n)&&isIntegerKey(r)?Number(r)<n.length:hasOwn(n,r),l=Reflect.set(n,r,s,o);return n===toRaw(o)&&(d?hasChanged(s,i)&&trigger(n,"set",r,s):trigger(n,"add",r,s)),l}}function deleteProperty(t,e){const n=hasOwn(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&trigger(t,"delete",e,void 0),r}function has(t,e){const n=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),n}function ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,e,n=!1,r=!1){t=t.__v_raw;const s=toRaw(t),o=toRaw(e);n||(e!==o&&track(s,"get",e),track(s,"get",o));const{has:i}=getProto(s),d=r?toShallow:n?toReadonly:toReactive;if(i.call(s,e))return d(t.get(e));if(i.call(s,o))return d(t.get(o));t!==s&&t.get(e)}function has$1(t,e=!1){const n=this.__v_raw,r=toRaw(n),s=toRaw(t);return e||(t!==s&&track(r,"has",t),track(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const n=toRaw(this),{has:r,get:s}=getProto(n);let o=r.call(n,t);o||(t=toRaw(t),o=r.call(n,t));const i=s.call(n,t);return n.set(t,e),o?hasChanged(e,i)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:r}=getProto(e);let s=n.call(e,t);s||(t=toRaw(t),s=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return s&&trigger(e,"delete",t,void 0),o}function clear(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(r,s){const o=this,i=o.__v_raw,d=toRaw(i),l=e?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",ITERATE_KEY),i.forEach((u,_)=>r.call(s,l(u),l(_),o))}}function createIterableMethod(t,e,n){return function(...r){const s=this.__v_raw,o=toRaw(s),i=isMap(o),d=t==="entries"||t===Symbol.iterator&&i,l=t==="keys"&&i,u=s[t](...r),_=n?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:a,done:c}=u.next();return c?{value:a,done:c}:{value:d?[_(a[0]),_(a[1])]:_(a),done:c}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(o){return get$1(this,o)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(o){return get$1(this,o,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(o){return get$1(this,o,!0)},get size(){return size(this,!0)},has(o){return has$1.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(o){return get$1(this,o,!0,!0)},get size(){return size(this,!0)},has(o){return has$1.call(this,o,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{t[o]=createIterableMethod(o,!1,!1),n[o]=createIterableMethod(o,!0,!1),e[o]=createIterableMethod(o,!1,!0),r[o]=createIterableMethod(o,!0,!0)}),[t,n,e,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(r,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(hasOwn(n,s)&&s in r?n:r,s,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,n,r,s){if(!isObject$1(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=s.get(t);if(o)return o;const i=getTargetType(t);if(i===0)return t;const d=new Proxy(t,i===2?r:n);return s.set(t,d),d}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$1(t)?reactive(t):t,toReadonly=t=>isObject$1(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}var _a;class ComputedRefImpl{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a="__v_isReadonly";function computed$1(t,e,n=!1){let r,s;const o=isFunction(t);return o?(r=t,s=NOOP):(r=t.get,s=t.set),new ComputedRefImpl(r,s,o||!s,n)}function warn(t,...e){}function callWithErrorHandling(t,e,n,r){let s;try{s=r?t(...r):t()}catch(o){handleError(o,e,n)}return s}function callWithAsyncErrorHandling(t,e,n,r){if(isFunction(t)){const o=callWithErrorHandling(t,e,n,r);return o&&isPromise(o)&&o.catch(i=>{handleError(i,e,n)}),o}const s=[];for(let o=0;o<t.length;o++)s.push(callWithAsyncErrorHandling(t[o],e,n,r));return s}function handleError(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let o=e.parent;const i=e.proxy,d=n;for(;o;){const u=o.ec;if(u){for(let _=0;_<u.length;_++)if(u[_](t,i,d)===!1)return}o=o.parent}const l=e.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[t,i,d]);return}}logError(t,n,s,r)}function logError(t,e,n,r=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const r=e+n>>>1;getId(queue[r])<t?e=r+1:n=r}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray$1(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];n&&n.pre&&(queue.splice(e,1),e--,n())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,r)=>getId(n)-getId(r)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||EMPTY_OBJ;let s=n;const o=e.startsWith("update:"),i=o&&e.slice(7);if(i&&i in r){const _=`${i==="modelValue"?"model":i}Modifiers`,{number:a,trim:c}=r[_]||EMPTY_OBJ;c&&(s=n.map(f=>isString(f)?f.trim():f)),a&&(s=n.map(toNumber))}let d,l=r[d=toHandlerKey(e)]||r[d=toHandlerKey(camelize(e))];!l&&o&&(l=r[d=toHandlerKey(hyphenate(e))]),l&&callWithAsyncErrorHandling(l,t,6,s);const u=r[d+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[d])return;t.emitted[d]=!0,callWithAsyncErrorHandling(u,t,6,s)}}function normalizeEmitsOptions(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const o=t.emits;let i={},d=!1;if(!isFunction(t)){const l=u=>{const _=normalizeEmitsOptions(u,e,!0);_&&(d=!0,extend(i,_))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!o&&!d?(isObject$1(t)&&r.set(t,null),null):(isArray$1(o)?o.forEach(l=>i[l]=null):extend(i,o),isObject$1(t)&&r.set(t,i),i)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(e);let i;try{i=t(...s)}finally{setCurrentRenderingInstance(o),r._d&&setBlockTracking(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:o,propsOptions:[i],slots:d,attrs:l,emit:u,render:_,renderCache:a,data:c,setupState:f,ctx:m,inheritAttrs:v}=t;let g,y;const b=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const x=s||r;g=normalizeVNode(_.call(x,x,a,o,f,c,m)),y=l}else{const x=e;g=normalizeVNode(x.length>1?x(o,{attrs:l,slots:d,emit:u}):x(o,null)),y=e.props?l:getFunctionalFallthrough(l)}}catch(x){blockStack.length=0,handleError(x,t,1),g=createVNode(Comment)}let N=g;if(y&&v!==!1){const x=Object.keys(y),{shapeFlag:A}=N;x.length&&A&7&&(i&&x.some(isModelListener)&&(y=filterModelListeners(y,i)),N=cloneVNode(N,y))}return n.dirs&&(N=cloneVNode(N),N.dirs=N.dirs?N.dirs.concat(n.dirs):n.dirs),n.transition&&(N.transition=n.transition),g=N,setCurrentRenderingInstance(b),g}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const r in t)(!isModelListener(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function shouldUpdateComponent(t,e,n){const{props:r,children:s,component:o}=t,{props:i,children:d,patchFlag:l}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?hasPropsChanged(r,i,u):!!i;if(l&8){const _=e.dynamicProps;for(let a=0;a<_.length;a++){const c=_[a];if(i[c]!==r[c]&&!isEmitListener(u,c))return!0}}}else return(s||d)&&(!d||!d.$stable)?!0:r===i?!1:r?i?hasPropsChanged(r,i,u):!0:!!i;return!1}function hasPropsChanged(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const o=r[s];if(e[o]!==t[o]&&!isEmitListener(n,o))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$1(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[t]=e}}function inject(t,e,n=!1){const r=currentInstance||currentRenderingInstance;if(r){const s=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&isFunction(e)?e.call(r.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:r,flush:s,onTrack:o,onTrigger:i}=EMPTY_OBJ){const d=currentInstance;let l,u=!1,_=!1;if(isRef(t)?(l=()=>t.value,u=isShallow(t)):isReactive(t)?(l=()=>t,r=!0):isArray$1(t)?(_=!0,u=t.some(N=>isReactive(N)||isShallow(N)),l=()=>t.map(N=>{if(isRef(N))return N.value;if(isReactive(N))return traverse(N);if(isFunction(N))return callWithErrorHandling(N,d,2)})):isFunction(t)?e?l=()=>callWithErrorHandling(t,d,2):l=()=>{if(!(d&&d.isUnmounted))return a&&a(),callWithAsyncErrorHandling(t,d,3,[c])}:l=NOOP,e&&r){const N=l;l=()=>traverse(N())}let a,c=N=>{a=y.onStop=()=>{callWithErrorHandling(N,d,4)}},f;if(isInSSRComponentSetup)if(c=NOOP,e?n&&callWithAsyncErrorHandling(e,d,3,[l(),_?[]:void 0,c]):l(),s==="sync"){const N=useSSRContext();f=N.__watcherHandles||(N.__watcherHandles=[])}else return NOOP;let m=_?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const v=()=>{if(!!y.active)if(e){const N=y.run();(r||u||(_?N.some((x,A)=>hasChanged(x,m[A])):hasChanged(N,m)))&&(a&&a(),callWithAsyncErrorHandling(e,d,3,[N,m===INITIAL_WATCHER_VALUE?void 0:_&&m[0]===INITIAL_WATCHER_VALUE?[]:m,c]),m=N)}else y.run()};v.allowRecurse=!!e;let g;s==="sync"?g=v:s==="post"?g=()=>queuePostRenderEffect(v,d&&d.suspense):(v.pre=!0,d&&(v.id=d.uid),g=()=>queueJob(v));const y=new ReactiveEffect(l,g);e?n?v():m=y.run():s==="post"?queuePostRenderEffect(y.run.bind(y),d&&d.suspense):y.run();const b=()=>{y.stop(),d&&d.scope&&remove(d.scope.effects,y)};return f&&f.push(b),b}function instanceWatch(t,e,n){const r=this.proxy,s=isString(t)?t.includes(".")?createPathGetter(r,t):()=>r[t]:t.bind(r,r);let o;isFunction(e)?o=e:(o=e.handler,n=e);const i=currentInstance;setCurrentInstance(this);const d=doWatch(s,o.bind(r),n);return i?setCurrentInstance(i):unsetCurrentInstance(),d}function createPathGetter(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function traverse(t,e){if(!isObject$1(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray$1(t))for(let n=0;n<t.length;n++)traverse(t[n],e);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e)});else if(isPlainObject(t))for(const n in t)traverse(t[n],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const n=getCurrentInstance(),r=useTransitionState();let s;return()=>{const o=e.default&&getTransitionRawChildren(e.default(),!0);if(!o||!o.length)return;let i=o[0];if(o.length>1){for(const v of o)if(v.type!==Comment){i=v;break}}const d=toRaw(t),{mode:l}=d;if(r.isLeaving)return emptyPlaceholder(i);const u=getKeepAliveChild(i);if(!u)return emptyPlaceholder(i);const _=resolveTransitionHooks(u,d,r,n);setTransitionHooks(u,_);const a=n.subTree,c=a&&getKeepAliveChild(a);let f=!1;const{getTransitionKey:m}=u.type;if(m){const v=m();s===void 0?s=v:v!==s&&(s=v,f=!0)}if(c&&c.type!==Comment&&(!isSameVNodeType(u,c)||f)){const v=resolveTransitionHooks(c,d,r,n);if(setTransitionHooks(c,v),l==="out-in")return r.isLeaving=!0,v.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(i);l==="in-out"&&u.type!==Comment&&(v.delayLeave=(g,y,b)=>{const N=getLeavingNodesForType(r,c);N[String(c.key)]=c,g._leaveCb=()=>{y(),g._leaveCb=void 0,delete _.delayedLeave},_.delayedLeave=b})}return i}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function resolveTransitionHooks(t,e,n,r){const{appear:s,mode:o,persisted:i=!1,onBeforeEnter:d,onEnter:l,onAfterEnter:u,onEnterCancelled:_,onBeforeLeave:a,onLeave:c,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:v,onAppear:g,onAfterAppear:y,onAppearCancelled:b}=e,N=String(t.key),x=getLeavingNodesForType(n,t),A=(P,j)=>{P&&callWithAsyncErrorHandling(P,r,9,j)},L=(P,j)=>{const H=j[1];A(P,j),isArray$1(P)?P.every(ae=>ae.length<=1)&&H():P.length<=1&&H()},V={mode:o,persisted:i,beforeEnter(P){let j=d;if(!n.isMounted)if(s)j=v||d;else return;P._leaveCb&&P._leaveCb(!0);const H=x[N];H&&isSameVNodeType(t,H)&&H.el._leaveCb&&H.el._leaveCb(),A(j,[P])},enter(P){let j=l,H=u,ae=_;if(!n.isMounted)if(s)j=g||l,H=y||u,ae=b||_;else return;let ie=!1;const le=P._enterCb=J=>{ie||(ie=!0,J?A(ae,[P]):A(H,[P]),V.delayedLeave&&V.delayedLeave(),P._enterCb=void 0)};j?L(j,[P,le]):le()},leave(P,j){const H=String(t.key);if(P._enterCb&&P._enterCb(!0),n.isUnmounting)return j();A(a,[P]);let ae=!1;const ie=P._leaveCb=le=>{ae||(ae=!0,j(),le?A(m,[P]):A(f,[P]),P._leaveCb=void 0,x[H]===t&&delete x[H])};x[H]=t,c?L(c,[P,ie]):ie()},clone(P){return resolveTransitionHooks(P,e,n,r)}};return V}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,n){let r=[],s=0;for(let o=0;o<t.length;o++){let i=t[o];const d=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===Fragment?(i.patchFlag&128&&s++,r=r.concat(getTransitionRawChildren(i.children,e,d))):(e||i.type!==Comment)&&r.push(d!=null?cloneVNode(i,{key:d}):i)}if(s>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function defineComponent(t){return isFunction(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(injectHook(e,r,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(r,e,n,s),s=s.parent}}function injectToKeepAliveRoot(t,e,n,r){const s=injectHook(e,t,r,!0);onUnmounted(()=>{remove(r[e],s)},n)}function injectHook(t,e,n=currentInstance,r=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const d=callWithAsyncErrorHandling(e,n,t,i);return unsetCurrentInstance(),resetTracking(),d});return r?s.unshift(o):s.push(o),o}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...r)=>e(...r),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const n=currentRenderingInstance;if(n===null)return t;const r=getExposeProxy(n)||n.proxy,s=t.dirs||(t.dirs=[]);for(let o=0;o<e.length;o++){let[i,d,l,u=EMPTY_OBJ]=e[o];i&&(isFunction(i)&&(i={mounted:i,updated:i}),i.deep&&traverse(d),s.push({dir:i,instance:r,value:d,oldValue:void 0,arg:l,modifiers:u}))}return t}function invokeDirectiveHook(t,e,n,r){const s=t.dirs,o=e&&e.dirs;for(let i=0;i<s.length;i++){const d=s[i];o&&(d.oldValue=o[i].value);let l=d.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[t.el,d,t,e]),resetTracking())}}const COMPONENTS="components";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(t,e,n=!0,r=!1){const s=currentRenderingInstance||currentInstance;if(s){const o=s.type;if(t===COMPONENTS){const d=getComponentName(o,!1);if(d&&(d===e||d===camelize(e)||d===capitalize(camelize(e))))return o}const i=resolve(s[t]||o[t],e)||resolve(s.appContext[t],e);return!i&&r?o:i}}function resolve(t,e){return t&&(t[e]||t[camelize(e)]||t[capitalize(camelize(e))])}function renderList(t,e,n,r){let s;const o=n&&n[r];if(isArray$1(t)||isString(t)){s=new Array(t.length);for(let i=0,d=t.length;i<d;i++)s[i]=e(t[i],i,void 0,o&&o[i])}else if(typeof t=="number"){s=new Array(t);for(let i=0;i<t;i++)s[i]=e(i+1,i,void 0,o&&o[i])}else if(isObject$1(t))if(t[Symbol.iterator])s=Array.from(t,(i,d)=>e(i,d,void 0,o&&o[d]));else{const i=Object.keys(t);s=new Array(i.length);for(let d=0,l=i.length;d<l;d++){const u=i[d];s[d]=e(t[u],u,d,o&&o[d])}}else s=[];return n&&(n[r]=s),s}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:n,setupState:r,data:s,props:o,accessCache:i,type:d,appContext:l}=t;let u;if(e[0]!=="$"){const f=i[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(hasSetupBinding(r,e))return i[e]=1,r[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return i[e]=2,s[e];if((u=t.propsOptions[0])&&hasOwn(u,e))return i[e]=3,o[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return i[e]=4,n[e];shouldCacheAccess&&(i[e]=0)}}const _=publicPropertiesMap[e];let a,c;if(_)return e==="$attrs"&&track(t,"get",e),_(t);if((a=d.__cssModules)&&(a=a[e]))return a;if(n!==EMPTY_OBJ&&hasOwn(n,e))return i[e]=4,n[e];if(c=l.config.globalProperties,hasOwn(c,e))return c[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return hasSetupBinding(s,e)?(s[e]=n,!0):r!==EMPTY_OBJ&&hasOwn(r,e)?(r[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o}},i){let d;return!!n[i]||t!==EMPTY_OBJ&&hasOwn(t,i)||hasSetupBinding(e,i)||(d=o[0])&&hasOwn(d,i)||hasOwn(r,i)||hasOwn(publicPropertiesMap,i)||hasOwn(s.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,r=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:i,watch:d,provide:l,inject:u,created:_,beforeMount:a,mounted:c,beforeUpdate:f,updated:m,activated:v,deactivated:g,beforeDestroy:y,beforeUnmount:b,destroyed:N,unmounted:x,render:A,renderTracked:L,renderTriggered:V,errorCaptured:P,serverPrefetch:j,expose:H,inheritAttrs:ae,components:ie,directives:le,filters:J}=e;if(u&&resolveInjections(u,r,null,t.appContext.config.unwrapInjectedRef),i)for(const C in i){const D=i[C];isFunction(D)&&(r[C]=D.bind(n))}if(s){const C=s.call(n,n);isObject$1(C)&&(t.data=reactive(C))}if(shouldCacheAccess=!0,o)for(const C in o){const D=o[C],X=isFunction(D)?D.bind(n,n):isFunction(D.get)?D.get.bind(n,n):NOOP,z=!isFunction(D)&&isFunction(D.set)?D.set.bind(n):NOOP,pe=computed({get:X,set:z});Object.defineProperty(r,C,{enumerable:!0,configurable:!0,get:()=>pe.value,set:_e=>pe.value=_e})}if(d)for(const C in d)createWatcher(d[C],r,n,C);if(l){const C=isFunction(l)?l.call(n):l;Reflect.ownKeys(C).forEach(D=>{provide(D,C[D])})}_&&callHook(_,t,"c");function G(C,D){isArray$1(D)?D.forEach(X=>C(X.bind(n))):D&&C(D.bind(n))}if(G(onBeforeMount,a),G(onMounted,c),G(onBeforeUpdate,f),G(onUpdated,m),G(onActivated,v),G(onDeactivated,g),G(onErrorCaptured,P),G(onRenderTracked,L),G(onRenderTriggered,V),G(onBeforeUnmount,b),G(onUnmounted,x),G(onServerPrefetch,j),isArray$1(H))if(H.length){const C=t.exposed||(t.exposed={});H.forEach(D=>{Object.defineProperty(C,D,{get:()=>n[D],set:X=>n[D]=X})})}else t.exposed||(t.exposed={});A&&t.render===NOOP&&(t.render=A),ae!=null&&(t.inheritAttrs=ae),ie&&(t.components=ie),le&&(t.directives=le)}function resolveInjections(t,e,n=NOOP,r=!1){isArray$1(t)&&(t=normalizeInject(t));for(const s in t){const o=t[s];let i;isObject$1(o)?"default"in o?i=inject(o.from||s,o.default,!0):i=inject(o.from||s):i=inject(o),isRef(i)&&r?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:d=>i.value=d}):e[s]=i}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray$1(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,r){const s=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString(t)){const o=e[t];isFunction(o)&&watch(s,o)}else if(isFunction(t))watch(s,t.bind(n));else if(isObject$1(t))if(isArray$1(t))t.forEach(o=>createWatcher(o,e,n,r));else{const o=isFunction(t.handler)?t.handler.bind(n):e[t.handler];isFunction(o)&&watch(s,o,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,d=o.get(e);let l;return d?l=d:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>mergeOptions$1(l,u,i,!0)),mergeOptions$1(l,e,i)),isObject$1(e)&&o.set(e,l),l}function mergeOptions$1(t,e,n,r=!1){const{mixins:s,extends:o}=e;o&&mergeOptions$1(t,o,n,!0),s&&s.forEach(i=>mergeOptions$1(t,i,n,!0));for(const i in e)if(!(r&&i==="expose")){const d=internalOptionMergeStrats[i]||n&&n[i];t[i]=d?d(t[i],e[i]):e[i]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(extend(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const r in e)n[r]=mergeAsArray(t[r],e[r]);return n}function initProps(t,e,n,r=!1){const s={},o={};def(o,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:shallowReactive(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function updateProps(t,e,n,r){const{props:s,attrs:o,vnode:{patchFlag:i}}=t,d=toRaw(s),[l]=t.propsOptions;let u=!1;if((r||i>0)&&!(i&16)){if(i&8){const _=t.vnode.dynamicProps;for(let a=0;a<_.length;a++){let c=_[a];if(isEmitListener(t.emitsOptions,c))continue;const f=e[c];if(l)if(hasOwn(o,c))f!==o[c]&&(o[c]=f,u=!0);else{const m=camelize(c);s[m]=resolvePropValue(l,d,m,f,t,!1)}else f!==o[c]&&(o[c]=f,u=!0)}}}else{setFullProps(t,e,s,o)&&(u=!0);let _;for(const a in d)(!e||!hasOwn(e,a)&&((_=hyphenate(a))===a||!hasOwn(e,_)))&&(l?n&&(n[a]!==void 0||n[_]!==void 0)&&(s[a]=resolvePropValue(l,d,a,void 0,t,!0)):delete s[a]);if(o!==d)for(const a in o)(!e||!hasOwn(e,a)&&!0)&&(delete o[a],u=!0)}u&&trigger(t,"set","$attrs")}function setFullProps(t,e,n,r){const[s,o]=t.propsOptions;let i=!1,d;if(e)for(let l in e){if(isReservedProp(l))continue;const u=e[l];let _;s&&hasOwn(s,_=camelize(l))?!o||!o.includes(_)?n[_]=u:(d||(d={}))[_]=u:isEmitListener(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,i=!0)}if(o){const l=toRaw(n),u=d||EMPTY_OBJ;for(let _=0;_<o.length;_++){const a=o[_];n[a]=resolvePropValue(s,l,a,u[a],t,!hasOwn(u,a))}}return i}function resolvePropValue(t,e,n,r,s,o){const i=t[n];if(i!=null){const d=hasOwn(i,"default");if(d&&r===void 0){const l=i.default;if(i.type!==Function&&isFunction(l)){const{propsDefaults:u}=s;n in u?r=u[n]:(setCurrentInstance(s),r=u[n]=l.call(null,e),unsetCurrentInstance())}else r=l}i[0]&&(o&&!d?r=!1:i[1]&&(r===""||r===hyphenate(n))&&(r=!0))}return r}function normalizePropsOptions(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const o=t.props,i={},d=[];let l=!1;if(!isFunction(t)){const _=a=>{l=!0;const[c,f]=normalizePropsOptions(a,e,!0);extend(i,c),f&&d.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(_),t.extends&&_(t.extends),t.mixins&&t.mixins.forEach(_)}if(!o&&!l)return isObject$1(t)&&r.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$1(o))for(let _=0;_<o.length;_++){const a=camelize(o[_]);validatePropName(a)&&(i[a]=EMPTY_OBJ)}else if(o)for(const _ in o){const a=camelize(_);if(validatePropName(a)){const c=o[_],f=i[a]=isArray$1(c)||isFunction(c)?{type:c}:Object.assign({},c);if(f){const m=getTypeIndex(Boolean,f.type),v=getTypeIndex(String,f.type);f[0]=m>-1,f[1]=v<0||m<v,(m>-1||hasOwn(f,"default"))&&d.push(a)}}}const u=[i,d];return isObject$1(t)&&r.set(t,u),u}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$1(e)?e.findIndex(n=>isSameType(n,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$1(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,n)=>{if(e._n)return e;const r=withCtx((...s)=>normalizeSlotValue(e(...s)),n);return r._c=!1,r},normalizeObjectSlots=(t,e,n)=>{const r=t._ctx;for(const s in t){if(isInternalKey(s))continue;const o=t[s];if(isFunction(o))e[s]=normalizeSlot$1(s,o,r);else if(o!=null){const i=normalizeSlotValue(o);e[s]=()=>i}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,i=EMPTY_OBJ;if(r.shapeFlag&32){const d=e._;d?n&&d===1?o=!1:(extend(s,e),!n&&d===1&&delete s._):(o=!e.$stable,normalizeObjectSlots(e,s)),i=e}else e&&(normalizeVNodeSlots(t,e),i={default:1});if(o)for(const d in s)!isInternalKey(d)&&!(d in i)&&delete s[d]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(r,s=null){isFunction(r)||(r=Object.assign({},r)),s!=null&&!isObject$1(s)&&(s=null);const o=createAppContext(),i=new Set;let d=!1;const l=o.app={_uid:uid++,_component:r,_props:s,_container:null,_context:o,_instance:null,version,get config(){return o.config},set config(u){},use(u,..._){return i.has(u)||(u&&isFunction(u.install)?(i.add(u),u.install(l,..._)):isFunction(u)&&(i.add(u),u(l,..._))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,_){return _?(o.components[u]=_,l):o.components[u]},directive(u,_){return _?(o.directives[u]=_,l):o.directives[u]},mount(u,_,a){if(!d){const c=createVNode(r,s);return c.appContext=o,_&&e?e(c,u):t(c,u,a),d=!0,l._container=u,u.__vue_app__=l,getExposeProxy(c.component)||c.component.proxy}},unmount(){d&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,_){return o.provides[u]=_,l}};return l}}function setRef(t,e,n,r,s=!1){if(isArray$1(t)){t.forEach((c,f)=>setRef(c,e&&(isArray$1(e)?e[f]:e),n,r,s));return}if(isAsyncWrapper(r)&&!s)return;const o=r.shapeFlag&4?getExposeProxy(r.component)||r.component.proxy:r.el,i=s?null:o,{i:d,r:l}=t,u=e&&e.r,_=d.refs===EMPTY_OBJ?d.refs={}:d.refs,a=d.setupState;if(u!=null&&u!==l&&(isString(u)?(_[u]=null,hasOwn(a,u)&&(a[u]=null)):isRef(u)&&(u.value=null)),isFunction(l))callWithErrorHandling(l,d,12,[i,_]);else{const c=isString(l),f=isRef(l);if(c||f){const m=()=>{if(t.f){const v=c?hasOwn(a,l)?a[l]:_[l]:l.value;s?isArray$1(v)&&remove(v,o):isArray$1(v)?v.includes(o)||v.push(o):c?(_[l]=[o],hasOwn(a,l)&&(a[l]=_[l])):(l.value=[o],t.k&&(_[t.k]=l.value))}else c?(_[l]=i,hasOwn(a,l)&&(a[l]=i)):f&&(l.value=i,t.k&&(_[t.k]=i))};i?(m.id=-1,queuePostRenderEffect(m,n)):m()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:r,remove:s,patchProp:o,createElement:i,createText:d,createComment:l,setText:u,setElementText:_,parentNode:a,nextSibling:c,setScopeId:f=NOOP,insertStaticContent:m}=t,v=(T,S,B,O=null,I=null,W=null,Z=!1,K=null,q=!!S.dynamicChildren)=>{if(T===S)return;T&&!isSameVNodeType(T,S)&&(O=Y(T),_e(T,I,W,!0),T=null),S.patchFlag===-2&&(q=!1,S.dynamicChildren=null);const{type:M,ref:oe,shapeFlag:re}=S;switch(M){case Text:g(T,S,B,O);break;case Comment:y(T,S,B,O);break;case Static:T==null&&b(S,B,O,Z);break;case Fragment:ie(T,S,B,O,I,W,Z,K,q);break;default:re&1?A(T,S,B,O,I,W,Z,K,q):re&6?le(T,S,B,O,I,W,Z,K,q):(re&64||re&128)&&M.process(T,S,B,O,I,W,Z,K,q,ee)}oe!=null&&I&&setRef(oe,T&&T.ref,W,S||T,!S)},g=(T,S,B,O)=>{if(T==null)r(S.el=d(S.children),B,O);else{const I=S.el=T.el;S.children!==T.children&&u(I,S.children)}},y=(T,S,B,O)=>{T==null?r(S.el=l(S.children||""),B,O):S.el=T.el},b=(T,S,B,O)=>{[T.el,T.anchor]=m(T.children,S,B,O,T.el,T.anchor)},N=({el:T,anchor:S},B,O)=>{let I;for(;T&&T!==S;)I=c(T),r(T,B,O),T=I;r(S,B,O)},x=({el:T,anchor:S})=>{let B;for(;T&&T!==S;)B=c(T),s(T),T=B;s(S)},A=(T,S,B,O,I,W,Z,K,q)=>{Z=Z||S.type==="svg",T==null?L(S,B,O,I,W,Z,K,q):j(T,S,I,W,Z,K,q)},L=(T,S,B,O,I,W,Z,K)=>{let q,M;const{type:oe,props:re,shapeFlag:se,transition:de,dirs:fe}=T;if(q=T.el=i(T.type,W,re&&re.is,re),se&8?_(q,T.children):se&16&&P(T.children,q,null,O,I,W&&oe!=="foreignObject",Z,K),fe&&invokeDirectiveHook(T,null,O,"created"),re){for(const me in re)me!=="value"&&!isReservedProp(me)&&o(q,me,null,re[me],W,T.children,O,I,Q);"value"in re&&o(q,"value",null,re.value),(M=re.onVnodeBeforeMount)&&invokeVNodeHook(M,O,T)}V(q,T,T.scopeId,Z,O),fe&&invokeDirectiveHook(T,null,O,"beforeMount");const ve=(!I||I&&!I.pendingBranch)&&de&&!de.persisted;ve&&de.beforeEnter(q),r(q,S,B),((M=re&&re.onVnodeMounted)||ve||fe)&&queuePostRenderEffect(()=>{M&&invokeVNodeHook(M,O,T),ve&&de.enter(q),fe&&invokeDirectiveHook(T,null,O,"mounted")},I)},V=(T,S,B,O,I)=>{if(B&&f(T,B),O)for(let W=0;W<O.length;W++)f(T,O[W]);if(I){let W=I.subTree;if(S===W){const Z=I.vnode;V(T,Z,Z.scopeId,Z.slotScopeIds,I.parent)}}},P=(T,S,B,O,I,W,Z,K,q=0)=>{for(let M=q;M<T.length;M++){const oe=T[M]=K?cloneIfMounted(T[M]):normalizeVNode(T[M]);v(null,oe,S,B,O,I,W,Z,K)}},j=(T,S,B,O,I,W,Z)=>{const K=S.el=T.el;let{patchFlag:q,dynamicChildren:M,dirs:oe}=S;q|=T.patchFlag&16;const re=T.props||EMPTY_OBJ,se=S.props||EMPTY_OBJ;let de;B&&toggleRecurse(B,!1),(de=se.onVnodeBeforeUpdate)&&invokeVNodeHook(de,B,S,T),oe&&invokeDirectiveHook(S,T,B,"beforeUpdate"),B&&toggleRecurse(B,!0);const fe=I&&S.type!=="foreignObject";if(M?H(T.dynamicChildren,M,K,B,O,fe,W):Z||D(T,S,K,null,B,O,fe,W,!1),q>0){if(q&16)ae(K,S,re,se,B,O,I);else if(q&2&&re.class!==se.class&&o(K,"class",null,se.class,I),q&4&&o(K,"style",re.style,se.style,I),q&8){const ve=S.dynamicProps;for(let me=0;me<ve.length;me++){const ye=ve[me],ke=re[ye],Ce=se[ye];(Ce!==ke||ye==="value")&&o(K,ye,ke,Ce,I,T.children,B,O,Q)}}q&1&&T.children!==S.children&&_(K,S.children)}else!Z&&M==null&&ae(K,S,re,se,B,O,I);((de=se.onVnodeUpdated)||oe)&&queuePostRenderEffect(()=>{de&&invokeVNodeHook(de,B,S,T),oe&&invokeDirectiveHook(S,T,B,"updated")},O)},H=(T,S,B,O,I,W,Z)=>{for(let K=0;K<S.length;K++){const q=T[K],M=S[K],oe=q.el&&(q.type===Fragment||!isSameVNodeType(q,M)||q.shapeFlag&70)?a(q.el):B;v(q,M,oe,null,O,I,W,Z,!0)}},ae=(T,S,B,O,I,W,Z)=>{if(B!==O){if(B!==EMPTY_OBJ)for(const K in B)!isReservedProp(K)&&!(K in O)&&o(T,K,B[K],null,Z,S.children,I,W,Q);for(const K in O){if(isReservedProp(K))continue;const q=O[K],M=B[K];q!==M&&K!=="value"&&o(T,K,M,q,Z,S.children,I,W,Q)}"value"in O&&o(T,"value",B.value,O.value)}},ie=(T,S,B,O,I,W,Z,K,q)=>{const M=S.el=T?T.el:d(""),oe=S.anchor=T?T.anchor:d("");let{patchFlag:re,dynamicChildren:se,slotScopeIds:de}=S;de&&(K=K?K.concat(de):de),T==null?(r(M,B,O),r(oe,B,O),P(S.children,B,oe,I,W,Z,K,q)):re>0&&re&64&&se&&T.dynamicChildren?(H(T.dynamicChildren,se,B,I,W,Z,K),(S.key!=null||I&&S===I.subTree)&&traverseStaticChildren(T,S,!0)):D(T,S,B,oe,I,W,Z,K,q)},le=(T,S,B,O,I,W,Z,K,q)=>{S.slotScopeIds=K,T==null?S.shapeFlag&512?I.ctx.activate(S,B,O,Z,q):J(S,B,O,I,W,Z,q):F(T,S,q)},J=(T,S,B,O,I,W,Z)=>{const K=T.component=createComponentInstance(T,O,I);if(isKeepAlive(T)&&(K.ctx.renderer=ee),setupComponent(K),K.asyncDep){if(I&&I.registerDep(K,G),!T.el){const q=K.subTree=createVNode(Comment);y(null,q,S,B)}return}G(K,T,S,B,I,W,Z)},F=(T,S,B)=>{const O=S.component=T.component;if(shouldUpdateComponent(T,S,B))if(O.asyncDep&&!O.asyncResolved){C(O,S,B);return}else O.next=S,invalidateJob(O.update),O.update();else S.el=T.el,O.vnode=S},G=(T,S,B,O,I,W,Z)=>{const K=()=>{if(T.isMounted){let{next:oe,bu:re,u:se,parent:de,vnode:fe}=T,ve=oe,me;toggleRecurse(T,!1),oe?(oe.el=fe.el,C(T,oe,Z)):oe=fe,re&&invokeArrayFns(re),(me=oe.props&&oe.props.onVnodeBeforeUpdate)&&invokeVNodeHook(me,de,oe,fe),toggleRecurse(T,!0);const ye=renderComponentRoot(T),ke=T.subTree;T.subTree=ye,v(ke,ye,a(ke.el),Y(ke),T,I,W),oe.el=ye.el,ve===null&&updateHOCHostEl(T,ye.el),se&&queuePostRenderEffect(se,I),(me=oe.props&&oe.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(me,de,oe,fe),I)}else{let oe;const{el:re,props:se}=S,{bm:de,m:fe,parent:ve}=T,me=isAsyncWrapper(S);if(toggleRecurse(T,!1),de&&invokeArrayFns(de),!me&&(oe=se&&se.onVnodeBeforeMount)&&invokeVNodeHook(oe,ve,S),toggleRecurse(T,!0),re&&ce){const ye=()=>{T.subTree=renderComponentRoot(T),ce(re,T.subTree,T,I,null)};me?S.type.__asyncLoader().then(()=>!T.isUnmounted&&ye()):ye()}else{const ye=T.subTree=renderComponentRoot(T);v(null,ye,B,O,T,I,W),S.el=ye.el}if(fe&&queuePostRenderEffect(fe,I),!me&&(oe=se&&se.onVnodeMounted)){const ye=S;queuePostRenderEffect(()=>invokeVNodeHook(oe,ve,ye),I)}(S.shapeFlag&256||ve&&isAsyncWrapper(ve.vnode)&&ve.vnode.shapeFlag&256)&&T.a&&queuePostRenderEffect(T.a,I),T.isMounted=!0,S=B=O=null}},q=T.effect=new ReactiveEffect(K,()=>queueJob(M),T.scope),M=T.update=()=>q.run();M.id=T.uid,toggleRecurse(T,!0),M()},C=(T,S,B)=>{S.component=T;const O=T.vnode.props;T.vnode=S,T.next=null,updateProps(T,S.props,O,B),updateSlots(T,S.children,B),pauseTracking(),flushPreFlushCbs(),resetTracking()},D=(T,S,B,O,I,W,Z,K,q=!1)=>{const M=T&&T.children,oe=T?T.shapeFlag:0,re=S.children,{patchFlag:se,shapeFlag:de}=S;if(se>0){if(se&128){z(M,re,B,O,I,W,Z,K,q);return}else if(se&256){X(M,re,B,O,I,W,Z,K,q);return}}de&8?(oe&16&&Q(M,I,W),re!==M&&_(B,re)):oe&16?de&16?z(M,re,B,O,I,W,Z,K,q):Q(M,I,W,!0):(oe&8&&_(B,""),de&16&&P(re,B,O,I,W,Z,K,q))},X=(T,S,B,O,I,W,Z,K,q)=>{T=T||EMPTY_ARR,S=S||EMPTY_ARR;const M=T.length,oe=S.length,re=Math.min(M,oe);let se;for(se=0;se<re;se++){const de=S[se]=q?cloneIfMounted(S[se]):normalizeVNode(S[se]);v(T[se],de,B,null,I,W,Z,K,q)}M>oe?Q(T,I,W,!0,!1,re):P(S,B,O,I,W,Z,K,q,re)},z=(T,S,B,O,I,W,Z,K,q)=>{let M=0;const oe=S.length;let re=T.length-1,se=oe-1;for(;M<=re&&M<=se;){const de=T[M],fe=S[M]=q?cloneIfMounted(S[M]):normalizeVNode(S[M]);if(isSameVNodeType(de,fe))v(de,fe,B,null,I,W,Z,K,q);else break;M++}for(;M<=re&&M<=se;){const de=T[re],fe=S[se]=q?cloneIfMounted(S[se]):normalizeVNode(S[se]);if(isSameVNodeType(de,fe))v(de,fe,B,null,I,W,Z,K,q);else break;re--,se--}if(M>re){if(M<=se){const de=se+1,fe=de<oe?S[de].el:O;for(;M<=se;)v(null,S[M]=q?cloneIfMounted(S[M]):normalizeVNode(S[M]),B,fe,I,W,Z,K,q),M++}}else if(M>se)for(;M<=re;)_e(T[M],I,W,!0),M++;else{const de=M,fe=M,ve=new Map;for(M=fe;M<=se;M++){const Ne=S[M]=q?cloneIfMounted(S[M]):normalizeVNode(S[M]);Ne.key!=null&&ve.set(Ne.key,M)}let me,ye=0;const ke=se-fe+1;let Ce=!1,Me=0;const Ie=new Array(ke);for(M=0;M<ke;M++)Ie[M]=0;for(M=de;M<=re;M++){const Ne=T[M];if(ye>=ke){_e(Ne,I,W,!0);continue}let Se;if(Ne.key!=null)Se=ve.get(Ne.key);else for(me=fe;me<=se;me++)if(Ie[me-fe]===0&&isSameVNodeType(Ne,S[me])){Se=me;break}Se===void 0?_e(Ne,I,W,!0):(Ie[Se-fe]=M+1,Se>=Me?Me=Se:Ce=!0,v(Ne,S[Se],B,null,I,W,Z,K,q),ye++)}const Ge=Ce?getSequence(Ie):EMPTY_ARR;for(me=Ge.length-1,M=ke-1;M>=0;M--){const Ne=fe+M,Se=S[Ne],Ue=Ne+1<oe?S[Ne+1].el:O;Ie[M]===0?v(null,Se,B,Ue,I,W,Z,K,q):Ce&&(me<0||M!==Ge[me]?pe(Se,B,Ue,2):me--)}}},pe=(T,S,B,O,I=null)=>{const{el:W,type:Z,transition:K,children:q,shapeFlag:M}=T;if(M&6){pe(T.component.subTree,S,B,O);return}if(M&128){T.suspense.move(S,B,O);return}if(M&64){Z.move(T,S,B,ee);return}if(Z===Fragment){r(W,S,B);for(let re=0;re<q.length;re++)pe(q[re],S,B,O);r(T.anchor,S,B);return}if(Z===Static){N(T,S,B);return}if(O!==2&&M&1&&K)if(O===0)K.beforeEnter(W),r(W,S,B),queuePostRenderEffect(()=>K.enter(W),I);else{const{leave:re,delayLeave:se,afterLeave:de}=K,fe=()=>r(W,S,B),ve=()=>{re(W,()=>{fe(),de&&de()})};se?se(W,fe,ve):ve()}else r(W,S,B)},_e=(T,S,B,O=!1,I=!1)=>{const{type:W,props:Z,ref:K,children:q,dynamicChildren:M,shapeFlag:oe,patchFlag:re,dirs:se}=T;if(K!=null&&setRef(K,null,B,T,!0),oe&256){S.ctx.deactivate(T);return}const de=oe&1&&se,fe=!isAsyncWrapper(T);let ve;if(fe&&(ve=Z&&Z.onVnodeBeforeUnmount)&&invokeVNodeHook(ve,S,T),oe&6)R(T.component,B,O);else{if(oe&128){T.suspense.unmount(B,O);return}de&&invokeDirectiveHook(T,null,S,"beforeUnmount"),oe&64?T.type.remove(T,S,B,I,ee,O):M&&(W!==Fragment||re>0&&re&64)?Q(M,S,B,!1,!0):(W===Fragment&&re&384||!I&&oe&16)&&Q(q,S,B),O&&be(T)}(fe&&(ve=Z&&Z.onVnodeUnmounted)||de)&&queuePostRenderEffect(()=>{ve&&invokeVNodeHook(ve,S,T),de&&invokeDirectiveHook(T,null,S,"unmounted")},B)},be=T=>{const{type:S,el:B,anchor:O,transition:I}=T;if(S===Fragment){ge(B,O);return}if(S===Static){x(T);return}const W=()=>{s(B),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(T.shapeFlag&1&&I&&!I.persisted){const{leave:Z,delayLeave:K}=I,q=()=>Z(B,W);K?K(T.el,W,q):q()}else W()},ge=(T,S)=>{let B;for(;T!==S;)B=c(T),s(T),T=B;s(S)},R=(T,S,B)=>{const{bum:O,scope:I,update:W,subTree:Z,um:K}=T;O&&invokeArrayFns(O),I.stop(),W&&(W.active=!1,_e(Z,T,S,B)),K&&queuePostRenderEffect(K,S),queuePostRenderEffect(()=>{T.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&T.asyncDep&&!T.asyncResolved&&T.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},Q=(T,S,B,O=!1,I=!1,W=0)=>{for(let Z=W;Z<T.length;Z++)_e(T[Z],S,B,O,I)},Y=T=>T.shapeFlag&6?Y(T.component.subTree):T.shapeFlag&128?T.suspense.next():c(T.anchor||T.el),te=(T,S,B)=>{T==null?S._vnode&&_e(S._vnode,null,null,!0):v(S._vnode||null,T,S,null,null,null,B),flushPreFlushCbs(),flushPostFlushCbs(),S._vnode=T},ee={p:v,um:_e,m:pe,r:be,mt:J,mc:P,pc:D,pbc:H,n:Y,o:t};let ue,ce;return e&&([ue,ce]=e(ee)),{render:te,hydrate:ue,createApp:createAppAPI(te,ue)}}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(t,e,n=!1){const r=t.children,s=e.children;if(isArray$1(r)&&isArray$1(s))for(let o=0;o<r.length;o++){const i=r[o];let d=s[o];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=s[o]=cloneIfMounted(s[o]),d.el=i.el),n||traverseStaticChildren(i,d)),d.type===Text&&(d.el=i.el)}}function getSequence(t){const e=t.slice(),n=[0];let r,s,o,i,d;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(o=0,i=n.length-1;o<i;)d=o+i>>1,t[n[d]]<u?o=d+1:i=d;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=e[i];return n}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,r,s,o){return setupBlock(createBaseVNode(t,e,n,r,s,o,!0))}function createBlock(t,e,n,r,s){return setupBlock(createVNode(t,e,n,r,s,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t!=null?t:null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null;function createBaseVNode(t,e=null,n=null,r=0,s=null,o=t===Fragment?0:1,i=!1,d=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return d?(normalizeChildren(l,n),o&128&&t.normalize(l)):n&&(l.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!i&&currentBlock&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,r=0,s=null,o=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const d=cloneVNode(t,e,!0);return n&&normalizeChildren(d,n),isBlockTreeEnabled>0&&!o&&currentBlock&&(d.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=d:currentBlock.push(d)),d.patchFlag|=-2,d}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:d,style:l}=e;d&&!isString(d)&&(e.class=normalizeClass(d)),isObject$1(l)&&(isProxy(l)&&!isArray$1(l)&&(l=extend({},l)),e.style=normalizeStyle(l))}const i=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$1(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,n,r,s,i,o,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,n=!1){const{props:r,ref:s,patchFlag:o,children:i}=t,d=e?mergeProps(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&normalizeKey(d),ref:e&&e.ref?n&&s?isArray$1(s)?s.concat(normalizeRef(e)):[s,normalizeRef(e)]:normalizeRef(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:i,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createStaticVNode(t,e){const n=createVNode(Static,null,t);return n.staticCount=e,n}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$1(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(isArray$1(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),r&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=normalizeClass([e.class,r.class]));else if(s==="style")e.style=normalizeStyle([e.style,r.style]);else if(isOn(s)){const o=e[s],i=r[s];i&&o!==i&&!(isArray$1(o)&&o.includes(i))&&(e[s]=o?[].concat(o,i):i)}else s!==""&&(e[s]=r[s])}return e}function invokeVNodeHook(t,e,n,r=null){callWithAsyncErrorHandling(t,e,7,[n,r])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||emptyAppContext,o={uid:uid$1++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,s),emitsOptions:normalizeEmitsOptions(r,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=emit$1.bind(null,o),t.ce&&t.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:n,children:r}=t.vnode,s=isStatefulComponent(t);initProps(t,n,s,e),initSlots(t,r);const o=s?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,o}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const o=callWithErrorHandling(r,t,0,[t.props,s]);if(resetTracking(),unsetCurrentInstance(),isPromise(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(i=>{handleSetupResult(t,i,e)}).catch(i=>{handleError(i,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject$1(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const r=t.type;if(!t.render){if(!e&&compile&&!r.render){const s=r.template||resolveMergedOptions(t).template;if(s){const{isCustomElement:o,compilerOptions:i}=t.appContext.config,{delimiters:d,compilerOptions:l}=r,u=extend(extend({isCustomElement:o,delimiters:d},i),l);r.render=compile(s,u)}}t.render=r.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,n){return track(t,"get","$attrs"),e[n]}})}function createSetupContext(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,n){const r=arguments.length;return r===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&isVNode(n)&&(n=[n]),createVNode(t,e,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e?doc.createElementNS(svgNS,t):doc.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,o){const i=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{templateContainer.innerHTML=r?`<svg>${t}</svg>`:t;const d=templateContainer.content;if(r){const l=d.firstChild;for(;l.firstChild;)d.appendChild(l.firstChild);d.removeChild(l)}e.insertBefore(d,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,n){const r=t.style,s=isString(n);if(n&&!s){for(const o in n)setStyle(r,o,n[o]);if(e&&!isString(e))for(const o in e)n[o]==null&&setStyle(r,o,"")}else{const o=r.display;s?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=o)}}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray$1(n))n.forEach(r=>setStyle(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):t[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let r=camelize(e);if(r!=="filter"&&r in t)return prefixCache[e]=r;r=capitalize(r);for(let s=0;s<prefixes.length;s++){const o=prefixes[s]+r;if(o in t)return prefixCache[e]=o}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const o=isSpecialBooleanAttr(e);n==null||o&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,o?"":n)}}function patchDOMProp(t,e,n,r,s,o,i){if(e==="innerHTML"||e==="textContent"){r&&i(r,s,o),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let d=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=includeBooleanAttr(n):n==null&&l==="string"?(n="",d=!0):l==="number"&&(n=0,d=!0)}try{t[e]=n}catch{}d&&t.removeAttribute(e)}function addEventListener(t,e,n,r){t.addEventListener(e,n,r)}function removeEventListener(t,e,n,r){t.removeEventListener(e,n,r)}function patchEvent(t,e,n,r,s=null){const o=t._vei||(t._vei={}),i=o[e];if(r&&i)i.value=r;else{const[d,l]=parseName(e);if(r){const u=o[e]=createInvoker(r,s);addEventListener(t,d,u,l)}else i&&(removeEventListener(t,d,i,l),o[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let r;for(;r=t.match(optionsModifierRE);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,n.value),e,5,[r])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray$1(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,n,r,s=!1,o,i,d,l)=>{e==="class"?patchClass(t,r,s):e==="style"?patchStyle(t,n,r):isOn(e)?isModelListener(e)||patchEvent(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,r,s))?patchDOMProp(t,e,r,o,i,d,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),patchAttr(t,e,r,s))};function shouldSetAsProp(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(n)?!1:e in t}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(n=>t[`${n}Key`]&&!e.includes(n))},withModifiers=(t,e)=>(n,...r)=>{for(let s=0;s<e.length;s++){const o=modifierGuards[e[s]];if(o&&o(n,e))return}return t(n,...r)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,e)=>n=>{if(!("key"in n))return;const r=hyphenate(n.key);if(e.some(s=>s===r||keyNames[s]===r))return t(n)},vShow={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),setDisplay(t,!0),r.enter(t)):r.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=normalizeContainer(r);if(!s)return;const o=e._component;!isFunction(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.innerHTML="";const i=n(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}const store=reactive({playing:{loaded:!1,is_playing:!1,muted:!1,id:null,title:null,artist:null,album:null,cover:null,seek:0,repeat:0,duration:0,progress:0,radio:!1,bitrate:0,format:null,quality:"LQ",server:null},queue:[],queue_index:0,group_queue:[],func_stack:[],selected_track_id:null,peer_status:"disconnected",scrobbling:!1,notifications_granted:!1,notifications_enabled:!1,theme:"light"});class Forte{constructor(){this.ready=null,this.token=null,this.server=null,this.username=null,this.session=null,this.track=null,this.player=new howler.Howl({src:[null],format:["flac","mp3","ogg","wav","aac","m4a","opus","webm"],preload:!0,html5:!0,volume:1}),this.player.on("load",()=>{this.track_loaded(),this.listen_progress(),this.track_quality(),this.track_lyrics()}),this.player.on("end",()=>{this.track_finished()})}async init(){let e=JSON.parse(localStorage.getItem("token")),n=JSON.parse(localStorage.getItem("server")),r=JSON.parse(localStorage.getItem("username")),s=JSON.parse(localStorage.getItem("session"));if(JSON.parse(localStorage.getItem("scrobbling"))&&(store.scrobbling=!0),this.get_federated_servers(),!e||!n||!r){this.ready=!1,localStorage.setItem("init",JSON.stringify(!1));return}if(this.token=e,this.server=n,this.username=r,s&&(await this.check_session(s)).status=="success"){this.ready=!0,this.session=s,localStorage.setItem("init",JSON.stringify(!0));return}await this.connect(this.server,this.username,this.token)}async API(e){return this.ready?await fetch(this.server+"/api"+e+`?session=${this.session}`,{method:"GET",credentials:"include"}).then(r=>r.json()):null}async fAPI(e,n){if(!this.ready)return null;let r=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null,s=await fetch(this.server+`/f/api?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e,query:n,challenge:r}),credentials:"include"}).then(o=>o.json());return s.hasOwnProperty("error")&&s.error=="Federation failed."?(localStorage.removeItem(`@${e}`),this.fAPI(e,n)):(s.hasOwnProperty("challenge")&&localStorage.setItem(`@${e}`,JSON.stringify(s.challenge)),s)}async get_user(e,n=null){let r=localStorage.getItem(`@${n}`)?JSON.parse(localStorage.getItem(`@${n}`)):null;return await fetch(this.server+`/api/user/${e}/basic?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async get_federated_tracks(e,n){let r=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null;return await fetch(this.server+`/f/api/tracks/basic?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n,domain:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async get_federated_albums(e,n){let r=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null;return await fetch(this.server+`/f/api/albums/basic?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n,domain:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async get_federated_artists(e,n){let r=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null;return await fetch(this.server+`/f/api/artists/basic?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n,domain:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async get_federated_playlists(e,n){let r=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null;return await fetch(this.server+`/f/api/playlists/basic?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:n,domain:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async add_friend(e,n=null){let r=localStorage.getItem(`@${n}`)?JSON.parse(localStorage.getItem(`@${n}`)):null;return await fetch(this.server+`/api/friends/add?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async remove_friend(e,n=null){let r=localStorage.getItem(`@${n}`)?JSON.parse(localStorage.getItem(`@${n}`)):null;return await fetch(this.server+`/api/friends/remove?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async create_playlist(e){return await fetch(this.server+`/api/profile/create_playlist?session=${this.session}`,{method:"POST",body:e,credentials:"include"}).then(r=>r.json())}async upload_cover(e){return await fetch(this.server+`/api/cover?session=${this.session}`,{method:"POST",body:e,credentials:"include"}).then(r=>r.json())}async add_comment(e,n,r,s=null,o){return await fetch(this.server+`/api/comments?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,type:n,id:r,uuid:s,comment:o}),credentials:"include"}).then(d=>d.json()).catch(d=>null)}async add_federated_comment(e,n,r,s,o=null,i){let d=localStorage.getItem(`@${e}`)?JSON.parse(localStorage.getItem(`@${e}`)):null,l=await fetch(this.server+`/f/api/comments?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domain:e,challenge:d,username:n,type:r,id:s,uuid:o,comment:i}),credentials:"include"}).then(u=>u.json());return l.hasOwnProperty("error")&&l.error=="Federation failed."?(localStorage.removeItem(`@${e}`),this.add_federated_comment(e,n,r,s,o,i)):(l.hasOwnProperty("challenge")&&localStorage.setItem(`@${e}`,JSON.stringify(l.challenge)),l)}async check_session(e){return await fetch(this.server+`/api/session/check?session=${e}`).then(n=>(localStorage.setItem("offline",JSON.stringify(!1)),n.json())).catch(n=>n.message.startsWith("NetworkError")?(localStorage.setItem("offline",JSON.stringify(!0)),{status:"error",message:"Server is down."}):{status:"error"})}async get_session(e,n,r){let s=btoa(n+":"+r);return await fetch(e+"/api/session",{method:"GET",headers:{Authorization:"Basic "+s}}).then(o=>(localStorage.setItem("offline",JSON.stringify(!1)),o.json())).catch(o=>o.message.startsWith("NetworkError")?(localStorage.setItem("offline",JSON.stringify(!0)),{status:"error",message:"Server is down."}):{status:"error"})}async connect(e,n,r){let s=await this.get_session(e,n,r);return s.status=="success"?(this.ready=!0,this.session=s.session,localStorage.setItem("init",JSON.stringify(!0)),localStorage.setItem("session",JSON.stringify(s.session)),localStorage.setItem("server",JSON.stringify(e)),localStorage.setItem("username",JSON.stringify(n)),localStorage.setItem("token",JSON.stringify(r)),localStorage.setItem("volume",JSON.stringify("1")),localStorage.setItem("groupSession",JSON.stringify([])),localStorage.setItem("groupSessionID",JSON.stringify("")),!0):(s.status=="error"&&(this.ready=!1,localStorage.setItem("init",JSON.stringify(!1))),!1)}get_cover(e){return e?e.startsWith("http")?e:ft.server+"/"+e:"/images/track.svg"}async load_station(e){store.playing.type="station",store.playing.id=e.guide_id,store.playing.title=e.text,store.playing.cover=e.image,store.playing.loaded=!0,navigator.mediaSession.metadata=new MediaMetadata({title:e.text,artwork:[{src:store.playing.cover,sizes:"250x250",type:"image/jpeg"}]});let n=await this.API(`/station/${e.guide_id}/url`);!n||!n.url||(this.player.unload(),this.player._src=[n.url],this.player.load(),document.title=e.text)}async load_track(e){store.playing.id=e.id,store.playing.type=e.type,store.playing.title=e.title,store.playing.cover=e.cover,store.playing.album=e.album,store.playing.artist=e.artist,store.playing.server=null,store.playing.loaded=!0;let n=this.get_cover(store.playing.cover);navigator.mediaSession.metadata=new MediaMetadata({title:store.playing.title,artwork:[{src:n,sizes:"250x250",type:"image/png"}]}),this.player.unload(),this.player._src=[ft.server+"/api/stream/"+e.id+`?session=${this.session}`],this.player.load(),document.title=e.title}async load_federated_track(e){store.playing.id=e.id,store.playing.type=e.type,store.playing.title=e.title,store.playing.cover=e.cover,store.playing.album=e.album,store.playing.artist=e.artist,store.playing.server=e.server,store.playing.loaded=!0;let n=this.get_cover(store.playing.cover);navigator.mediaSession.metadata=new MediaMetadata({title:store.playing.title,artwork:[{src:n,sizes:"250x250",type:"image/png"}]});let r=await fetch(`https://raw.githubusercontent.com/kaangiray26/forte/servers/hostnames/${e.server}`).then(o=>o.json()).then(o=>o.address).catch(()=>null);if(!r)return;let s=JSON.parse(localStorage.getItem(`@${e.server}`));this.player.unload(),this.player._src=[`${r}/f/api/stream/${e.id}?challenge=${s}`],this.player.load(),document.title=e.title}async track_loaded(){store.playing.duration=this.player.duration(),this.player.play(),store.playing.is_playing=!0}async listen_progress(){this.player._sounds[0]._node.addEventListener("timeupdate",()=>{store.playing.seek=ft.player.seek(),store.playing.progress=store.playing.seek/store.playing.duration*100})}async track_quality(){if(store.playing.type=="station"){store.playing.format="audio/mpeg",store.playing.bitrate=128,store.playing.quality="LQ";return}let e=await fetch(this.server+`/api/stream/${store.playing.id}?session=${this.session}`,{method:"HEAD",credentials:"include"}),n=e.headers.get("content-length"),r=store.playing.duration,s=n*8/1e3;if(store.playing.format=e.headers.get("content-type"),store.playing.bitrate=Math.round(s/r),store.playing.bitrate<=160){store.playing.quality="LQ";return}if(store.playing.bitrate<=320){store.playing.quality="SQ";return}if(store.playing.bitrate<=1411){store.playing.quality="HQ";return}store.playing.quality="Hi-Res"}async track_lyrics(){store.playing.type!="station"&&window.dispatchEvent(new CustomEvent("lyrics"))}async track_finished(){if(store.playing.type=="station"){store.queue_index=0,this.player._sounds[0]._node.pause(),store.playing.is_playing=!1,navigator.mediaSession.playbackState="paused",store.queue.length&&(store.queue[0].server?this.load_federated_track(store.queue[0]):this.load_track(store.queue[0]));return}let e=this.getCurrentQueue(),n=e[store.queue_index];if(!!n){if(n.server?(this.addTrackToHistory(`${n.id}@${n.server}`,n.server),this.scrobble(`${n.id}@${n.server}`)):(this.addTrackToHistory(n.id),this.scrobble(n.id)),store.queue_index+1==e.length){if(store.playing.repeat==1){store.queue_index=0,e[0].server?this.load_federated_track(e[0]):this.load_track(e[0]);return}if(store.playing.repeat==2){e[store.queue_index].server?this.load_federated_track(e[store.queue_index]):this.load_track(e[store.queue_index]);return}if(this.inGroupSession()){store.queue_index=0,this.player._sounds[0]._node.pause(),store.playing.is_playing=!1,navigator.mediaSession.playbackState="paused";return}this.API("/random/track").then(r=>{this.load_track(r.track),this.addToQueue([r.track]),store.queue_index+=1});return}if(store.playing.repeat==2){e[store.queue_index].server?this.load_federated_track(e[store.queue_index]):this.load_track(e[store.queue_index]);return}store.queue_index+=1,e[store.queue_index].server?this.load_federated_track(e[store.queue_index]):this.load_track(e[store.queue_index])}}async mute(){store.playing.muted=!store.playing.muted,ft.player.mute(store.playing.muted)}async repeat(){store.playing.repeat=(store.playing.repeat+1)%3}async play(){if(!!store.playing.loaded){if(store.playing.is_playing){this.player._sounds[0]._node.pause(),store.playing.is_playing=!1,navigator.mediaSession.playbackState="paused";return}this.player._sounds[0]._node.play(),store.playing.is_playing=!0,navigator.mediaSession.playbackState="playing"}}async play_previous(){if(!store.playing.loaded)return;if(store.queue_index==0){this.seek(0);return}store.queue_index-=1;let e=this.getCurrentQueue();this.load_track(e[store.queue_index])}async play_next(){!store.playing.loaded||this.track_finished()}async addToQueueStart(e){let n=this.getCurrentQueue();n.unshift(...e),this.setCurrentQueue(n)}async addToQueueNext(e){let n=this.getCurrentQueue();n.splice(store.queue_index+1,0,...e),this.setCurrentQueue(n)}async addToQueue(e){let n=this.getCurrentQueue();n.push(...e),this.setCurrentQueue(n)}async addTrackToPlaylist(e,n,r=null){let s=localStorage.getItem(`@${r}`)?JSON.parse(localStorage.getItem(`@${r}`)):null;return await fetch(this.server+`/api/playlist/${n}/add_track?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({track:e,challenge:s}),credentials:"include"}).then(i=>i.json())}async addTrackToHistory(e,n=null){let r=localStorage.getItem(`@${n}`)?JSON.parse(localStorage.getItem(`@${n}`)):null;return await fetch(this.server+`/api/profile/history/add?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({track:e,challenge:r}),credentials:"include"}).then(o=>o.json())}async scrobble(e,n=null){if(!store.scrobbling)return;let r=JSON.parse(localStorage.getItem("lastfm_key"));if(!r)return;let s=n?JSON.parse(localStorage.getItem(`@${n}`)):null;return await fetch(this.server+`/api/lastfm/scrobble?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({track:e,sk:r,challenge:s}),credentials:"include"}).then(i=>i.json())}async playStation(e){store.queue_index=0,this.load_station(e)}async playTrack(e,n=null){if(n){this.fAPI(n,`/track/${e}/basic`).then(r=>{store.queue_index=0,r.track.server=n,this.load_federated_track(r.track),this.addToQueueStart([r.track])});return}this.API(`/track/${e}/basic`).then(r=>{store.queue_index=0,this.load_track(r.track),this.addToQueueStart([r.track])})}async playTrackNext(e,n=null){if(n){this.fAPI(n,`/track/${e}/basic`).then(r=>{r.track.server=n,this.addToQueueNext([r.track])});return}this.API(`/track/${e}/basic`).then(r=>{this.addToQueueNext([r.track])})}async playAlbum(e,n=null){if(n){this.fAPI(n,`/album/${e}/tracks`).then(r=>{store.queue_index=0;let s=r.tracks;s.map(o=>o.server=n),s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.load_federated_track(s[0]),this.addToQueueStart(s)});return}this.API(`/album/${e}/tracks`).then(r=>{store.queue_index=0;let s=r.tracks;s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.load_track(s[0]),this.addToQueueStart(s)})}async playAlbumNext(e,n=null){if(n){this.fAPI(n,`/album/${e}/tracks`).then(r=>{let s=r.tracks;s.map(o=>o.server=n),s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.addToQueueNext(s)});return}this.API(`/album/${e}/tracks`).then(r=>{let s=r.tracks;s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.addToQueueNext(s)})}async playPlaylist(e,n=null){if(n){this.fAPI(n,`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;r.tracks.map(o=>o.server=n);let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);store.queue_index=0,this.load_federated_track(s[0]),this.addToQueueStart(s)});return}this.API(`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);store.queue_index=0,s[0].server?this.load_track(s[0]):this.load_federated_track(s[0]),this.addToQueueStart(s)})}async get_playlist_tracks(e,n,r){let s=[],o={};for(let i=0;i<e.length;i++)s.push({});for(let i of r){let[d,l]=i.split("@");o[l]||(o[l]=[]),o[l].push(parseInt(d))}for(let i in o){let d=await this.get_federated_tracks(i,o[i]);if(!d)return;d.tracks.map(l=>l.server=i);for(let l=0;l<e.length;l++){let u=e[l],_=d.tracks.filter(a=>`${a.id}@${a.server}`==u);_.length&&(s[l]=_[0])}}for(let i=0;i<e.length;i++){let d=e[i],l=n.filter(u=>u.id==d);l.length&&(s[i]=l[0])}return s}async playPlaylistNext(e,n=null){if(n){this.fAPI(n,`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;r.tracks.map(o=>o.server=n);let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);this.addToQueueNext(s)});return}this.API(`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);this.addToQueueNext(s)})}async queueTrack(e,n=null){if(n){this.fAPI(n,`/track/${e}/basic`).then(r=>{r.track.server=n,this.addToQueue([r.track])});return}this.API(`/track/${e}/basic`).then(r=>{this.addToQueue([r.track])})}async queueAlbum(e,n=null){if(n){this.fAPI(n,`/album/${e}/tracks`).then(r=>{let s=r.tracks;s.map(o=>o.server=n),s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.addToQueue(s)});return}this.API(`/album/${e}/tracks`).then(r=>{let s=r.tracks;s.sort((o,i)=>o.track_position-i.track_position),s.sort((o,i)=>o.disc_number-i.disc_number),this.addToQueue(s)})}async queuePlaylist(e,n=null){if(n){this.fAPI(n,`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;r.tracks.map(o=>o.server=n);let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);this.addToQueue(s)});return}this.API(`/playlist/${e}/tracks`).then(async r=>{if(!r.playlist.tracks.length)return;let s=await this.get_playlist_tracks(r.playlist.tracks,r.tracks,r.federated);this.addToQueue(s)})}async removeQueueTrack(e){let n=this.getCurrentQueue();n.splice(e,1),this.setCurrentQueue(n)}async downloadTrack(e,n=null){if(!this.ready)return null;if(n){let s=await fetch(`https://raw.githubusercontent.com/kaangiray26/forte/servers/hostnames/${n}`).then(d=>d.json()).then(d=>d.address).catch(()=>null);if(!s)return;let o=JSON.parse(localStorage.getItem(`@${n}`));return await fetch(s+"/f/api/stream/"+e+`?session=${o}`,{method:"GET",credentials:"include"}).then(d=>d.blob())}return await fetch(this.server+"/api/stream/"+e+`?session=${this.session}`,{method:"GET",credentials:"include"}).then(s=>s.blob())}async deletePlaylist(e){return await fetch(this.server+`/api/playlist/${e}/delete?session=${this.session}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(r=>r.json())}async deleteTrackFromPlaylist(e,n){return await fetch(this.server+`/api/playlist/${e}/delete_track?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:n}),credentials:"include"}).then(s=>s.json())}async love(e,n,r=null){let s=localStorage.getItem(`@${r}`)?JSON.parse(localStorage.getItem(`@${r}`)):null;return await fetch(this.server+`/api/${e}/love?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,challenge:s}),credentials:"include"}).then(i=>i.json())}async unlove(e,n,r=null){let s=localStorage.getItem(`@${r}`)?JSON.parse(localStorage.getItem(`@${r}`)):null;return await fetch(this.server+`/api/${e}/unlove?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n,challenge:s}),credentials:"include"}).then(i=>i.json())}async lyrics(e,n,r=null){let s=localStorage.getItem(`@${r}`)?JSON.parse(localStorage.getItem(`@${r}`)):null;return await fetch(this.server+`/api/lyrics?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({artist:e,title:n,challenge:s}),credentials:"include"}).then(i=>i.json())}async lastfm_artist_page(e){return await fetch(this.server+`/api/lastfm/artist?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({artist:e}),credentials:"include"}).then(r=>r.json())}async radio(){if(this.inGroupSession()){window.dispatchEvent(new CustomEvent("notify",{detail:{title:"You can't use radio while in a group session."}}));return}if(store.playing.radio=!store.playing.radio,!store.playing.radio)return;this.getCurrentQueue().length==0&&this.API("/random/track").then(n=>{this.load_track(n.track),this.addToQueue([n.track])})}async seek(e){this.player._sounds[0]._node.currentTime=e}getCurrentQueue(){let e=store.peer_status=="connected"?"group_queue":"queue";return store[e]}inGroupSession(){return store.peer_status=="connected"}getStore(){return store}setCurrentQueue(e){let n=store.peer_status=="connected"?"group_queue":"queue";store[n]=e}reset(){store.playing.is_playing=!1,store.playing.loaded=!1,store.playing.seek=0,store.playing.progress=0,this.player.unload()}async lastfm_auth(e){return await fetch(this.server+`/api/lastfm/auth?session=${this.session}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e}),credentials:"include"}).then(r=>r.json())}async get_address(e){return await fetch(`https://raw.githubusercontent.com/kaangiray26/forte/servers/hostnames/${e}`).then(n=>n.json()).then(n=>n.address).catch(()=>null)}async get_federated_servers(){let e=await fetch("https://api.github.com/repos/kaangiray26/forte/git/trees/servers").then(r=>r.json()).then(r=>r.tree).then(r=>r.filter(s=>s.path=="hostnames")).then(r=>r[0].url).catch(()=>null);if(!e){localStorage.setItem("federated_servers",JSON.stringify([]));return}let n=await fetch(e).then(r=>r.json()).then(r=>r.tree).then(r=>r.map(s=>s.path)).catch(()=>[]);localStorage.setItem("federated_servers",JSON.stringify(n))}}async function right_click(t){window.dispatchEvent(new CustomEvent("right_click",{detail:t}))}async function notify(t){window.dispatchEvent(new CustomEvent("notify",{detail:t}))}async function refresh_queue(t){window.dispatchEvent(new CustomEvent("queue",{detail:t}))}async function reaction(t){window.dispatchEvent(new CustomEvent("reaction",{detail:t}))}async function group_key(t){window.dispatchEvent(new CustomEvent("group_key",{detail:t}))}async function notify_peer(t){store.peer_status=="connected"&&window.dispatchEvent(new CustomEvent("peer",{detail:t}))}async function notify_message(t){window.dispatchEvent(new CustomEvent("message",{detail:t}))}async function action(t){if(store.func_stack.push(t.func),notify_peer({type:"execute",object:t.object,operation:t.operation}),store.peer_status!="connected"){store.func_stack.pop()();return}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,e){const n={};for(const r in e){const s=e[r];n[r]=isArray(s)?s.map(t):t(s)}return n}const noop$1=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,n="/"){let r,s={},o="",i="";const d=e.indexOf("#");let l=e.indexOf("?");return d<l&&d>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,d>-1?d:e.length),s=t(o)),d>-1&&(r=r||e.slice(0,d),i=e.slice(d,e.length)),r=resolveRelativePath(r!=null?r:e,n),{fullPath:r+(o&&"?")+o+i,path:r,query:s,hash:i}}function stringifyURL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&isSameRouteRecord(e.matched[r],n.matched[s])&&isSameRouteLocationParams(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!isSameRouteLocationParamsValue(t[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray(t)?isEquivalentArray(t,e):isArray(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let s=n.length-1,o,i;for(o=0;o<r.length;o++)if(i=r[o],i!==".")if(i==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=getElementPosition(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let d=s.includes(t.slice(o))?t.slice(o).length:1,l=s.slice(d);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(n,t)+r+s}function useHistoryListeners(t,e,n,r){let s=[],o=[],i=null;const d=({state:c})=>{const f=createCurrentLocation(t,location),m=n.value,v=e.value;let g=0;if(c){if(n.value=f,e.value=c,i&&i===m){i=null;return}g=v?c.position-v.position:0}else r(f);s.forEach(y=>{y(n.value,m,{delta:g,type:NavigationType.pop,direction:g?g>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){i=n.value}function u(c){s.push(c);const f=()=>{const m=s.indexOf(c);m>-1&&s.splice(m,1)};return o.push(f),f}function _(){const{history:c}=window;!c.state||c.replaceState(assign({},c.state,{scroll:computeScrollPosition()}),"")}function a(){for(const c of o)c();o=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",_)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",_),{pauseListeners:l,listen:u,destroy:a}}function buildState(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:n}=window,r={value:createCurrentLocation(t,n)},s={value:e.state};s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,u,_){const a=t.indexOf("#"),c=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+l:createBaseLocation()+t+l;try{e[_?"replaceState":"pushState"](u,"",c),s.value=u}catch(f){console.error(f),n[_?"replace":"assign"](c)}}function i(l,u){const _=assign({},e.state,buildState(s.value.back,l,s.value.forward,!0),u,{position:s.value.position});o(l,_,!0),r.value=l}function d(l,u){const _=assign({},s.value,e.state,{forward:l,scroll:computeScrollPosition()});o(_.current,_,!0);const a=assign({},buildState(r.value,l,null),{position:_.position+1},u);o(l,a,!1),r.value=l}return{location:r,state:s,push:d,replace:i}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),n=useHistoryListeners(t,e.state,e.location,e.replace);function r(o,i=!0){i||n.pauseListeners(),history.go(o)}const s=assign({location:"",base:t,go:r,createHref:createHref.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),r=[];let s=n.start?"^":"";const o=[];for(const u of t){const _=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let a=0;a<u.length;a++){const c=u[a];let f=40+(n.sensitive?.25:0);if(c.type===0)a||(s+="/"),s+=c.value.replace(REGEX_CHARS_RE,"\\$&"),f+=40;else if(c.type===1){const{value:m,repeatable:v,optional:g,regexp:y}=c;o.push({name:m,repeatable:v,optional:g});const b=y||BASE_PARAM_PATTERN;if(b!==BASE_PARAM_PATTERN){f+=10;try{new RegExp(`(${b})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+x.message)}}let N=v?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;a||(N=g&&u.length<2?`(?:/${N})`:"/"+N),g&&(N+="?"),s+=N,f+=20,g&&(f+=-8),v&&(f+=-20),b===".*"&&(f+=-50)}_.push(f)}r.push(_)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function d(u){const _=u.match(i),a={};if(!_)return null;for(let c=1;c<_.length;c++){const f=_[c]||"",m=o[c-1];a[m.name]=f&&m.repeatable?f.split("/"):f}return a}function l(u){let _="",a=!1;for(const c of t){(!a||!_.endsWith("/"))&&(_+="/"),a=!1;for(const f of c)if(f.type===0)_+=f.value;else if(f.type===1){const{value:m,repeatable:v,optional:g}=f,y=m in u?u[m]:"";if(isArray(y)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=isArray(y)?y.join("/"):y;if(!b)if(g)c.length<2&&(_.endsWith("/")?_=_.slice(0,-1):a=!0);else throw new Error(`Missing required param "${m}"`);_+=b}}return _||"/"}return{re:i,score:r,keys:o,parse:d,stringify:l}}function compareScoreArray(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const o=compareScoreArray(r[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-r.length)===1){if(isLastScoreNegative(r))return 1;if(isLastScoreNegative(s))return-1}return s.length-r.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${u}": ${f}`)}let n=0,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let d=0,l,u="",_="";function a(){!u||(n===0?o.push({type:0,value:u}):n===1||n===2||n===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:_,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function c(){u+=l}for(;d<t.length;){if(l=t[d++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&a(),i()):l===":"?(a(),n=1):c();break;case 4:c(),n=r;break;case 1:l==="("?n=2:VALID_PARAM_RE.test(l)?c():(a(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&d--);break;case 2:l===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+l:n=3:_+=l;break;case 3:a(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&d--,_="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),a(),i(),s}function createRouteRecordMatcher(t,e,n){const r=tokensToParser(tokenizePath(t.path),n),s=assign(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(t,e){const n=[],r=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(_){return r.get(_)}function o(_,a,c){const f=!c,m=normalizeRouteRecord(_);m.aliasOf=c&&c.record;const v=mergeOptions(e,_),g=[m];if("alias"in _){const N=typeof _.alias=="string"?[_.alias]:_.alias;for(const x of N)g.push(assign({},m,{components:c?c.record.components:m.components,path:x,aliasOf:c?c.record:m}))}let y,b;for(const N of g){const{path:x}=N;if(a&&x[0]!=="/"){const A=a.record.path,L=A[A.length-1]==="/"?"":"/";N.path=a.record.path+(x&&L+x)}if(y=createRouteRecordMatcher(N,a,v),c?c.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),f&&_.name&&!isAliasRecord(y)&&i(_.name)),m.children){const A=m.children;for(let L=0;L<A.length;L++)o(A[L],y,c&&c.children[L])}c=c||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return b?()=>{i(b)}:noop$1}function i(_){if(isRouteName(_)){const a=r.get(_);a&&(r.delete(_),n.splice(n.indexOf(a),1),a.children.forEach(i),a.alias.forEach(i))}else{const a=n.indexOf(_);a>-1&&(n.splice(a,1),_.record.name&&r.delete(_.record.name),_.children.forEach(i),_.alias.forEach(i))}}function d(){return n}function l(_){let a=0;for(;a<n.length&&comparePathParserScore(_,n[a])>=0&&(_.record.path!==n[a].record.path||!isRecordChildOf(_,n[a]));)a++;n.splice(a,0,_),_.record.name&&!isAliasRecord(_)&&r.set(_.record.name,_)}function u(_,a){let c,f={},m,v;if("name"in _&&_.name){if(c=r.get(_.name),!c)throw createRouterError(1,{location:_});v=c.record.name,f=assign(paramsFromLocation(a.params,c.keys.filter(b=>!b.optional).map(b=>b.name)),_.params&&paramsFromLocation(_.params,c.keys.map(b=>b.name))),m=c.stringify(f)}else if("path"in _)m=_.path,c=n.find(b=>b.re.test(m)),c&&(f=c.parse(m),v=c.record.name);else{if(c=a.name?r.get(a.name):n.find(b=>b.re.test(a.path)),!c)throw createRouterError(1,{location:_,currentLocation:a});v=c.record.name,f=assign({},a.params,_.params),m=c.stringify(f)}const g=[];let y=c;for(;y;)g.unshift(y.record),y=y.parent;return{name:v,path:m,params:f,matched:g,meta:mergeMetaFields(g)}}return t.forEach(_=>o(_)),{addRoute:o,resolve:u,removeRoute:i,getRoutes:d,getRecordMatcher:s}}function paramsFromLocation(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function isRecordChildOf(t,e){return e.children.some(n=>n===t||isRecordChildOf(t,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const o=r[s].replace(PLUS_RE," "),i=o.indexOf("="),d=decode(i<0?o:o.slice(0,i)),l=i<0?null:decode(o.slice(i+1));if(d in e){let u=e[d];isArray(u)||(u=e[d]=[u]),u.push(l)}else e[d]=l}return e}function stringifyQuery(t){let e="";for(let n in t){const r=t[n];if(n=encodeQueryKey(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray(r)?r.map(o=>o&&encodeQueryValue(o)):[r&&encodeQueryValue(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function normalizeQuery(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=isArray(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function guardToPromiseFn(t,e,n,r,s){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((i,d)=>{const l=a=>{a===!1?d(createRouterError(4,{from:n,to:e})):a instanceof Error?d(a):isRouteLocation(a)?d(createRouterError(2,{from:e,to:a})):(o&&r.enterCallbacks[s]===o&&typeof a=="function"&&o.push(a),i())},u=t.call(r&&r.instances[s],e,n,l);let _=Promise.resolve(u);t.length<3&&(_=_.then(l)),_.catch(a=>d(a))})}function extractComponentsGuards(t,e,n,r){const s=[];for(const o of t)for(const i in o.components){let d=o.components[i];if(!(e!=="beforeRouteEnter"&&!o.instances[i]))if(isRouteComponent(d)){const u=(d.__vccOpts||d)[e];u&&s.push(guardToPromiseFn(u,n,r,o,i))}else{let l=d();s.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${o.path}"`));const _=isESModule(u)?u.default:u;o.components[i]=_;const c=(_.__vccOpts||_)[e];return c&&guardToPromiseFn(c,n,r,o,i)()}))}}return s}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject(routerKey),n=inject(routeLocationKey),r=computed(()=>e.resolve(unref(t.to))),s=computed(()=>{const{matched:l}=r.value,{length:u}=l,_=l[u-1],a=n.matched;if(!_||!a.length)return-1;const c=a.findIndex(isSameRouteRecord.bind(null,_));if(c>-1)return c;const f=getOriginalPath(l[u-2]);return u>1&&getOriginalPath(_)===f&&a[a.length-1].path!==f?a.findIndex(isSameRouteRecord.bind(null,l[u-2])):c}),o=computed(()=>s.value>-1&&includesParams(n.params,r.value.params)),i=computed(()=>s.value>-1&&s.value===n.matched.length-1&&isSameRouteLocationParams(n.params,r.value.params));function d(l={}){return guardEvent(l)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop$1):Promise.resolve()}return{route:r,href:computed(()=>r.value.href),isActive:o,isExactActive:i,navigate:d}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const n=reactive(useLink(t)),{options:r}=inject(routerKey),s=computed(()=>({[getLinkClass(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&e.default(n);return t.custom?o:h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!isArray(s)||s.length!==r.length||r.some((o,i)=>o!==s[i]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,n)=>t!=null?t:e!=null?e:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=inject(routerViewLocationKey),s=computed(()=>t.route||r.value),o=inject(viewDepthKey,0),i=computed(()=>{let u=unref(o);const{matched:_}=s.value;let a;for(;(a=_[u])&&!a.components;)u++;return u}),d=computed(()=>s.value.matched[i.value]);provide(viewDepthKey,computed(()=>i.value+1)),provide(matchedRouteKey,d),provide(routerViewLocationKey,s);const l=ref();return watch(()=>[l.value,d.value,t.name],([u,_,a],[c,f,m])=>{_&&(_.instances[a]=u,f&&f!==_&&u&&u===c&&(_.leaveGuards.size||(_.leaveGuards=f.leaveGuards),_.updateGuards.size||(_.updateGuards=f.updateGuards))),u&&_&&(!f||!isSameRouteRecord(_,f)||!c)&&(_.enterCallbacks[a]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=s.value,_=t.name,a=d.value,c=a&&a.components[_];if(!c)return normalizeSlot(n.default,{Component:c,route:u});const f=a.props[_],m=f?f===!0?u.params:typeof f=="function"?f(u):f:null,g=h(c,assign({},m,e,{onVnodeUnmounted:y=>{y.component.isUnmounted&&(a.instances[_]=null)},ref:l}));return normalizeSlot(n.default,{Component:g,route:u})||g}}});function normalizeSlot(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),n=t.parseQuery||parseQuery,r=t.stringifyQuery||stringifyQuery,s=t.history,o=useCallbacks(),i=useCallbacks(),d=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let u=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=applyToParams.bind(null,R=>""+R),a=applyToParams.bind(null,encodeParam),c=applyToParams.bind(null,decode);function f(R,Q){let Y,te;return isRouteName(R)?(Y=e.getRecordMatcher(R),te=Q):te=R,e.addRoute(te,Y)}function m(R){const Q=e.getRecordMatcher(R);Q&&e.removeRoute(Q)}function v(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function y(R,Q){if(Q=assign({},Q||l.value),typeof R=="string"){const T=parseURL(n,R,Q.path),S=e.resolve({path:T.path},Q),B=s.createHref(T.fullPath);return assign(T,S,{params:c(S.params),hash:decode(T.hash),redirectedFrom:void 0,href:B})}let Y;if("path"in R)Y=assign({},R,{path:parseURL(n,R.path,Q.path).path});else{const T=assign({},R.params);for(const S in T)T[S]==null&&delete T[S];Y=assign({},R,{params:a(R.params)}),Q.params=a(Q.params)}const te=e.resolve(Y,Q),ee=R.hash||"";te.params=_(c(te.params));const ue=stringifyURL(r,assign({},R,{hash:encodeHash(ee),path:te.path})),ce=s.createHref(ue);return assign({fullPath:ue,hash:ee,query:r===stringifyQuery?normalizeQuery(R.query):R.query||{}},te,{redirectedFrom:void 0,href:ce})}function b(R){return typeof R=="string"?parseURL(n,R,l.value.path):assign({},R)}function N(R,Q){if(u!==R)return createRouterError(8,{from:Q,to:R})}function x(R){return V(R)}function A(R){return x(assign(b(R),{replace:!0}))}function L(R){const Q=R.matched[R.matched.length-1];if(Q&&Q.redirect){const{redirect:Y}=Q;let te=typeof Y=="function"?Y(R):Y;return typeof te=="string"&&(te=te.includes("?")||te.includes("#")?te=b(te):{path:te},te.params={}),assign({query:R.query,hash:R.hash,params:"path"in te?{}:R.params},te)}}function V(R,Q){const Y=u=y(R),te=l.value,ee=R.state,ue=R.force,ce=R.replace===!0,T=L(Y);if(T)return V(assign(b(T),{state:typeof T=="object"?assign({},ee,T.state):ee,force:ue,replace:ce}),Q||Y);const S=Y;S.redirectedFrom=Q;let B;return!ue&&isSameRouteLocation(r,te,Y)&&(B=createRouterError(16,{to:S,from:te}),z(te,te,!0,!1)),(B?Promise.resolve(B):j(S,te)).catch(O=>isNavigationFailure(O)?isNavigationFailure(O,2)?O:X(O):C(O,S,te)).then(O=>{if(O){if(isNavigationFailure(O,2))return V(assign({replace:ce},b(O.to),{state:typeof O.to=="object"?assign({},ee,O.to.state):ee,force:ue}),Q||S)}else O=ae(S,te,!0,ce,ee);return H(S,te,O),O})}function P(R,Q){const Y=N(R,Q);return Y?Promise.reject(Y):Promise.resolve()}function j(R,Q){let Y;const[te,ee,ue]=extractChangingRecords(R,Q);Y=extractComponentsGuards(te.reverse(),"beforeRouteLeave",R,Q);for(const T of te)T.leaveGuards.forEach(S=>{Y.push(guardToPromiseFn(S,R,Q))});const ce=P.bind(null,R,Q);return Y.push(ce),runGuardQueue(Y).then(()=>{Y=[];for(const T of o.list())Y.push(guardToPromiseFn(T,R,Q));return Y.push(ce),runGuardQueue(Y)}).then(()=>{Y=extractComponentsGuards(ee,"beforeRouteUpdate",R,Q);for(const T of ee)T.updateGuards.forEach(S=>{Y.push(guardToPromiseFn(S,R,Q))});return Y.push(ce),runGuardQueue(Y)}).then(()=>{Y=[];for(const T of R.matched)if(T.beforeEnter&&!Q.matched.includes(T))if(isArray(T.beforeEnter))for(const S of T.beforeEnter)Y.push(guardToPromiseFn(S,R,Q));else Y.push(guardToPromiseFn(T.beforeEnter,R,Q));return Y.push(ce),runGuardQueue(Y)}).then(()=>(R.matched.forEach(T=>T.enterCallbacks={}),Y=extractComponentsGuards(ue,"beforeRouteEnter",R,Q),Y.push(ce),runGuardQueue(Y))).then(()=>{Y=[];for(const T of i.list())Y.push(guardToPromiseFn(T,R,Q));return Y.push(ce),runGuardQueue(Y)}).catch(T=>isNavigationFailure(T,8)?T:Promise.reject(T))}function H(R,Q,Y){for(const te of d.list())te(R,Q,Y)}function ae(R,Q,Y,te,ee){const ue=N(R,Q);if(ue)return ue;const ce=Q===START_LOCATION_NORMALIZED,T=isBrowser?history.state:{};Y&&(te||ce?s.replace(R.fullPath,assign({scroll:ce&&T&&T.scroll},ee)):s.push(R.fullPath,ee)),l.value=R,z(R,Q,Y,ce),X()}let ie;function le(){ie||(ie=s.listen((R,Q,Y)=>{if(!ge.listening)return;const te=y(R),ee=L(te);if(ee){V(assign(ee,{replace:!0}),te).catch(noop$1);return}u=te;const ue=l.value;isBrowser&&saveScrollPosition(getScrollKey(ue.fullPath,Y.delta),computeScrollPosition()),j(te,ue).catch(ce=>isNavigationFailure(ce,12)?ce:isNavigationFailure(ce,2)?(V(ce.to,te).then(T=>{isNavigationFailure(T,20)&&!Y.delta&&Y.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop$1),Promise.reject()):(Y.delta&&s.go(-Y.delta,!1),C(ce,te,ue))).then(ce=>{ce=ce||ae(te,ue,!1),ce&&(Y.delta&&!isNavigationFailure(ce,8)?s.go(-Y.delta,!1):Y.type===NavigationType.pop&&isNavigationFailure(ce,20)&&s.go(-1,!1)),H(te,ue,ce)}).catch(noop$1)}))}let J=useCallbacks(),F=useCallbacks(),G;function C(R,Q,Y){X(R);const te=F.list();return te.length?te.forEach(ee=>ee(R,Q,Y)):console.error(R),Promise.reject(R)}function D(){return G&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((R,Q)=>{J.add([R,Q])})}function X(R){return G||(G=!R,le(),J.list().forEach(([Q,Y])=>R?Y(R):Q()),J.reset()),R}function z(R,Q,Y,te){const{scrollBehavior:ee}=t;if(!isBrowser||!ee)return Promise.resolve();const ue=!Y&&getSavedScrollPosition(getScrollKey(R.fullPath,0))||(te||!Y)&&history.state&&history.state.scroll||null;return nextTick().then(()=>ee(R,Q,ue)).then(ce=>ce&&scrollToPosition(ce)).catch(ce=>C(ce,R,Q))}const pe=R=>s.go(R);let _e;const be=new Set,ge={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:g,getRoutes:v,resolve:y,options:t,push:x,replace:A,go:pe,back:()=>pe(-1),forward:()=>pe(1),beforeEach:o.add,beforeResolve:i.add,afterEach:d.add,onError:F.add,isReady:D,install(R){const Q=this;R.component("RouterLink",RouterLink),R.component("RouterView",RouterView),R.config.globalProperties.$router=Q,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!_e&&l.value===START_LOCATION_NORMALIZED&&(_e=!0,x(s.location).catch(ee=>{}));const Y={};for(const ee in START_LOCATION_NORMALIZED)Y[ee]=computed(()=>l.value[ee]);R.provide(routerKey,Q),R.provide(routeLocationKey,reactive(Y)),R.provide(routerViewLocationKey,l);const te=R.unmount;be.add(R),R.unmount=function(){be.delete(R),be.size<1&&(u=START_LOCATION_NORMALIZED,ie&&ie(),ie=null,l.value=START_LOCATION_NORMALIZED,_e=!1,G=!1),te()}}};return ge}function runGuardQueue(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function extractChangingRecords(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const d=e.matched[i];d&&(t.matched.find(u=>isSameRouteRecord(u,d))?r.push(d):n.push(d));const l=t.matched[i];l&&(e.matched.find(u=>isSameRouteRecord(u,l))||s.push(l))}return[n,r,s]}function useRouter(){return inject(routerKey)}const _hoisted_1$W={class:"card mx-3 mt-3 rounded-0 border-0 hide-on-mobile"},_hoisted_2$W={class:"card-body p-3"},_hoisted_3$V={class:"d-flex flex-column"},_hoisted_4$T={class:"d-inline-flex input-group flex-nowrap"},_hoisted_5$S=["onKeyup"],_sfc_main$$={__name:"NavBar",setup(t,{expose:e}){const n=useRouter(),r=ref(null);function s(l,u=200){let _;return(...a)=>{clearTimeout(_),_=setTimeout(()=>{l.apply(this,a)},u)}}async function o(){r.value.focus()}async function i(){let l=r.value.value;if(!l.length){r.value.focus();return}n.push("/search/"+l)}const d=s(async l=>{l.preventDefault();let u=r.value.value;if(!u.length){r.value.focus();return}n.push("/search/"+u)});return e({focus_search:o}),(l,u)=>(openBlock(),createElementBlock("nav",_hoisted_1$W,[createBaseVNode("div",_hoisted_2$W,[createBaseVNode("div",_hoisted_3$V,[createBaseVNode("div",_hoisted_4$T,[createBaseVNode("input",{ref_key:"search_field",ref:r,type:"text",class:"form-control search-card-input",placeholder:"Search","aria-label":"Search",onInput:u[0]||(u[0]=(..._)=>unref(d)&&unref(d)(..._)),onKeyup:withKeys(i,["enter"])},null,40,_hoisted_5$S)])])])]))}},_imports_0$3="/images/favicon.svg",_imports_1="/images/favicon_dark.svg",_hoisted_1$V={class:"d-flex flex-column flex-shrink-1 p-2"},_hoisted_2$V={class:"d-flex justify-content-center"},_hoisted_3$U={class:"d-flex align-items-center"},_hoisted_4$S={class:"me-1"},_hoisted_5$R={key:0,src:_imports_0$3,width:"32",height:"32"},_hoisted_6$M={key:1,src:_imports_1,width:"32",height:"32"},_hoisted_7$I=createBaseVNode("div",null,[createBaseVNode("h3",{class:"side-bar-text fw-bold m-0"},"Forte")],-1),_hoisted_8$E={class:"nav nav-pills flex-column"},_hoisted_9$E={class:"nav-item mb-2"},_hoisted_10$D=createBaseVNode("span",{class:"fs-5"},"Home",-1),_hoisted_11$A={class:"nav-item mb-2"},_hoisted_12$x=createBaseVNode("span",{class:"fs-5"},"Artists",-1),_hoisted_13$w={class:"nav-item mb-2"},_hoisted_14$v=createBaseVNode("span",{class:"fs-5"},"Albums",-1),_hoisted_15$r={class:"nav-item mb-2"},_hoisted_16$q=createBaseVNode("span",{class:"fs-5"},"Playlists",-1),_hoisted_17$q={class:"nav-item"},_hoisted_18$p=createBaseVNode("span",{class:"fs-5 bi bi-person-circle me-1"},null,-1),_hoisted_19$m=createBaseVNode("span",{class:"fs-5"},"Profile",-1),_sfc_main$_={__name:"SideBar",setup(t){const e=useRouter(),n=computed(()=>e.currentRoute.value.path);return(r,s)=>{const o=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$V,[createVNode(o,{to:"/",class:"text-decoration-none text-black p-3"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$V,[createBaseVNode("div",_hoisted_3$U,[createBaseVNode("div",_hoisted_4$S,[unref(store).theme=="light"?(openBlock(),createElementBlock("img",_hoisted_5$R)):createCommentVNode("",!0),unref(store).theme=="dark"?(openBlock(),createElementBlock("img",_hoisted_6$M)):createCommentVNode("",!0)]),_hoisted_7$I])])]),_:1}),createBaseVNode("ul",_hoisted_8$E,[createBaseVNode("li",_hoisted_9$E,[createVNode(o,{to:"/",class:"nav-link side-bar-text fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-house-door-fill":unref(n)=="/","bi-house-door":unref(n)!="/"}])},null,2),_hoisted_10$D]),_:1})]),createBaseVNode("li",_hoisted_11$A,[createVNode(o,{to:"/artists",class:"nav-link side-bar-text fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-person-fill":unref(n)=="/artists","bi-person":unref(n)!="/artists"}])},null,2),_hoisted_12$x]),_:1})]),createBaseVNode("li",_hoisted_13$w,[createVNode(o,{to:"/albums",class:"nav-link side-bar-text fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-vinyl-fill":unref(n)=="/albums","bi-vinyl":unref(n)!="/albums"}])},null,2),_hoisted_14$v]),_:1})]),createBaseVNode("li",_hoisted_15$r,[createVNode(o,{to:"/playlists",class:"nav-link side-bar-text fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-cassette-fill":unref(n)=="/playlists","bi-cassette":unref(n)!="/playlists"}])},null,2),_hoisted_16$q]),_:1})]),createBaseVNode("li",_hoisted_17$q,[createVNode(o,{to:"/profile",class:"nav-link side-bar-text fw-bold","aria-current":"page"},{default:withCtx(()=>[_hoisted_18$p,_hoisted_19$m]),_:1})])])])}}};var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(t,e){return t.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(t,e){return t.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(t){return t?(t.nodeName||"").toLowerCase():null}function getWindow(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function isElement$1(t){var e=getWindow(t).Element;return t instanceof e||t instanceof Element}function isHTMLElement(t){var e=getWindow(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function isShadowRoot(t){if(typeof ShadowRoot>"u")return!1;var e=getWindow(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function applyStyles(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},o=e.elements[n];!isHTMLElement(o)||!getNodeName(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(i){var d=s[i];d===!1?o.removeAttribute(i):o.setAttribute(i,d===!0?"":d)}))})}function effect$2(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],o=e.attributes[r]||{},i=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),d=i.reduce(function(l,u){return l[u]="",l},{});!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,d),Object.keys(o).forEach(function(l){s.removeAttribute(l)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(t){return t.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,o=1;e&&isHTMLElement(t)&&(s=t.offsetWidth>0&&round(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&round(r.height)/t.offsetHeight||1);var i=isElement$1(t)?getWindow(t):window,d=i.visualViewport,l=!isLayoutViewport()&&n,u=(r.left+(l&&d?d.offsetLeft:0))/s,_=(r.top+(l&&d?d.offsetTop:0))/o,a=r.width/s,c=r.height/o;return{width:a,height:c,top:_,right:u+a,bottom:_+c,left:u,x:u,y:_}}function getLayoutRect(t){var e=getBoundingClientRect(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function contains(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&isShadowRoot(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function getComputedStyle$1(t){return getWindow(t).getComputedStyle(t)}function isTableElement(t){return["table","td","th"].indexOf(getNodeName(t))>=0}function getDocumentElement(t){return((isElement$1(t)?t.ownerDocument:t.document)||window.document).documentElement}function getParentNode(t){return getNodeName(t)==="html"?t:t.assignedSlot||t.parentNode||(isShadowRoot(t)?t.host:null)||getDocumentElement(t)}function getTrueOffsetParent(t){return!isHTMLElement(t)||getComputedStyle$1(t).position==="fixed"?null:t.offsetParent}function getContainingBlock(t){var e=/firefox/i.test(getUAString()),n=/Trident/i.test(getUAString());if(n&&isHTMLElement(t)){var r=getComputedStyle$1(t);if(r.position==="fixed")return null}var s=getParentNode(t);for(isShadowRoot(s)&&(s=s.host);isHTMLElement(s)&&["html","body"].indexOf(getNodeName(s))<0;){var o=getComputedStyle$1(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function getOffsetParent(t){for(var e=getWindow(t),n=getTrueOffsetParent(t);n&&isTableElement(n)&&getComputedStyle$1(n).position==="static";)n=getTrueOffsetParent(n);return n&&(getNodeName(n)==="html"||getNodeName(n)==="body"&&getComputedStyle$1(n).position==="static")?e:n||getContainingBlock(t)||e}function getMainAxisFromPlacement(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function within(t,e,n){return max(t,min(e,n))}function withinMaxClamp(t,e,n){var r=within(t,e,n);return r>n?n:r}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(t){return Object.assign({},getFreshSideObject(),t)}function expandToHashMap(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var toPaddingObject=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(t){var e,n=t.state,r=t.name,s=t.options,o=n.elements.arrow,i=n.modifiersData.popperOffsets,d=getBasePlacement(n.placement),l=getMainAxisFromPlacement(d),u=[left,right].indexOf(d)>=0,_=u?"height":"width";if(!(!o||!i)){var a=toPaddingObject(s.padding,n),c=getLayoutRect(o),f=l==="y"?top:left,m=l==="y"?bottom:right,v=n.rects.reference[_]+n.rects.reference[l]-i[l]-n.rects.popper[_],g=i[l]-n.rects.reference[l],y=getOffsetParent(o),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,N=v/2-g/2,x=a[f],A=b-c[_]-a[m],L=b/2-c[_]/2+N,V=within(x,L,A),P=l;n.modifiersData[r]=(e={},e[P]=V,e.centerOffset=V-L,e)}}function effect$1(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||!contains(e.elements.popper,s)||(e.elements.arrow=s))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(t){return t.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:round(n*s)/s||0,y:round(r*s)/s||0}}function mapToStyles(t){var e,n=t.popper,r=t.popperRect,s=t.placement,o=t.variation,i=t.offsets,d=t.position,l=t.gpuAcceleration,u=t.adaptive,_=t.roundOffsets,a=t.isFixed,c=i.x,f=c===void 0?0:c,m=i.y,v=m===void 0?0:m,g=typeof _=="function"?_({x:f,y:v}):{x:f,y:v};f=g.x,v=g.y;var y=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),N=left,x=top,A=window;if(u){var L=getOffsetParent(n),V="clientHeight",P="clientWidth";if(L===getWindow(n)&&(L=getDocumentElement(n),getComputedStyle$1(L).position!=="static"&&d==="absolute"&&(V="scrollHeight",P="scrollWidth")),L=L,s===top||(s===left||s===right)&&o===end){x=bottom;var j=a&&L===A&&A.visualViewport?A.visualViewport.height:L[V];v-=j-r.height,v*=l?1:-1}if(s===left||(s===top||s===bottom)&&o===end){N=right;var H=a&&L===A&&A.visualViewport?A.visualViewport.width:L[P];f-=H-r.width,f*=l?1:-1}}var ae=Object.assign({position:d},u&&unsetSides),ie=_===!0?roundOffsetsByDPR({x:f,y:v},getWindow(n)):{x:f,y:v};if(f=ie.x,v=ie.y,l){var le;return Object.assign({},ae,(le={},le[x]=b?"0":"",le[N]=y?"0":"",le.transform=(A.devicePixelRatio||1)<=1?"translate("+f+"px, "+v+"px)":"translate3d("+f+"px, "+v+"px, 0)",le))}return Object.assign({},ae,(e={},e[x]=b?v+"px":"",e[N]=y?f+"px":"",e.transform="",e))}function computeStyles(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,o=n.adaptive,i=o===void 0?!0:o,d=n.roundOffsets,l=d===void 0?!0:d,u={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:i,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,o=s===void 0?!0:s,i=r.resize,d=i===void 0?!0:i,l=getWindow(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(_){_.addEventListener("scroll",n.update,passive)}),d&&l.addEventListener("resize",n.update,passive),function(){o&&u.forEach(function(_){_.removeEventListener("scroll",n.update,passive)}),d&&l.removeEventListener("resize",n.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(t){return t.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(t){return t.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(t){var e=getWindow(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function getWindowScrollBarX(t){return getBoundingClientRect(getDocumentElement(t)).left+getWindowScroll(t).scrollLeft}function getViewportRect(t,e){var n=getWindow(t),r=getDocumentElement(t),s=n.visualViewport,o=r.clientWidth,i=r.clientHeight,d=0,l=0;if(s){o=s.width,i=s.height;var u=isLayoutViewport();(u||!u&&e==="fixed")&&(d=s.offsetLeft,l=s.offsetTop)}return{width:o,height:i,x:d+getWindowScrollBarX(t),y:l}}function getDocumentRect(t){var e,n=getDocumentElement(t),r=getWindowScroll(t),s=(e=t.ownerDocument)==null?void 0:e.body,o=max(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),i=max(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),d=-r.scrollLeft+getWindowScrollBarX(t),l=-r.scrollTop;return getComputedStyle$1(s||n).direction==="rtl"&&(d+=max(n.clientWidth,s?s.clientWidth:0)-o),{width:o,height:i,x:d,y:l}}function isScrollParent(t){var e=getComputedStyle$1(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function getScrollParent(t){return["html","body","#document"].indexOf(getNodeName(t))>=0?t.ownerDocument.body:isHTMLElement(t)&&isScrollParent(t)?t:getScrollParent(getParentNode(t))}function listScrollParents(t,e){var n;e===void 0&&(e=[]);var r=getScrollParent(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),o=getWindow(r),i=s?[o].concat(o.visualViewport||[],isScrollParent(r)?r:[]):r,d=e.concat(i);return s?d:d.concat(listScrollParents(getParentNode(i)))}function rectToClientRect(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function getInnerBoundingClientRect(t,e){var n=getBoundingClientRect(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function getClientRectFromMixedType(t,e,n){return e===viewport?rectToClientRect(getViewportRect(t,n)):isElement$1(e)?getInnerBoundingClientRect(e,n):rectToClientRect(getDocumentRect(getDocumentElement(t)))}function getClippingParents(t){var e=listScrollParents(getParentNode(t)),n=["absolute","fixed"].indexOf(getComputedStyle$1(t).position)>=0,r=n&&isHTMLElement(t)?getOffsetParent(t):t;return isElement$1(r)?e.filter(function(s){return isElement$1(s)&&contains(s,r)&&getNodeName(s)!=="body"}):[]}function getClippingRect(t,e,n,r){var s=e==="clippingParents"?getClippingParents(t):[].concat(e),o=[].concat(s,[n]),i=o[0],d=o.reduce(function(l,u){var _=getClientRectFromMixedType(t,u,r);return l.top=max(_.top,l.top),l.right=min(_.right,l.right),l.bottom=min(_.bottom,l.bottom),l.left=max(_.left,l.left),l},getClientRectFromMixedType(t,i,r));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(t){var e=t.reference,n=t.element,r=t.placement,s=r?getBasePlacement(r):null,o=r?getVariation(r):null,i=e.x+e.width/2-n.width/2,d=e.y+e.height/2-n.height/2,l;switch(s){case top:l={x:i,y:e.y-n.height};break;case bottom:l={x:i,y:e.y+e.height};break;case right:l={x:e.x+e.width,y:d};break;case left:l={x:e.x-n.width,y:d};break;default:l={x:e.x,y:e.y}}var u=s?getMainAxisFromPlacement(s):null;if(u!=null){var _=u==="y"?"height":"width";switch(o){case start:l[u]=l[u]-(e[_]/2-n[_]/2);break;case end:l[u]=l[u]+(e[_]/2-n[_]/2);break}}return l}function detectOverflow(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,o=n.strategy,i=o===void 0?t.strategy:o,d=n.boundary,l=d===void 0?clippingParents:d,u=n.rootBoundary,_=u===void 0?viewport:u,a=n.elementContext,c=a===void 0?popper:a,f=n.altBoundary,m=f===void 0?!1:f,v=n.padding,g=v===void 0?0:v,y=mergePaddingObject(typeof g!="number"?g:expandToHashMap(g,basePlacements)),b=c===popper?reference:popper,N=t.rects.popper,x=t.elements[m?b:c],A=getClippingRect(isElement$1(x)?x:x.contextElement||getDocumentElement(t.elements.popper),l,_,i),L=getBoundingClientRect(t.elements.reference),V=computeOffsets({reference:L,element:N,strategy:"absolute",placement:s}),P=rectToClientRect(Object.assign({},N,V)),j=c===popper?P:L,H={top:A.top-j.top+y.top,bottom:j.bottom-A.bottom+y.bottom,left:A.left-j.left+y.left,right:j.right-A.right+y.right},ae=t.modifiersData.offset;if(c===popper&&ae){var ie=ae[s];Object.keys(H).forEach(function(le){var J=[right,bottom].indexOf(le)>=0?1:-1,F=[top,bottom].indexOf(le)>=0?"y":"x";H[le]+=ie[F]*J})}return H}function computeAutoPlacement(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,o=n.rootBoundary,i=n.padding,d=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?placements:l,_=getVariation(r),a=_?d?variationPlacements:variationPlacements.filter(function(m){return getVariation(m)===_}):basePlacements,c=a.filter(function(m){return u.indexOf(m)>=0});c.length===0&&(c=a);var f=c.reduce(function(m,v){return m[v]=detectOverflow(t,{placement:v,boundary:s,rootBoundary:o,padding:i})[getBasePlacement(v)],m},{});return Object.keys(f).sort(function(m,v){return f[m]-f[v]})}function getExpandedFallbackPlacements(t){if(getBasePlacement(t)===auto)return[];var e=getOppositePlacement(t);return[getOppositeVariationPlacement(t),e,getOppositeVariationPlacement(e)]}function flip(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,d=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,_=n.boundary,a=n.rootBoundary,c=n.altBoundary,f=n.flipVariations,m=f===void 0?!0:f,v=n.allowedAutoPlacements,g=e.options.placement,y=getBasePlacement(g),b=y===g,N=l||(b||!m?[getOppositePlacement(g)]:getExpandedFallbackPlacements(g)),x=[g].concat(N).reduce(function(ge,R){return ge.concat(getBasePlacement(R)===auto?computeAutoPlacement(e,{placement:R,boundary:_,rootBoundary:a,padding:u,flipVariations:m,allowedAutoPlacements:v}):R)},[]),A=e.rects.reference,L=e.rects.popper,V=new Map,P=!0,j=x[0],H=0;H<x.length;H++){var ae=x[H],ie=getBasePlacement(ae),le=getVariation(ae)===start,J=[top,bottom].indexOf(ie)>=0,F=J?"width":"height",G=detectOverflow(e,{placement:ae,boundary:_,rootBoundary:a,altBoundary:c,padding:u}),C=J?le?right:left:le?bottom:top;A[F]>L[F]&&(C=getOppositePlacement(C));var D=getOppositePlacement(C),X=[];if(o&&X.push(G[ie]<=0),d&&X.push(G[C]<=0,G[D]<=0),X.every(function(ge){return ge})){j=ae,P=!1;break}V.set(ae,X)}if(P)for(var z=m?3:1,pe=function(R){var Q=x.find(function(Y){var te=V.get(Y);if(te)return te.slice(0,R).every(function(ee){return ee})});if(Q)return j=Q,"break"},_e=z;_e>0;_e--){var be=pe(_e);if(be==="break")break}e.placement!==j&&(e.modifiersData[r]._skip=!0,e.placement=j,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function isAnySideFullyClipped(t){return[top,right,bottom,left].some(function(e){return t[e]>=0})}function hide(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,o=e.modifiersData.preventOverflow,i=detectOverflow(e,{elementContext:"reference"}),d=detectOverflow(e,{altBoundary:!0}),l=getSideOffsets(i,r),u=getSideOffsets(d,s,o),_=isAnySideFullyClipped(l),a=isAnySideFullyClipped(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:_,hasPopperEscaped:a},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":_,"data-popper-escaped":a})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(t,e,n){var r=getBasePlacement(t),s=[left,top].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,i=o[0],d=o[1];return i=i||0,d=(d||0)*s,[left,right].indexOf(r)>=0?{x:d,y:i}:{x:i,y:d}}function offset(t){var e=t.state,n=t.options,r=t.name,s=n.offset,o=s===void 0?[0,0]:s,i=placements.reduce(function(_,a){return _[a]=distanceAndSkiddingToXY(a,e.rects,o),_},{}),d=i[e.placement],l=d.x,u=d.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=i}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(t){var e=t.state,n=t.name;e.modifiersData[n]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(t){return t==="x"?"y":"x"}function preventOverflow(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,o=s===void 0?!0:s,i=n.altAxis,d=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,_=n.altBoundary,a=n.padding,c=n.tether,f=c===void 0?!0:c,m=n.tetherOffset,v=m===void 0?0:m,g=detectOverflow(e,{boundary:l,rootBoundary:u,padding:a,altBoundary:_}),y=getBasePlacement(e.placement),b=getVariation(e.placement),N=!b,x=getMainAxisFromPlacement(y),A=getAltAxis(x),L=e.modifiersData.popperOffsets,V=e.rects.reference,P=e.rects.popper,j=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,H=typeof j=="number"?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ie={x:0,y:0};if(!!L){if(o){var le,J=x==="y"?top:left,F=x==="y"?bottom:right,G=x==="y"?"height":"width",C=L[x],D=C+g[J],X=C-g[F],z=f?-P[G]/2:0,pe=b===start?V[G]:P[G],_e=b===start?-P[G]:-V[G],be=e.elements.arrow,ge=f&&be?getLayoutRect(be):{width:0,height:0},R=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),Q=R[J],Y=R[F],te=within(0,V[G],ge[G]),ee=N?V[G]/2-z-te-Q-H.mainAxis:pe-te-Q-H.mainAxis,ue=N?-V[G]/2+z+te+Y+H.mainAxis:_e+te+Y+H.mainAxis,ce=e.elements.arrow&&getOffsetParent(e.elements.arrow),T=ce?x==="y"?ce.clientTop||0:ce.clientLeft||0:0,S=(le=ae==null?void 0:ae[x])!=null?le:0,B=C+ee-S-T,O=C+ue-S,I=within(f?min(D,B):D,C,f?max(X,O):X);L[x]=I,ie[x]=I-C}if(d){var W,Z=x==="x"?top:left,K=x==="x"?bottom:right,q=L[A],M=A==="y"?"height":"width",oe=q+g[Z],re=q-g[K],se=[top,left].indexOf(y)!==-1,de=(W=ae==null?void 0:ae[A])!=null?W:0,fe=se?oe:q-V[M]-P[M]-de+H.altAxis,ve=se?q+V[M]+P[M]-de-H.altAxis:re,me=f&&se?withinMaxClamp(fe,q,ve):within(f?fe:oe,q,f?ve:re);L[A]=me,ie[A]=me-q}e.modifiersData[r]=ie}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function getNodeScroll(t){return t===getWindow(t)||!isHTMLElement(t)?getWindowScroll(t):getHTMLElementScroll(t)}function isElementScaled(t){var e=t.getBoundingClientRect(),n=round(e.width)/t.offsetWidth||1,r=round(e.height)/t.offsetHeight||1;return n!==1||r!==1}function getCompositeRect(t,e,n){n===void 0&&(n=!1);var r=isHTMLElement(e),s=isHTMLElement(e)&&isElementScaled(e),o=getDocumentElement(e),i=getBoundingClientRect(t,s,n),d={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((getNodeName(e)!=="body"||isScrollParent(o))&&(d=getNodeScroll(e)),isHTMLElement(e)?(l=getBoundingClientRect(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=getWindowScrollBarX(o))),{x:i.left+d.scrollLeft-l.x,y:i.top+d.scrollTop-l.y,width:i.width,height:i.height}}function order(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function s(o){n.add(o.name);var i=[].concat(o.requires||[],o.requiresIfExists||[]);i.forEach(function(d){if(!n.has(d)){var l=e.get(d);l&&s(l)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||s(o)}),r}function orderModifiers(t){var e=order(t);return modifierPhases.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function debounce(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function mergeByName(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function popperGenerator(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,o=s===void 0?DEFAULT_OPTIONS:s;return function(d,l,u){u===void 0&&(u=o);var _={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,o),modifiersData:{},elements:{reference:d,popper:l},attributes:{},styles:{}},a=[],c=!1,f={state:_,setOptions:function(y){var b=typeof y=="function"?y(_.options):y;v(),_.options=Object.assign({},o,_.options,b),_.scrollParents={reference:isElement$1(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(l)};var N=orderModifiers(mergeByName([].concat(r,_.options.modifiers)));return _.orderedModifiers=N.filter(function(x){return x.enabled}),m(),f.update()},forceUpdate:function(){if(!c){var y=_.elements,b=y.reference,N=y.popper;if(!!areValidElements(b,N)){_.rects={reference:getCompositeRect(b,getOffsetParent(N),_.options.strategy==="fixed"),popper:getLayoutRect(N)},_.reset=!1,_.placement=_.options.placement,_.orderedModifiers.forEach(function(H){return _.modifiersData[H.name]=Object.assign({},H.data)});for(var x=0;x<_.orderedModifiers.length;x++){if(_.reset===!0){_.reset=!1,x=-1;continue}var A=_.orderedModifiers[x],L=A.fn,V=A.options,P=V===void 0?{}:V,j=A.name;typeof L=="function"&&(_=L({state:_,options:P,name:j,instance:f})||_)}}}},update:debounce(function(){return new Promise(function(g){f.forceUpdate(),g(_)})}),destroy:function(){v(),c=!0}};if(!areValidElements(d,l))return f;f.setOptions(u).then(function(g){!c&&u.onFirstUpdate&&u.onFirstUpdate(g)});function m(){_.orderedModifiers.forEach(function(g){var y=g.name,b=g.options,N=b===void 0?{}:b,x=g.effect;if(typeof x=="function"){var A=x({state:_,name:y,instance:f,options:N}),L=function(){};a.push(A||L)}})}function v(){a.forEach(function(g){return g()}),a=[]}return f}}var createPopper$2=popperGenerator(),defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});const Popper=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator,detectOverflow,createPopperBase:createPopper$2,createPopper,createPopperLite:createPopper$1,top,bottom,right,left,auto,basePlacements,start,end,clippingParents,viewport,popper,reference,variationPlacements,placements,beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite,modifierPhases,applyStyles:applyStyles$1,arrow:arrow$1,computeStyles:computeStyles$1,eventListeners,flip:flip$1,hide:hide$1,offset:offset$1,popperOffsets:popperOffsets$1,preventOverflow:preventOverflow$1},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.0-alpha3 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const elementMap=new Map,Data={set(t,e,n){elementMap.has(t)||elementMap.set(t,new Map);const r=elementMap.get(t);if(!r.has(e)&&r.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`);return}r.set(e,n)},get(t,e){return elementMap.has(t)&&elementMap.get(t).get(e)||null},remove(t,e){if(!elementMap.has(t))return;const n=elementMap.get(t);n.delete(e),n.size===0&&elementMap.delete(t)}},MAX_UID=1e6,MILLISECONDS_MULTIPLIER=1e3,TRANSITION_END="transitionend",parseSelector=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),toType=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),getUID=t=>{do t+=Math.floor(Math.random()*MAX_UID);while(document.getElementById(t));return t},getTransitionDurationFromElement=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const r=Number.parseFloat(e),s=Number.parseFloat(n);return!r&&!s?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*MILLISECONDS_MULTIPLIER)},triggerTransitionEnd=t=>{t.dispatchEvent(new Event(TRANSITION_END))},isElement=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),getElement=t=>isElement(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(parseSelector(t)):null,isVisible=t=>{if(!isElement(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const r=t.closest("summary");if(r&&r.parentNode!==n||r===null)return!1}return e},isDisabled=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",findShadowRoot=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?findShadowRoot(t.parentNode):null},noop=()=>{},reflow=t=>{t.offsetHeight},getjQuery=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,DOMContentLoadedCallbacks=[],onDOMContentLoaded=t=>{document.readyState==="loading"?(DOMContentLoadedCallbacks.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of DOMContentLoadedCallbacks)e()}),DOMContentLoadedCallbacks.push(t)):t()},isRTL=()=>document.documentElement.dir==="rtl",defineJQueryPlugin=t=>{onDOMContentLoaded(()=>{const e=getjQuery();if(e){const n=t.NAME,r=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=r,t.jQueryInterface)}})},execute=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,executeAfterTransition=(t,e,n=!0)=>{if(!n){execute(t);return}const r=5,s=getTransitionDurationFromElement(e)+r;let o=!1;const i=({target:d})=>{d===e&&(o=!0,e.removeEventListener(TRANSITION_END,i),execute(t))};e.addEventListener(TRANSITION_END,i),setTimeout(()=>{o||triggerTransitionEnd(e)},s)},getNextActiveElement=(t,e,n,r)=>{const s=t.length;let o=t.indexOf(e);return o===-1?!n&&r?t[s-1]:t[0]:(o+=n?1:-1,r&&(o=(o+s)%s),t[Math.max(0,Math.min(o,s-1))])},namespaceRegex=/[^.]*(?=\..*)\.|.*/,stripNameRegex=/\..*/,stripUidRegex=/::\d+$/,eventRegistry={};let uidEvent=1;const customEvents={mouseenter:"mouseover",mouseleave:"mouseout"},nativeEvents=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function makeEventUid(t,e){return e&&`${e}::${uidEvent++}`||t.uidEvent||uidEvent++}function getElementEvents(t){const e=makeEventUid(t);return t.uidEvent=e,eventRegistry[e]=eventRegistry[e]||{},eventRegistry[e]}function bootstrapHandler(t,e){return function n(r){return hydrateObj(r,{delegateTarget:t}),n.oneOff&&EventHandler.off(t,r.type,e),e.apply(t,[r])}}function bootstrapDelegationHandler(t,e,n){return function r(s){const o=t.querySelectorAll(e);for(let{target:i}=s;i&&i!==this;i=i.parentNode)for(const d of o)if(d===i)return hydrateObj(s,{delegateTarget:i}),r.oneOff&&EventHandler.off(t,s.type,e,n),n.apply(i,[s])}}function findHandler(t,e,n=null){return Object.values(t).find(r=>r.callable===e&&r.delegationSelector===n)}function normalizeParameters(t,e,n){const r=typeof e=="string",s=r?n:e||n;let o=getTypeEvent(t);return nativeEvents.has(o)||(o=t),[r,s,o]}function addHandler(t,e,n,r,s){if(typeof e!="string"||!t)return;let[o,i,d]=normalizeParameters(e,n,r);e in customEvents&&(i=(m=>function(v){if(!v.relatedTarget||v.relatedTarget!==v.delegateTarget&&!v.delegateTarget.contains(v.relatedTarget))return m.call(this,v)})(i));const l=getElementEvents(t),u=l[d]||(l[d]={}),_=findHandler(u,i,o?n:null);if(_){_.oneOff=_.oneOff&&s;return}const a=makeEventUid(i,e.replace(namespaceRegex,"")),c=o?bootstrapDelegationHandler(t,n,i):bootstrapHandler(t,i);c.delegationSelector=o?n:null,c.callable=i,c.oneOff=s,c.uidEvent=a,u[a]=c,t.addEventListener(d,c,o)}function removeHandler(t,e,n,r,s){const o=findHandler(e[n],r,s);!o||(t.removeEventListener(n,o,Boolean(s)),delete e[n][o.uidEvent])}function removeNamespacedHandlers(t,e,n,r){const s=e[n]||{};for(const[o,i]of Object.entries(s))o.includes(r)&&removeHandler(t,e,n,i.callable,i.delegationSelector)}function getTypeEvent(t){return t=t.replace(stripNameRegex,""),customEvents[t]||t}const EventHandler={on(t,e,n,r){addHandler(t,e,n,r,!1)},one(t,e,n,r){addHandler(t,e,n,r,!0)},off(t,e,n,r){if(typeof e!="string"||!t)return;const[s,o,i]=normalizeParameters(e,n,r),d=i!==e,l=getElementEvents(t),u=l[i]||{},_=e.startsWith(".");if(typeof o<"u"){if(!Object.keys(u).length)return;removeHandler(t,l,i,o,s?n:null);return}if(_)for(const a of Object.keys(l))removeNamespacedHandlers(t,l,a,e.slice(1));for(const[a,c]of Object.entries(u)){const f=a.replace(stripUidRegex,"");(!d||e.includes(f))&&removeHandler(t,l,i,c.callable,c.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const r=getjQuery(),s=getTypeEvent(e),o=e!==s;let i=null,d=!0,l=!0,u=!1;o&&r&&(i=r.Event(e,n),r(t).trigger(i),d=!i.isPropagationStopped(),l=!i.isImmediatePropagationStopped(),u=i.isDefaultPrevented());const _=hydrateObj(new Event(e,{bubbles:d,cancelable:!0}),n);return u&&_.preventDefault(),l&&t.dispatchEvent(_),_.defaultPrevented&&i&&i.preventDefault(),_}};function hydrateObj(t,e={}){for(const[n,r]of Object.entries(e))try{t[n]=r}catch{Object.defineProperty(t,n,{configurable:!0,get(){return r}})}return t}function normalizeData(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function normalizeDataKey(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Manipulator={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${normalizeDataKey(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${normalizeDataKey(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(r=>r.startsWith("bs")&&!r.startsWith("bsConfig"));for(const r of n){let s=r.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=normalizeData(t.dataset[r])}return e},getDataAttribute(t,e){return normalizeData(t.getAttribute(`data-bs-${normalizeDataKey(e)}`))}};class Config{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const r=isElement(n)?Manipulator.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof r=="object"?r:{},...isElement(n)?Manipulator.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[r,s]of Object.entries(n)){const o=e[r],i=isElement(o)?"element":toType(o);if(!new RegExp(s).test(i))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${s}".`)}}}const VERSION="5.3.0-alpha2";class BaseComponent extends Config{constructor(e,n){super(),e=getElement(e),e&&(this._element=e,this._config=this._getConfig(n),Data.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Data.remove(this._element,this.constructor.DATA_KEY),EventHandler.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,r=!0){executeAfterTransition(e,n,r)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Data.get(getElement(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return VERSION}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const getSelector=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?n.trim():null}return parseSelector(e)},SelectorEngine={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let r=t.parentNode.closest(e);for(;r;)n.push(r),r=r.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!isDisabled(n)&&isVisible(n))},getSelectorFromElement(t){const e=getSelector(t);return e&&SelectorEngine.findOne(e)?e:null},getElementFromSelector(t){const e=getSelector(t);return e?SelectorEngine.findOne(e):null},getMultipleElementsFromSelector(t){const e=getSelector(t);return e?SelectorEngine.find(e):[]}},enableDismissTrigger=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,r=t.NAME;EventHandler.on(document,n,`[data-bs-dismiss="${r}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),isDisabled(this))return;const o=SelectorEngine.getElementFromSelector(this)||this.closest(`.${r}`);t.getOrCreateInstance(o)[e]()})},NAME$f="alert",DATA_KEY$a="bs.alert",EVENT_KEY$b=`.${DATA_KEY$a}`,EVENT_CLOSE=`close${EVENT_KEY$b}`,EVENT_CLOSED=`closed${EVENT_KEY$b}`,CLASS_NAME_FADE$5="fade",CLASS_NAME_SHOW$8="show";class Alert extends BaseComponent{static get NAME(){return NAME$f}close(){if(EventHandler.trigger(this._element,EVENT_CLOSE).defaultPrevented)return;this._element.classList.remove(CLASS_NAME_SHOW$8);const n=this._element.classList.contains(CLASS_NAME_FADE$5);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),EventHandler.trigger(this._element,EVENT_CLOSED),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Alert.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}enableDismissTrigger(Alert,"close");defineJQueryPlugin(Alert);const NAME$e="button",DATA_KEY$9="bs.button",EVENT_KEY$a=`.${DATA_KEY$9}`,DATA_API_KEY$6=".data-api",CLASS_NAME_ACTIVE$3="active",SELECTOR_DATA_TOGGLE$5='[data-bs-toggle="button"]',EVENT_CLICK_DATA_API$6=`click${EVENT_KEY$a}${DATA_API_KEY$6}`;class Button extends BaseComponent{static get NAME(){return NAME$e}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(CLASS_NAME_ACTIVE$3))}static jQueryInterface(e){return this.each(function(){const n=Button.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}EventHandler.on(document,EVENT_CLICK_DATA_API$6,SELECTOR_DATA_TOGGLE$5,t=>{t.preventDefault();const e=t.target.closest(SELECTOR_DATA_TOGGLE$5);Button.getOrCreateInstance(e).toggle()});defineJQueryPlugin(Button);const NAME$d="swipe",EVENT_KEY$9=".bs.swipe",EVENT_TOUCHSTART=`touchstart${EVENT_KEY$9}`,EVENT_TOUCHMOVE=`touchmove${EVENT_KEY$9}`,EVENT_TOUCHEND=`touchend${EVENT_KEY$9}`,EVENT_POINTERDOWN=`pointerdown${EVENT_KEY$9}`,EVENT_POINTERUP=`pointerup${EVENT_KEY$9}`,POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen",CLASS_NAME_POINTER_EVENT="pointer-event",SWIPE_THRESHOLD=40,Default$c={endCallback:null,leftCallback:null,rightCallback:null},DefaultType$c={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Swipe extends Config{constructor(e,n){super(),this._element=e,!(!e||!Swipe.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Default$c}static get DefaultType(){return DefaultType$c}static get NAME(){return NAME$d}dispose(){EventHandler.off(this._element,EVENT_KEY$9)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),execute(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=SWIPE_THRESHOLD)return;const n=e/this._deltaX;this._deltaX=0,n&&execute(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(EventHandler.on(this._element,EVENT_POINTERDOWN,e=>this._start(e)),EventHandler.on(this._element,EVENT_POINTERUP,e=>this._end(e)),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,e=>this._start(e)),EventHandler.on(this._element,EVENT_TOUCHMOVE,e=>this._move(e)),EventHandler.on(this._element,EVENT_TOUCHEND,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===POINTER_TYPE_PEN||e.pointerType===POINTER_TYPE_TOUCH)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const NAME$c="carousel",DATA_KEY$8="bs.carousel",EVENT_KEY$8=`.${DATA_KEY$8}`,DATA_API_KEY$5=".data-api",ARROW_LEFT_KEY$1="ArrowLeft",ARROW_RIGHT_KEY$1="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE=`slide${EVENT_KEY$8}`,EVENT_SLID=`slid${EVENT_KEY$8}`,EVENT_KEYDOWN$1=`keydown${EVENT_KEY$8}`,EVENT_MOUSEENTER$1=`mouseenter${EVENT_KEY$8}`,EVENT_MOUSELEAVE$1=`mouseleave${EVENT_KEY$8}`,EVENT_DRAG_START=`dragstart${EVENT_KEY$8}`,EVENT_LOAD_DATA_API$3=`load${EVENT_KEY$8}${DATA_API_KEY$5}`,EVENT_CLICK_DATA_API$5=`click${EVENT_KEY$8}${DATA_API_KEY$5}`,CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE$2="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",SELECTOR_ACTIVE=".active",SELECTOR_ITEM=".carousel-item",SELECTOR_ACTIVE_ITEM=SELECTOR_ACTIVE+SELECTOR_ITEM,SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',KEY_TO_DIRECTION={[ARROW_LEFT_KEY$1]:DIRECTION_RIGHT,[ARROW_RIGHT_KEY$1]:DIRECTION_LEFT},Default$b={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},DefaultType$b={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Carousel extends BaseComponent{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._addEventListeners(),this._config.ride===CLASS_NAME_CAROUSEL&&this.cycle()}static get Default(){return Default$b}static get DefaultType(){return DefaultType$b}static get NAME(){return NAME$c}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(){this._isSliding&&triggerTransitionEnd(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){EventHandler.one(this._element,EVENT_SLID,()=>this.to(e));return}const r=this._getItemIndex(this._getActive());if(r===e)return;const s=e>r?ORDER_NEXT:ORDER_PREV;this._slide(s,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN$1,e=>this._keydown(e)),this._config.pause==="hover"&&(EventHandler.on(this._element,EVENT_MOUSEENTER$1,()=>this.pause()),EventHandler.on(this._element,EVENT_MOUSELEAVE$1,()=>this._maybeEnableCycle())),this._config.touch&&Swipe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const r of SelectorEngine.find(SELECTOR_ITEM_IMG,this._element))EventHandler.on(r,EVENT_DRAG_START,s=>s.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(DIRECTION_LEFT)),rightCallback:()=>this._slide(this._directionToOrder(DIRECTION_RIGHT)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),TOUCHEVENT_COMPAT_WAIT+this._config.interval))}};this._swipeHelper=new Swipe(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=KEY_TO_DIRECTION[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);n.classList.remove(CLASS_NAME_ACTIVE$2),n.removeAttribute("aria-current");const r=SelectorEngine.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);r&&(r.classList.add(CLASS_NAME_ACTIVE$2),r.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const r=this._getActive(),s=e===ORDER_NEXT,o=n||getNextActiveElement(this._getItems(),r,s,this._config.wrap);if(o===r)return;const i=this._getItemIndex(o),d=f=>EventHandler.trigger(this._element,f,{relatedTarget:o,direction:this._orderToDirection(e),from:this._getItemIndex(r),to:i});if(d(EVENT_SLIDE).defaultPrevented||!r||!o)return;const u=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(i),this._activeElement=o;const _=s?CLASS_NAME_START:CLASS_NAME_END,a=s?CLASS_NAME_NEXT:CLASS_NAME_PREV;o.classList.add(a),reflow(o),r.classList.add(_),o.classList.add(_);const c=()=>{o.classList.remove(_,a),o.classList.add(CLASS_NAME_ACTIVE$2),r.classList.remove(CLASS_NAME_ACTIVE$2,a,_),this._isSliding=!1,d(EVENT_SLID)};this._queueCallback(c,r,this._isAnimated()),u&&this.cycle()}_isAnimated(){return this._element.classList.contains(CLASS_NAME_SLIDE)}_getActive(){return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element)}_getItems(){return SelectorEngine.find(SELECTOR_ITEM,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return isRTL()?e===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:e===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV}_orderToDirection(e){return isRTL()?e===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:e===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT}static jQueryInterface(e){return this.each(function(){const n=Carousel.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$5,SELECTOR_DATA_SLIDE,function(t){const e=SelectorEngine.getElementFromSelector(this);if(!e||!e.classList.contains(CLASS_NAME_CAROUSEL))return;t.preventDefault();const n=Carousel.getOrCreateInstance(e),r=this.getAttribute("data-bs-slide-to");if(r){n.to(r),n._maybeEnableCycle();return}if(Manipulator.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});EventHandler.on(window,EVENT_LOAD_DATA_API$3,()=>{const t=SelectorEngine.find(SELECTOR_DATA_RIDE);for(const e of t)Carousel.getOrCreateInstance(e)});defineJQueryPlugin(Carousel);const NAME$b="collapse",DATA_KEY$7="bs.collapse",EVENT_KEY$7=`.${DATA_KEY$7}`,DATA_API_KEY$4=".data-api",EVENT_SHOW$6=`show${EVENT_KEY$7}`,EVENT_SHOWN$6=`shown${EVENT_KEY$7}`,EVENT_HIDE$6=`hide${EVENT_KEY$7}`,EVENT_HIDDEN$6=`hidden${EVENT_KEY$7}`,EVENT_CLICK_DATA_API$4=`click${EVENT_KEY$7}${DATA_API_KEY$4}`,CLASS_NAME_SHOW$7="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",CLASS_NAME_DEEPER_CHILDREN=`:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`,CLASS_NAME_HORIZONTAL="collapse-horizontal",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".collapse.show, .collapse.collapsing",SELECTOR_DATA_TOGGLE$4='[data-bs-toggle="collapse"]',Default$a={parent:null,toggle:!0},DefaultType$a={parent:"(null|element)",toggle:"boolean"};class Collapse extends BaseComponent{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const r=SelectorEngine.find(SELECTOR_DATA_TOGGLE$4);for(const s of r){const o=SelectorEngine.getSelectorFromElement(s),i=SelectorEngine.find(o).filter(d=>d===this._element);o!==null&&i.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Default$a}static get DefaultType(){return DefaultType$a}static get NAME(){return NAME$b}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(SELECTOR_ACTIVES).filter(d=>d!==this._element).map(d=>Collapse.getOrCreateInstance(d,{toggle:!1}))),e.length&&e[0]._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$6).defaultPrevented)return;for(const d of e)d.hide();const r=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[r]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7),this._element.style[r]="",EventHandler.trigger(this._element,EVENT_SHOWN$6)},i=`scroll${r[0].toUpperCase()+r.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[r]=`${this._element[i]}px`}hide(){if(this._isTransitioning||!this._isShown()||EventHandler.trigger(this._element,EVENT_HIDE$6).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW$7);for(const s of this._triggerArray){const o=SelectorEngine.getElementFromSelector(s);o&&!this._isShown(o)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN$6)};this._element.style[n]="",this._queueCallback(r,this._element,!0)}_isShown(e=this._element){return e.classList.contains(CLASS_NAME_SHOW$7)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=getElement(e.parent),e}_getDimension(){return this._element.classList.contains(CLASS_NAME_HORIZONTAL)?WIDTH:HEIGHT}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE$4);for(const n of e){const r=SelectorEngine.getElementFromSelector(n);r&&this._addAriaAndCollapsedClass([n],this._isShown(r))}}_getFirstLevelChildren(e){const n=SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN,this._config.parent);return SelectorEngine.find(e,this._config.parent).filter(r=>!n.includes(r))}_addAriaAndCollapsedClass(e,n){if(!!e.length)for(const r of e)r.classList.toggle(CLASS_NAME_COLLAPSED,!n),r.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const r=Collapse.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$4,SELECTOR_DATA_TOGGLE$4,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of SelectorEngine.getMultipleElementsFromSelector(this))Collapse.getOrCreateInstance(e,{toggle:!1}).toggle()});defineJQueryPlugin(Collapse);const NAME$a="dropdown",DATA_KEY$6="bs.dropdown",EVENT_KEY$6=`.${DATA_KEY$6}`,DATA_API_KEY$3=".data-api",ESCAPE_KEY$2="Escape",TAB_KEY$1="Tab",ARROW_UP_KEY$1="ArrowUp",ARROW_DOWN_KEY$1="ArrowDown",RIGHT_MOUSE_BUTTON=2,EVENT_HIDE$5=`hide${EVENT_KEY$6}`,EVENT_HIDDEN$5=`hidden${EVENT_KEY$6}`,EVENT_SHOW$5=`show${EVENT_KEY$6}`,EVENT_SHOWN$5=`shown${EVENT_KEY$6}`,EVENT_CLICK_DATA_API$3=`click${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYDOWN_DATA_API=`keydown${EVENT_KEY$6}${DATA_API_KEY$3}`,EVENT_KEYUP_DATA_API=`keyup${EVENT_KEY$6}${DATA_API_KEY$3}`,CLASS_NAME_SHOW$6="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_DROPUP_CENTER="dropup-center",CLASS_NAME_DROPDOWN_CENTER="dropdown-center",SELECTOR_DATA_TOGGLE$3='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SELECTOR_DATA_TOGGLE_SHOWN=`${SELECTOR_DATA_TOGGLE$3}.${CLASS_NAME_SHOW$6}`,SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR=".navbar",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL()?"top-end":"top-start",PLACEMENT_TOPEND=isRTL()?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL()?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL()?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL()?"left-start":"right-start",PLACEMENT_LEFT=isRTL()?"right-start":"left-start",PLACEMENT_TOPCENTER="top",PLACEMENT_BOTTOMCENTER="bottom",Default$9={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},DefaultType$9={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Dropdown extends BaseComponent{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=SelectorEngine.next(this._element,SELECTOR_MENU)[0]||SelectorEngine.prev(this._element,SELECTOR_MENU)[0]||SelectorEngine.findOne(SELECTOR_MENU,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Default$9}static get DefaultType(){return DefaultType$9}static get NAME(){return NAME$a}toggle(){return this._isShown()?this.hide():this.show()}show(){if(isDisabled(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW$5,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(SELECTOR_NAVBAR_NAV))for(const r of[].concat(...document.body.children))EventHandler.on(r,"mouseover",noop);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(CLASS_NAME_SHOW$6),this._element.classList.add(CLASS_NAME_SHOW$6),EventHandler.trigger(this._element,EVENT_SHOWN$5,e)}}hide(){if(isDisabled(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!EventHandler.trigger(this._element,EVENT_HIDE$5,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))EventHandler.off(r,"mouseover",noop);this._popper&&this._popper.destroy(),this._menu.classList.remove(CLASS_NAME_SHOW$6),this._element.classList.remove(CLASS_NAME_SHOW$6),this._element.setAttribute("aria-expanded","false"),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN$5,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!isElement(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${NAME$a.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Popper>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:isElement(this._config.reference)?e=getElement(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=createPopper(e,this._menu,n)}_isShown(){return this._menu.classList.contains(CLASS_NAME_SHOW$6)}_getPlacement(){const e=this._parent;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;if(e.classList.contains(CLASS_NAME_DROPUP_CENTER))return PLACEMENT_TOPCENTER;if(e.classList.contains(CLASS_NAME_DROPDOWN_CENTER))return PLACEMENT_BOTTOMCENTER;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(CLASS_NAME_DROPUP)?n?PLACEMENT_TOPEND:PLACEMENT_TOP:n?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return this._element.closest(SELECTOR_NAVBAR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Manipulator.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...execute(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const r=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,this._menu).filter(s=>isVisible(s));!r.length||getNextActiveElement(r,n,e===ARROW_DOWN_KEY$1,!r.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Dropdown.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===RIGHT_MOUSE_BUTTON||e.type==="keyup"&&e.key!==TAB_KEY$1)return;const n=SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN);for(const r of n){const s=Dropdown.getInstance(r);if(!s||s._config.autoClose===!1)continue;const o=e.composedPath(),i=o.includes(s._menu);if(o.includes(s._element)||s._config.autoClose==="inside"&&!i||s._config.autoClose==="outside"&&i||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===TAB_KEY$1||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const d={relatedTarget:s._element};e.type==="click"&&(d.clickEvent=e),s._completeHide(d)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),r=e.key===ESCAPE_KEY$2,s=[ARROW_UP_KEY$1,ARROW_DOWN_KEY$1].includes(e.key);if(!s&&!r||n&&!r)return;e.preventDefault();const o=this.matches(SELECTOR_DATA_TOGGLE$3)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.next(this,SELECTOR_DATA_TOGGLE$3)[0]||SelectorEngine.findOne(SELECTOR_DATA_TOGGLE$3,e.delegateTarget.parentNode),i=Dropdown.getOrCreateInstance(o);if(s){e.stopPropagation(),i.show(),i._selectMenuItem(e);return}i._isShown()&&(e.stopPropagation(),i.hide(),o.focus())}}EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE$3,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler);EventHandler.on(document,EVENT_CLICK_DATA_API$3,Dropdown.clearMenus);EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus);EventHandler.on(document,EVENT_CLICK_DATA_API$3,SELECTOR_DATA_TOGGLE$3,function(t){t.preventDefault(),Dropdown.getOrCreateInstance(this).toggle()});defineJQueryPlugin(Dropdown);const NAME$9="backdrop",CLASS_NAME_FADE$4="fade",CLASS_NAME_SHOW$5="show",EVENT_MOUSEDOWN=`mousedown.bs.${NAME$9}`,Default$8={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},DefaultType$8={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Backdrop extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return Default$8}static get DefaultType(){return DefaultType$8}static get NAME(){return NAME$9}show(e){if(!this._config.isVisible){execute(e);return}this._append();const n=this._getElement();this._config.isAnimated&&reflow(n),n.classList.add(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{execute(e)})}hide(e){if(!this._config.isVisible){execute(e);return}this._getElement().classList.remove(CLASS_NAME_SHOW$5),this._emulateAnimation(()=>{this.dispose(),execute(e)})}dispose(){!this._isAppended||(EventHandler.off(this._element,EVENT_MOUSEDOWN),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(CLASS_NAME_FADE$4),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=getElement(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),EventHandler.on(e,EVENT_MOUSEDOWN,()=>{execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){executeAfterTransition(e,this._getElement(),this._config.isAnimated)}}const NAME$8="focustrap",DATA_KEY$5="bs.focustrap",EVENT_KEY$5=`.${DATA_KEY$5}`,EVENT_FOCUSIN$2=`focusin${EVENT_KEY$5}`,EVENT_KEYDOWN_TAB=`keydown.tab${EVENT_KEY$5}`,TAB_KEY="Tab",TAB_NAV_FORWARD="forward",TAB_NAV_BACKWARD="backward",Default$7={autofocus:!0,trapElement:null},DefaultType$7={autofocus:"boolean",trapElement:"element"};class FocusTrap extends Config{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Default$7}static get DefaultType(){return DefaultType$7}static get NAME(){return NAME$8}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),EventHandler.off(document,EVENT_KEY$5),EventHandler.on(document,EVENT_FOCUSIN$2,e=>this._handleFocusin(e)),EventHandler.on(document,EVENT_KEYDOWN_TAB,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,EventHandler.off(document,EVENT_KEY$5))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const r=SelectorEngine.focusableChildren(n);r.length===0?n.focus():this._lastTabNavDirection===TAB_NAV_BACKWARD?r[r.length-1].focus():r[0].focus()}_handleKeydown(e){e.key===TAB_KEY&&(this._lastTabNavDirection=e.shiftKey?TAB_NAV_BACKWARD:TAB_NAV_FORWARD)}}const SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top",PROPERTY_PADDING="padding-right",PROPERTY_MARGIN="margin-right";class ScrollBarHelper{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,PROPERTY_PADDING,n=>n+e),this._setElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING,n=>n+e),this._setElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_FIXED_CONTENT,PROPERTY_PADDING),this._resetElementAttributes(SELECTOR_STICKY_CONTENT,PROPERTY_MARGIN)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,r){const s=this.getWidth(),o=i=>{if(i!==this._element&&window.innerWidth>i.clientWidth+s)return;this._saveInitialAttribute(i,n);const d=window.getComputedStyle(i).getPropertyValue(n);i.style.setProperty(n,`${r(Number.parseFloat(d))}px`)};this._applyManipulationCallback(e,o)}_saveInitialAttribute(e,n){const r=e.style.getPropertyValue(n);r&&Manipulator.setDataAttribute(e,n,r)}_resetElementAttributes(e,n){const r=s=>{const o=Manipulator.getDataAttribute(s,n);if(o===null){s.style.removeProperty(n);return}Manipulator.removeDataAttribute(s,n),s.style.setProperty(n,o)};this._applyManipulationCallback(e,r)}_applyManipulationCallback(e,n){if(isElement(e)){n(e);return}for(const r of SelectorEngine.find(e,this._element))n(r)}}const NAME$7="modal",DATA_KEY$4="bs.modal",EVENT_KEY$4=`.${DATA_KEY$4}`,DATA_API_KEY$2=".data-api",ESCAPE_KEY$1="Escape",EVENT_HIDE$4=`hide${EVENT_KEY$4}`,EVENT_HIDE_PREVENTED$1=`hidePrevented${EVENT_KEY$4}`,EVENT_HIDDEN$4=`hidden${EVENT_KEY$4}`,EVENT_SHOW$4=`show${EVENT_KEY$4}`,EVENT_SHOWN$4=`shown${EVENT_KEY$4}`,EVENT_RESIZE$1=`resize${EVENT_KEY$4}`,EVENT_CLICK_DISMISS=`click.dismiss${EVENT_KEY$4}`,EVENT_MOUSEDOWN_DISMISS=`mousedown.dismiss${EVENT_KEY$4}`,EVENT_KEYDOWN_DISMISS$1=`keydown.dismiss${EVENT_KEY$4}`,EVENT_CLICK_DATA_API$2=`click${EVENT_KEY$4}${DATA_API_KEY$2}`,CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE$3="fade",CLASS_NAME_SHOW$4="show",CLASS_NAME_STATIC="modal-static",OPEN_SELECTOR$1=".modal.show",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE$2='[data-bs-toggle="modal"]',Default$6={backdrop:!0,focus:!0,keyboard:!0},DefaultType$6={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Modal extends BaseComponent{constructor(e,n){super(e,n),this._dialog=SelectorEngine.findOne(SELECTOR_DIALOG,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ScrollBarHelper,this._addEventListeners()}static get Default(){return Default$6}static get DefaultType(){return DefaultType$6}static get NAME(){return NAME$7}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_SHOW$4,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(CLASS_NAME_OPEN),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||EventHandler.trigger(this._element,EVENT_HIDE$4).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(CLASS_NAME_SHOW$4),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){EventHandler.off(window,EVENT_KEY$4),EventHandler.off(this._dialog,EVENT_KEY$4),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Backdrop({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=SelectorEngine.findOne(SELECTOR_MODAL_BODY,this._dialog);n&&(n.scrollTop=0),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW$4);const r=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN$4,{relatedTarget:e})};this._queueCallback(r,this._dialog,this._isAnimated())}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS$1,e=>{if(e.key===ESCAPE_KEY$1){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),EventHandler.on(window,EVENT_RESIZE$1,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),EventHandler.on(this._element,EVENT_MOUSEDOWN_DISMISS,e=>{EventHandler.one(this._element,EVENT_CLICK_DISMISS,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(CLASS_NAME_OPEN),this._resetAdjustments(),this._scrollBar.reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$4)})}_isAnimated(){return this._element.classList.contains(CLASS_NAME_FADE$3)}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED$1).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,r=this._element.style.overflowY;r==="hidden"||this._element.classList.contains(CLASS_NAME_STATIC)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.classList.remove(CLASS_NAME_STATIC),this._queueCallback(()=>{this._element.style.overflowY=r},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),r=n>0;if(r&&!e){const s=isRTL()?"paddingLeft":"paddingRight";this._element.style[s]=`${n}px`}if(!r&&e){const s=isRTL()?"paddingRight":"paddingLeft";this._element.style[s]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const r=Modal.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof r[e]>"u")throw new TypeError(`No method named "${e}"`);r[e](n)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$2,SELECTOR_DATA_TOGGLE$2,function(t){const e=SelectorEngine.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),EventHandler.one(e,EVENT_SHOW$4,s=>{s.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN$4,()=>{isVisible(this)&&this.focus()})});const n=SelectorEngine.findOne(OPEN_SELECTOR$1);n&&Modal.getInstance(n).hide(),Modal.getOrCreateInstance(e).toggle(this)});enableDismissTrigger(Modal);defineJQueryPlugin(Modal);const NAME$6="offcanvas",DATA_KEY$3="bs.offcanvas",EVENT_KEY$3=`.${DATA_KEY$3}`,DATA_API_KEY$1=".data-api",EVENT_LOAD_DATA_API$2=`load${EVENT_KEY$3}${DATA_API_KEY$1}`,ESCAPE_KEY="Escape",CLASS_NAME_SHOW$3="show",CLASS_NAME_SHOWING$1="showing",CLASS_NAME_HIDING="hiding",CLASS_NAME_BACKDROP="offcanvas-backdrop",OPEN_SELECTOR=".offcanvas.show",EVENT_SHOW$3=`show${EVENT_KEY$3}`,EVENT_SHOWN$3=`shown${EVENT_KEY$3}`,EVENT_HIDE$3=`hide${EVENT_KEY$3}`,EVENT_HIDE_PREVENTED=`hidePrevented${EVENT_KEY$3}`,EVENT_HIDDEN$3=`hidden${EVENT_KEY$3}`,EVENT_RESIZE=`resize${EVENT_KEY$3}`,EVENT_CLICK_DATA_API$1=`click${EVENT_KEY$3}${DATA_API_KEY$1}`,EVENT_KEYDOWN_DISMISS=`keydown.dismiss${EVENT_KEY$3}`,SELECTOR_DATA_TOGGLE$1='[data-bs-toggle="offcanvas"]',Default$5={backdrop:!0,keyboard:!0,scroll:!1},DefaultType$5={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Offcanvas extends BaseComponent{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Default$5}static get DefaultType(){return DefaultType$5}static get NAME(){return NAME$6}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||EventHandler.trigger(this._element,EVENT_SHOW$3,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ScrollBarHelper().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(CLASS_NAME_SHOWING$1);const r=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(CLASS_NAME_SHOW$3),this._element.classList.remove(CLASS_NAME_SHOWING$1),EventHandler.trigger(this._element,EVENT_SHOWN$3,{relatedTarget:e})};this._queueCallback(r,this._element,!0)}hide(){if(!this._isShown||EventHandler.trigger(this._element,EVENT_HIDE$3).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(CLASS_NAME_HIDING),this._backdrop.hide();const n=()=>{this._element.classList.remove(CLASS_NAME_SHOW$3,CLASS_NAME_HIDING),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ScrollBarHelper().reset(),EventHandler.trigger(this._element,EVENT_HIDDEN$3)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED);return}this.hide()},n=Boolean(this._config.backdrop);return new Backdrop({className:CLASS_NAME_BACKDROP,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new FocusTrap({trapElement:this._element})}_addEventListeners(){EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,e=>{if(e.key===ESCAPE_KEY){if(this._config.keyboard){this.hide();return}EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED)}})}static jQueryInterface(e){return this.each(function(){const n=Offcanvas.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}EventHandler.on(document,EVENT_CLICK_DATA_API$1,SELECTOR_DATA_TOGGLE$1,function(t){const e=SelectorEngine.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),isDisabled(this))return;EventHandler.one(e,EVENT_HIDDEN$3,()=>{isVisible(this)&&this.focus()});const n=SelectorEngine.findOne(OPEN_SELECTOR);n&&n!==e&&Offcanvas.getInstance(n).hide(),Offcanvas.getOrCreateInstance(e).toggle(this)});EventHandler.on(window,EVENT_LOAD_DATA_API$2,()=>{for(const t of SelectorEngine.find(OPEN_SELECTOR))Offcanvas.getOrCreateInstance(t).show()});EventHandler.on(window,EVENT_RESIZE,()=>{for(const t of SelectorEngine.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Offcanvas.getOrCreateInstance(t).hide()});enableDismissTrigger(Offcanvas);defineJQueryPlugin(Offcanvas);const uriAttributes=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,DATA_URL_PATTERN=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,allowedAttribute=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?uriAttributes.has(n)?Boolean(SAFE_URL_PATTERN.test(t.nodeValue)||DATA_URL_PATTERN.test(t.nodeValue)):!0:e.filter(r=>r instanceof RegExp).some(r=>r.test(n))},ARIA_ATTRIBUTE_PATTERN=/^aria-[\w-]*$/i,DefaultAllowlist={"*":["class","dir","id","lang","role",ARIA_ATTRIBUTE_PATTERN],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function sanitizeHtml(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const s=new window.DOMParser().parseFromString(t,"text/html"),o=[].concat(...s.body.querySelectorAll("*"));for(const i of o){const d=i.nodeName.toLowerCase();if(!Object.keys(e).includes(d)){i.remove();continue}const l=[].concat(...i.attributes),u=[].concat(e["*"]||[],e[d]||[]);for(const _ of l)allowedAttribute(_,u)||i.removeAttribute(_.nodeName)}return s.body.innerHTML}const NAME$5="TemplateFactory",Default$4={allowList:DefaultAllowlist,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},DefaultType$4={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},DefaultContentType={entry:"(string|element|function|null)",selector:"(string|element)"};class TemplateFactory extends Config{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return Default$4}static get DefaultType(){return DefaultType$4}static get NAME(){return NAME$5}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,o]of Object.entries(this._config.content))this._setContent(e,o,s);const n=e.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&n.classList.add(...r.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,r]of Object.entries(e))super._typeCheckConfig({selector:n,entry:r},DefaultContentType)}_setContent(e,n,r){const s=SelectorEngine.findOne(r,e);if(!!s){if(n=this._resolvePossibleFunction(n),!n){s.remove();return}if(isElement(n)){this._putElementInTemplate(getElement(n),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(n);return}s.textContent=n}}_maybeSanitize(e){return this._config.sanitize?sanitizeHtml(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return execute(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const NAME$4="tooltip",DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),CLASS_NAME_FADE$2="fade",CLASS_NAME_MODAL="modal",CLASS_NAME_SHOW$2="show",SELECTOR_TOOLTIP_INNER=".tooltip-inner",SELECTOR_MODAL=`.${CLASS_NAME_MODAL}`,EVENT_MODAL_HIDE="hide.bs.modal",TRIGGER_HOVER="hover",TRIGGER_FOCUS="focus",TRIGGER_CLICK="click",TRIGGER_MANUAL="manual",EVENT_HIDE$2="hide",EVENT_HIDDEN$2="hidden",EVENT_SHOW$2="show",EVENT_SHOWN$2="shown",EVENT_INSERTED="inserted",EVENT_CLICK$1="click",EVENT_FOCUSIN$1="focusin",EVENT_FOCUSOUT$1="focusout",EVENT_MOUSEENTER="mouseenter",EVENT_MOUSELEAVE="mouseleave",AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:isRTL()?"left":"right",BOTTOM:"bottom",LEFT:isRTL()?"right":"left"},Default$3={allowList:DefaultAllowlist,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},DefaultType$3={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tooltip extends BaseComponent{constructor(e,n){if(typeof Popper>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Default$3}static get DefaultType(){return DefaultType$3}static get NAME(){return NAME$4}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),EventHandler.off(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOW$2)),r=(findShadowRoot(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!r)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:o}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(o.append(s),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_INSERTED))),this._popper=this._createPopper(s),s.classList.add(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))EventHandler.on(d,"mouseover",noop);const i=()=>{EventHandler.trigger(this._element,this.constructor.eventName(EVENT_SHOWN$2)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(i,this.tip,this._isAnimated())}hide(){if(!this._isShown()||EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDE$2)).defaultPrevented)return;if(this._getTipElement().classList.remove(CLASS_NAME_SHOW$2),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))EventHandler.off(s,"mouseover",noop);this._activeTrigger[TRIGGER_CLICK]=!1,this._activeTrigger[TRIGGER_FOCUS]=!1,this._activeTrigger[TRIGGER_HOVER]=!1,this._isHovered=null;const r=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),EventHandler.trigger(this._element,this.constructor.eventName(EVENT_HIDDEN$2)))};this._queueCallback(r,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(CLASS_NAME_FADE$2,CLASS_NAME_SHOW$2),n.classList.add(`bs-${this.constructor.NAME}-auto`);const r=getUID(this.constructor.NAME).toString();return n.setAttribute("id",r),this._isAnimated()&&n.classList.add(CLASS_NAME_FADE$2),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new TemplateFactory({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[SELECTOR_TOOLTIP_INNER]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(CLASS_NAME_FADE$2)}_isShown(){return this.tip&&this.tip.classList.contains(CLASS_NAME_SHOW$2)}_createPopper(e){const n=execute(this._config.placement,[this,e,this._element]),r=AttachmentMap[n.toUpperCase()];return createPopper(this._element,e,this._getPopperConfig(r))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return execute(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:r=>{this._getTipElement().setAttribute("data-popper-placement",r.state.placement)}}]};return{...n,...execute(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")EventHandler.on(this._element,this.constructor.eventName(EVENT_CLICK$1),this._config.selector,r=>{this._initializeOnDelegatedTarget(r).toggle()});else if(n!==TRIGGER_MANUAL){const r=n===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSEENTER):this.constructor.eventName(EVENT_FOCUSIN$1),s=n===TRIGGER_HOVER?this.constructor.eventName(EVENT_MOUSELEAVE):this.constructor.eventName(EVENT_FOCUSOUT$1);EventHandler.on(this._element,r,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusin"?TRIGGER_FOCUS:TRIGGER_HOVER]=!0,i._enter()}),EventHandler.on(this._element,s,this._config.selector,o=>{const i=this._initializeOnDelegatedTarget(o);i._activeTrigger[o.type==="focusout"?TRIGGER_FOCUS:TRIGGER_HOVER]=i._element.contains(o.relatedTarget),i._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},EventHandler.on(this._element.closest(SELECTOR_MODAL),EVENT_MODAL_HIDE,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");!e||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=Manipulator.getDataAttributes(this._element);for(const r of Object.keys(n))DISALLOWED_ATTRIBUTES.has(r)&&delete n[r];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:getElement(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,r]of Object.entries(this._config))this.constructor.Default[n]!==r&&(e[n]=r);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Tooltip.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}defineJQueryPlugin(Tooltip);const NAME$3="popover",SELECTOR_TITLE=".popover-header",SELECTOR_CONTENT=".popover-body",Default$2={...Tooltip.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},DefaultType$2={...Tooltip.DefaultType,content:"(null|string|element|function)"};class Popover extends Tooltip{static get Default(){return Default$2}static get DefaultType(){return DefaultType$2}static get NAME(){return NAME$3}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[SELECTOR_TITLE]:this._getTitle(),[SELECTOR_CONTENT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Popover.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}defineJQueryPlugin(Popover);const NAME$2="scrollspy",DATA_KEY$2="bs.scrollspy",EVENT_KEY$2=`.${DATA_KEY$2}`,DATA_API_KEY=".data-api",EVENT_ACTIVATE=`activate${EVENT_KEY$2}`,EVENT_CLICK=`click${EVENT_KEY$2}`,EVENT_LOAD_DATA_API$1=`load${EVENT_KEY$2}${DATA_API_KEY}`,CLASS_NAME_DROPDOWN_ITEM="dropdown-item",CLASS_NAME_ACTIVE$1="active",SELECTOR_DATA_SPY='[data-bs-spy="scroll"]',SELECTOR_TARGET_LINKS="[href]",SELECTOR_NAV_LIST_GROUP=".nav, .list-group",SELECTOR_NAV_LINKS=".nav-link",SELECTOR_NAV_ITEMS=".nav-item",SELECTOR_LIST_ITEMS=".list-group-item",SELECTOR_LINK_ITEMS=`${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`,SELECTOR_DROPDOWN=".dropdown",SELECTOR_DROPDOWN_TOGGLE$1=".dropdown-toggle",Default$1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},DefaultType$1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ScrollSpy extends BaseComponent{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Default$1}static get DefaultType(){return DefaultType$1}static get NAME(){return NAME$2}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=getElement(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(EventHandler.off(this._config.target,EVENT_CLICK),EventHandler.on(this._config.target,EVENT_CLICK,SELECTOR_TARGET_LINKS,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const r=this._rootElement||window,s=n.offsetTop-this._element.offsetTop;if(r.scrollTo){r.scrollTo({top:s,behavior:"smooth"});return}r.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=i=>this._targetLinks.get(`#${i.target.id}`),r=i=>{this._previousScrollData.visibleEntryTop=i.target.offsetTop,this._process(n(i))},s=(this._rootElement||document.documentElement).scrollTop,o=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const i of e){if(!i.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(i));continue}const d=i.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(o&&d){if(r(i),!s)return;continue}!o&&!d&&r(i)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=SelectorEngine.find(SELECTOR_TARGET_LINKS,this._config.target);for(const n of e){if(!n.hash||isDisabled(n))continue;const r=SelectorEngine.findOne(n.hash,this._element);isVisible(r)&&(this._targetLinks.set(n.hash,n),this._observableSections.set(n.hash,r))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(CLASS_NAME_ACTIVE$1),this._activateParents(e),EventHandler.trigger(this._element,EVENT_ACTIVATE,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(CLASS_NAME_DROPDOWN_ITEM)){SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE$1,e.closest(SELECTOR_DROPDOWN)).classList.add(CLASS_NAME_ACTIVE$1);return}for(const n of SelectorEngine.parents(e,SELECTOR_NAV_LIST_GROUP))for(const r of SelectorEngine.prev(n,SELECTOR_LINK_ITEMS))r.classList.add(CLASS_NAME_ACTIVE$1)}_clearActiveClass(e){e.classList.remove(CLASS_NAME_ACTIVE$1);const n=SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE$1}`,e);for(const r of n)r.classList.remove(CLASS_NAME_ACTIVE$1)}static jQueryInterface(e){return this.each(function(){const n=ScrollSpy.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(window,EVENT_LOAD_DATA_API$1,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_SPY))ScrollSpy.getOrCreateInstance(t)});defineJQueryPlugin(ScrollSpy);const NAME$1="tab",DATA_KEY$1="bs.tab",EVENT_KEY$1=`.${DATA_KEY$1}`,EVENT_HIDE$1=`hide${EVENT_KEY$1}`,EVENT_HIDDEN$1=`hidden${EVENT_KEY$1}`,EVENT_SHOW$1=`show${EVENT_KEY$1}`,EVENT_SHOWN$1=`shown${EVENT_KEY$1}`,EVENT_CLICK_DATA_API=`click${EVENT_KEY$1}`,EVENT_KEYDOWN=`keydown${EVENT_KEY$1}`,EVENT_LOAD_DATA_API=`load${EVENT_KEY$1}`,ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",CLASS_NAME_ACTIVE="active",CLASS_NAME_FADE$1="fade",CLASS_NAME_SHOW$1="show",CLASS_DROPDOWN="dropdown",SELECTOR_DROPDOWN_TOGGLE=".dropdown-toggle",SELECTOR_DROPDOWN_MENU=".dropdown-menu",NOT_SELECTOR_DROPDOWN_TOGGLE=":not(.dropdown-toggle)",SELECTOR_TAB_PANEL='.list-group, .nav, [role="tablist"]',SELECTOR_OUTER=".nav-item, .list-group-item",SELECTOR_INNER=`.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role="tab"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`,SELECTOR_DATA_TOGGLE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',SELECTOR_INNER_ELEM=`${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`,SELECTOR_DATA_TOGGLE_ACTIVE=`.${CLASS_NAME_ACTIVE}[data-bs-toggle="tab"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="pill"], .${CLASS_NAME_ACTIVE}[data-bs-toggle="list"]`;class Tab extends BaseComponent{constructor(e){super(e),this._parent=this._element.closest(SELECTOR_TAB_PANEL),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),EventHandler.on(this._element,EVENT_KEYDOWN,n=>this._keydown(n)))}static get NAME(){return NAME$1}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),r=n?EventHandler.trigger(n,EVENT_HIDE$1,{relatedTarget:e}):null;EventHandler.trigger(e,EVENT_SHOW$1,{relatedTarget:n}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(CLASS_NAME_ACTIVE),this._activate(SelectorEngine.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(CLASS_NAME_SHOW$1);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),EventHandler.trigger(e,EVENT_SHOWN$1,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(CLASS_NAME_FADE$1))}_deactivate(e,n){if(!e)return;e.classList.remove(CLASS_NAME_ACTIVE),e.blur(),this._deactivate(SelectorEngine.getElementFromSelector(e));const r=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(CLASS_NAME_SHOW$1);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),EventHandler.trigger(e,EVENT_HIDDEN$1,{relatedTarget:n})};this._queueCallback(r,e,e.classList.contains(CLASS_NAME_FADE$1))}_keydown(e){if(![ARROW_LEFT_KEY,ARROW_RIGHT_KEY,ARROW_UP_KEY,ARROW_DOWN_KEY].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=[ARROW_RIGHT_KEY,ARROW_DOWN_KEY].includes(e.key),r=getNextActiveElement(this._getChildren().filter(s=>!isDisabled(s)),e.target,n,!0);r&&(r.focus({preventScroll:!0}),Tab.getOrCreateInstance(r).show())}_getChildren(){return SelectorEngine.find(SELECTOR_INNER_ELEM,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const r of n)this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),r=this._getOuterElement(e);e.setAttribute("aria-selected",n),r!==e&&this._setAttributeIfNotExists(r,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=SelectorEngine.getElementFromSelector(e);!n||(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const r=this._getOuterElement(e);if(!r.classList.contains(CLASS_DROPDOWN))return;const s=(o,i)=>{const d=SelectorEngine.findOne(o,r);d&&d.classList.toggle(i,n)};s(SELECTOR_DROPDOWN_TOGGLE,CLASS_NAME_ACTIVE),s(SELECTOR_DROPDOWN_MENU,CLASS_NAME_SHOW$1),r.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,r){e.hasAttribute(n)||e.setAttribute(n,r)}_elemIsActive(e){return e.classList.contains(CLASS_NAME_ACTIVE)}_getInnerElement(e){return e.matches(SELECTOR_INNER_ELEM)?e:SelectorEngine.findOne(SELECTOR_INNER_ELEM,e)}_getOuterElement(e){return e.closest(SELECTOR_OUTER)||e}static jQueryInterface(e){return this.each(function(){const n=Tab.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!isDisabled(this)&&Tab.getOrCreateInstance(this).show()});EventHandler.on(window,EVENT_LOAD_DATA_API,()=>{for(const t of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE))Tab.getOrCreateInstance(t)});defineJQueryPlugin(Tab);const NAME="toast",DATA_KEY="bs.toast",EVENT_KEY=`.${DATA_KEY}`,EVENT_MOUSEOVER=`mouseover${EVENT_KEY}`,EVENT_MOUSEOUT=`mouseout${EVENT_KEY}`,EVENT_FOCUSIN=`focusin${EVENT_KEY}`,EVENT_FOCUSOUT=`focusout${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,CLASS_NAME_FADE="fade",CLASS_NAME_HIDE="hide",CLASS_NAME_SHOW="show",CLASS_NAME_SHOWING="showing",DefaultType={animation:"boolean",autohide:"boolean",delay:"number"},Default={animation:!0,autohide:!0,delay:5e3};class Toast extends BaseComponent{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get NAME(){return NAME}show(){if(EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(CLASS_NAME_FADE);const n=()=>{this._element.classList.remove(CLASS_NAME_SHOWING),EventHandler.trigger(this._element,EVENT_SHOWN),this._maybeScheduleHide()};this._element.classList.remove(CLASS_NAME_HIDE),reflow(this._element),this._element.classList.add(CLASS_NAME_SHOW,CLASS_NAME_SHOWING),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;const n=()=>{this._element.classList.add(CLASS_NAME_HIDE),this._element.classList.remove(CLASS_NAME_SHOWING,CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_HIDDEN)};this._element.classList.add(CLASS_NAME_SHOWING),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(CLASS_NAME_SHOW),super.dispose()}isShown(){return this._element.classList.contains(CLASS_NAME_SHOW)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const r=e.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){EventHandler.on(this._element,EVENT_MOUSEOVER,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_MOUSEOUT,e=>this._onInteraction(e,!1)),EventHandler.on(this._element,EVENT_FOCUSIN,e=>this._onInteraction(e,!0)),EventHandler.on(this._element,EVENT_FOCUSOUT,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Toast.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}enableDismissTrigger(Toast);defineJQueryPlugin(Toast);const _hoisted_1$U={id:"trackContextModal",class:"modal",tabindex:"-1"},_hoisted_2$U={class:"modal-dialog"},_hoisted_3$T={class:"modal-content"},_hoisted_4$R=createBaseVNode("span",{class:"bi bi-play-fill me-1"},null,-1),_hoisted_5$Q=createBaseVNode("span",{class:"bi bi-fast-forward-fill me-1"},null,-1),_hoisted_6$L=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_7$H=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_8$D=createBaseVNode("span",{class:"bi bi-music-note-list me-1"},null,-1),_hoisted_9$D=createBaseVNode("span",{class:"bi bi-music-note-beamed me-1"},null,-1),_hoisted_10$C=createBaseVNode("span",{class:"bi bi-vinyl-fill me-1"},null,-1),_hoisted_11$z=createBaseVNode("span",{class:"bi bi-person-fill me-1"},null,-1),_hoisted_12$w=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_hoisted_13$v=createBaseVNode("span",{class:"bi bi-download me-1"},null,-1),_sfc_main$Z={__name:"TrackContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#trackContextModal")),o=document.querySelector("#trackMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$U,[createBaseVNode("div",_hoisted_2$U,[createBaseVNode("div",_hoisted_3$T,[createBaseVNode("ul",{id:"trackMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","playTrack"))},[_hoisted_4$R,createTextVNode("Play")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","playTrackNext"))},[_hoisted_5$Q,createTextVNode("Play next")])]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","addToLoved"))},[_hoisted_6$L,createTextVNode("Like")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","removeFromLoved"))},[_hoisted_7$H,createTextVNode("Unlike")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[4]||(c[4]=f=>n("context-menu-event","addTrackToQueue"))},[_hoisted_8$D,createTextVNode("Add to queue")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[5]||(c[5]=f=>n("context-menu-event","addTrackToPlaylist"))},[_hoisted_9$D,createTextVNode("Add to playlist")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[6]||(c[6]=f=>n("context-menu-event","openAlbumPage"))},[_hoisted_10$C,createTextVNode("Album page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[7]||(c[7]=f=>n("context-menu-event","openArtistPage"))},[_hoisted_11$z,createTextVNode("Artist page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[8]||(c[8]=f=>n("context-menu-event","shareTrack"))},[_hoisted_12$w,createTextVNode("Share")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[9]||(c[9]=f=>n("context-menu-event","downloadTrack"))},[_hoisted_13$v,createTextVNode("Download")])])],4)])])]))}},_hoisted_1$T={id:"albumContextModal",class:"modal",tabindex:"-1"},_hoisted_2$T={class:"modal-dialog"},_hoisted_3$S={class:"modal-content"},_hoisted_4$Q=createBaseVNode("span",{class:"bi bi-play-fill me-1"},null,-1),_hoisted_5$P=createBaseVNode("span",{class:"bi bi-fast-forward-fill me-1"},null,-1),_hoisted_6$K=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_7$G=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_8$C=createBaseVNode("span",{class:"bi bi-music-note-list me-1"},null,-1),_hoisted_9$C=createBaseVNode("span",{class:"bi bi-vinyl-fill me-1"},null,-1),_hoisted_10$B=createBaseVNode("span",{class:"bi bi-person-fill me-1"},null,-1),_hoisted_11$y=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_sfc_main$Y={__name:"AlbumContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#albumContextModal")),o=document.querySelector("#albumMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$T,[createBaseVNode("div",_hoisted_2$T,[createBaseVNode("div",_hoisted_3$S,[createBaseVNode("ul",{id:"albumMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","playAlbum"))},[_hoisted_4$Q,createTextVNode("Play")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","playAlbumNext"))},[_hoisted_5$P,createTextVNode("Play next")])]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","addToLoved"))},[_hoisted_6$K,createTextVNode("Like")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","removeFromLoved"))},[_hoisted_7$G,createTextVNode("Unlike")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[4]||(c[4]=f=>n("context-menu-event","addAlbumToQueue"))},[_hoisted_8$C,createTextVNode("Add to queue")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[5]||(c[5]=f=>n("context-menu-event","openAlbumPage"))},[_hoisted_9$C,createTextVNode("Album page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[6]||(c[6]=f=>n("context-menu-event","openArtistPage"))},[_hoisted_10$B,createTextVNode("Artist page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[7]||(c[7]=f=>n("context-menu-event","shareAlbum"))},[_hoisted_11$y,createTextVNode("Share")])])],4)])])]))}},_hoisted_1$S={id:"artistContextModal",class:"modal",tabindex:"-1"},_hoisted_2$S={class:"modal-dialog"},_hoisted_3$R={class:"modal-content"},_hoisted_4$P=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_5$O=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_6$J=createBaseVNode("span",{class:"bi bi-person-fill me-1"},null,-1),_hoisted_7$F=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_sfc_main$X={__name:"ArtistContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#artistContextModal")),o=document.querySelector("#artistMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$S,[createBaseVNode("div",_hoisted_2$S,[createBaseVNode("div",_hoisted_3$R,[createBaseVNode("ul",{id:"artistMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","addToLoved"))},[_hoisted_4$P,createTextVNode("Like")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","removeFromLoved"))},[_hoisted_5$O,createTextVNode("Unlike")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","openArtistPage"))},[_hoisted_6$J,createTextVNode("Artist page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","shareArtist"))},[_hoisted_7$F,createTextVNode("Share")])])],4)])])]))}},_hoisted_1$R={id:"playlistContextModal",class:"modal",tabindex:"-1"},_hoisted_2$R={class:"modal-dialog"},_hoisted_3$Q={class:"modal-content"},_hoisted_4$O=createBaseVNode("span",{class:"bi bi-play-fill me-1"},null,-1),_hoisted_5$N=createBaseVNode("span",{class:"bi bi-fast-forward-fill me-1"},null,-1),_hoisted_6$I=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_7$E=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_8$B=createBaseVNode("span",{class:"bi bi-music-note-list me-1"},null,-1),_hoisted_9$B=createBaseVNode("span",{class:"bi bi-music-note-beamed me-1"},null,-1),_hoisted_10$A=createBaseVNode("span",{class:"bi bi-person-fill me-1"},null,-1),_hoisted_11$x=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_sfc_main$W={__name:"PlaylistContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#playlistContextModal")),o=document.querySelector("#playlistMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$R,[createBaseVNode("div",_hoisted_2$R,[createBaseVNode("div",_hoisted_3$Q,[createBaseVNode("ul",{id:"playlistMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","playPlaylist"))},[_hoisted_4$O,createTextVNode("Play")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","playPlaylistNext"))},[_hoisted_5$N,createTextVNode("Play next")])]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","addToLoved"))},[_hoisted_6$I,createTextVNode("Like")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","removeFromLoved"))},[_hoisted_7$E,createTextVNode("Unlike")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[4]||(c[4]=f=>n("context-menu-event","addPlaylistToQueue"))},[_hoisted_8$B,createTextVNode("Add to queue")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[5]||(c[5]=f=>n("context-menu-event","openPlaylistPage"))},[_hoisted_9$B,createTextVNode("Playlist page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[6]||(c[6]=f=>n("context-menu-event","openAuthorPage"))},[_hoisted_10$A,createTextVNode("Author page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[7]||(c[7]=f=>n("context-menu-event","sharePlaylist"))},[_hoisted_11$x,createTextVNode("Share")])])],4)])])]))}},_hoisted_1$Q={id:"stationContextModal",class:"modal",tabindex:"-1"},_hoisted_2$Q={class:"modal-dialog"},_hoisted_3$P={class:"modal-content"},_hoisted_4$N=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_5$M=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_6$H=createBaseVNode("span",{class:"bi bi-broadcast me-1"},null,-1),_hoisted_7$D=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_sfc_main$V={__name:"StationContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#stationContextModal")),o=document.querySelector("#stationMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$Q,[createBaseVNode("div",_hoisted_2$Q,[createBaseVNode("div",_hoisted_3$P,[createBaseVNode("ul",{id:"stationMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","addToLoved"))},[_hoisted_4$N,createTextVNode("Like")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","removeFromLoved"))},[_hoisted_5$M,createTextVNode("Unlike")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","openStationPage"))},[_hoisted_6$H,createTextVNode("Station page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","shareTrack"))},[_hoisted_7$D,createTextVNode("Share")])])],4)])])]))}},_hoisted_1$P={id:"userContextModal",class:"modal",tabindex:"-1"},_hoisted_2$P={class:"modal-dialog"},_hoisted_3$O={class:"modal-content"},_hoisted_4$M=createBaseVNode("span",{class:"bi bi-star me-1"},null,-1),_hoisted_5$L=createBaseVNode("span",{class:"bi bi-star-fill me-1"},null,-1),_hoisted_6$G=createBaseVNode("span",{class:"bi bi-person-fill me-1"},null,-1),_hoisted_7$C=createBaseVNode("span",{class:"bi bi-share-fill me-1"},null,-1),_sfc_main$U={__name:"UserContextModal",props:{loved:{type:Boolean,required:!0}},emits:["context-menu-event"],setup(t,{expose:e,emit:n}){const r=t;let s=null,o=null;const i=ref(0),d=ref(0);async function l(a,c){let f=a,m=c,v=o.offsetWidth,g=o.offsetHeight;f+v>=window.innerWidth?i.value=window.innerWidth-f:i.value=window.innerWidth-f-v,m+g>=window.innerHeight?d.value=window.innerHeight-m:d.value=window.innerHeight-m-g}async function u(a,c){await s.show(),l(a,c)}async function _(){s.hide()}return e({show:u,hide:_}),onMounted(()=>{s=new Modal(document.querySelector("#userContextModal")),o=document.querySelector("#userMenu"),o.addEventListener("click",()=>{s.hide()})}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$P,[createBaseVNode("div",_hoisted_2$P,[createBaseVNode("div",_hoisted_3$O,[createBaseVNode("ul",{id:"userMenu",class:"dropdown-menu shadow show position-fixed",style:normalizeStyle({bottom:d.value+"px",right:i.value+"px"})},[withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[0]||(c[0]=f=>n("context-menu-event","addToFriends"))},[_hoisted_4$M,createTextVNode("Add Friend")])],512),[[vShow,!r.loved]]),withDirectives(createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[1]||(c[1]=f=>n("context-menu-event","removeFromFriends"))},[_hoisted_5$L,createTextVNode("Remove Friend")])],512),[[vShow,r.loved]]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[2]||(c[2]=f=>n("context-menu-event","openUserPage"))},[_hoisted_6$G,createTextVNode("User page")])]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:c[3]||(c[3]=f=>n("context-menu-event","shareUser"))},[_hoisted_7$C,createTextVNode("Share")])])],4)])])]))}},_hoisted_1$O={id:"playlistSelection",class:"modal",tabindex:"-1"},_hoisted_2$O={class:"modal-dialog modal-dialog-centered"},_hoisted_3$N={class:"modal-content theme-bg theme-border"},_hoisted_4$L={class:"modal-body pt-0"},_hoisted_5$K=createBaseVNode("div",{class:"d-flex justify-content-center pb-2"},[createBaseVNode("h3",{class:"theme-color fw-bold"},"Add to playlist")],-1),_hoisted_6$F={class:"list-group"},_hoisted_7$B=["onClick"],_hoisted_8$A={class:"d-flex flex-fill align-items-center"},_hoisted_9$A=["src"],_hoisted_10$z={class:"d-flex flex-column"},_hoisted_11$w={class:"theme-color fw-bold"},_hoisted_12$v={class:"fst-italic text-muted"},_sfc_main$T={__name:"PlaylistSelection",setup(t,{expose:e}){const n=ref(null),r=ref(null),s=ref([]);function o(a){return a?ft.server+"/"+a:"/images/cassette.svg"}async function i(a){a.target.src="/images/cassette.svg"}async function d(a){if(String(r.value).includes("@")){let c=r.value.split("@")[1];ft.addTrackToPlaylist(r.value,a,c).then(f=>{f.hasOwnProperty("success")&&(_(),notify({title:"Added to playlist."}))});return}ft.addTrackToPlaylist(r.value,a).then(c=>{c.hasOwnProperty("success")&&(_(),notify({title:"Added to playlist."}))})}async function l(){let a=await ft.API(`/author/${ft.username}/playlists`);!a||(s.value=a.playlists)}function u(a){l(),r.value=a,n.value.show()}function _(){n.value.hide()}return e({show:u,hide:_}),onMounted(()=>{n.value=new Modal(document.querySelector("#playlistSelection"))}),(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$O,[createBaseVNode("div",_hoisted_2$O,[createBaseVNode("div",_hoisted_3$N,[createBaseVNode("div",{class:"d-flex justify-content-end p-3 pb-2"},[createBaseVNode("button",{type:"button",class:"btn-close theme-filter",onClick:_,"aria-label":"Close"})]),createBaseVNode("div",_hoisted_4$L,[_hoisted_5$K,createBaseVNode("ul",_hoisted_6$F,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,f=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item foreground-content clickable rounded d-flex p-1",onClick:m=>d(f.id)},[createBaseVNode("div",_hoisted_8$A,[createBaseVNode("img",{src:o(f.cover),class:"playlist-selection-img me-2",onError:i},null,40,_hoisted_9$A),createBaseVNode("div",_hoisted_10$z,[createBaseVNode("span",_hoisted_11$w,toDisplayString(f.title),1),createBaseVNode("span",_hoisted_12$v,toDisplayString(f.author),1)])])],8,_hoisted_7$B))),256))])])])])]))}},_sfc_main$S={__name:"ContextMenu",setup(t,{expose:e}){const n=useRouter(),r=ref(null),s=ref(!1),o=ref(null),i=ref(null),d=ref(null),l=ref(null),u=ref(null),_=ref(null),a=ref(null),c=ref(null);async function f(b){if(r.value=b.item,r.value.server?v():m(),r.value.type=="track"){i.value.show(b.event.x,b.event.y);return}if(r.value.type=="album"){d.value.show(b.event.x,b.event.y);return}if(r.value.type=="artist"){l.value.show(b.event.x,b.event.y);return}if(r.value.type=="playlist"){u.value.show(b.event.x,b.event.y);return}if(r.value.type=="station"){_.value.show(b.event.x,b.event.y);return}if(r.value.type=="user"){a.value.show(b.event.x,b.event.y);return}}async function m(){if(r.value.type=="user"){ft.API(`/${r.value.type}/${r.value.title}/loved`).then(b=>{s.value=b.loved});return}ft.API(`/${r.value.type}/${r.value.id}/loved`).then(b=>{s.value=b.loved})}async function v(){if(r.value.type=="user"){ft.API(`/${r.value.type}/${r.value.title}@${r.value.server}/loved`).then(b=>{s.value=b.loved});return}ft.API(`/${r.value.type}/${r.value.id}@${r.value.server}/loved`).then(b=>{s.value=b.loved})}async function g(b){if(b=="openPlaylistPage"){n.push(`/playlist/${r.value.id}@${r.value.server}`);return}if(b=="openAlbumPage"){if(r.value.type=="album"){n.push(`/album/${r.value.id}@${r.value.server}`);return}r.value.type=="track"&&ft.fAPI(r.value.server,`/track/${r.value.id}`).then(N=>{n.push(`/album/${N.album.id}@${r.value.server}`)});return}if(b=="openArtistPage"){if(r.value.type=="artist"){n.push(`/artist/${r.value.id}@${r.value.server}`);return}if(r.value.type=="album"){ft.fAPI(r.value.server,`/album/${r.value.id}`).then(N=>{n.push(`/artist/${N.artist.id}@${r.value.server}`)});return}r.value.type=="track"&&ft.fAPI(r.value.server,`/track/${r.value.id}`).then(N=>{n.push(`/artist/${N.artist.id}@${r.value.server}`)});return}if(b=="openUserPage"){n.push(`/user/${r.value.title}@${r.value.server}`);return}if(b=="openAuthorPage"){ft.fAPI(r.value.server,`/playlist/${r.value.id}/basic`).then(N=>{n.push(`/user/${N.playlist.author}@${r.value.server}`)});return}if(b=="addToFriends"){ft.add_friend(`${r.value.title}@${r.value.server}`,r.value.server).then(()=>{notify({title:"Added to friends."})});return}if(b=="removeFromFriends"){ft.remove_friend(`${r.value.title}@${r.value.server}`,r.value.server).then(()=>{notify({title:"Removed from friends."})});return}if(b=="addToLoved"){ft.love(r.value.type,`${r.value.id}@${r.value.server}`,r.value.server).then(()=>{notify({title:"Added to favorites."})});return}if(b=="removeFromLoved"){ft.unlove(r.value.type,`${r.value.id}@${r.value.server}`,r.value.server).then(()=>{notify({title:"Removed from favorites."})});return}if(b=="playTrack"){action({func:async function(){ft.playTrack(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playTrack"});return}if(b=="playAlbum"){action({func:async function(){ft.playAlbum(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playAlbum"});return}if(b=="playPlaylist"){action({func:async function(){ft.playPlaylist(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playPlaylist"});return}if(b=="addTrackToQueue"){action({func:async function(){ft.queueTrack(r.value.id,r.value.server).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id,r.value.server],operation:"addTrackToQueue"});return}if(b=="addAlbumToQueue"){action({func:async function(){ft.queueAlbum(r.value.id,r.value.server).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id,r.value.server],operation:"addAlbumToQueue"});return}if(b=="addPlaylistToQueue"){action({func:async function(){ft.queuePlaylist(r.value.id,r.value.server).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id,r.value.server],operation:"addPlaylistToQueue"});return}if(b=="addTrackToPlaylist"){c.value.show(`${r.value.id}@${r.value.server}`);return}if(b=="playTrackNext"){action({func:async function(){ft.playTrackNext(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playTrackNext"});return}if(b=="playAlbumNext"){action({func:async function(){ft.playAlbumNext(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playAlbumNext"});return}if(b=="playPlaylistNext"){action({func:async function(){ft.playPlaylistNext(r.value.id,r.value.server)},object:[r.value.id,r.value.server],operation:"playPlaylistNext"});return}if(b=="downloadTrack"){let N=await ft.fAPI(r.value.server,"/track/"+r.value.id+"/basic"),x=await ft.downloadTrack(r.value.id,r.value.server);o.value.href=window.URL.createObjectURL(x),o.value.download=`${N.track.disc_number} - ${N.track.track_position} - ${N.track.title}.flac`,o.value.click();return}if(b=="shareArtist"){navigator.clipboard.writeText(`https://forte.buzl.uk/artist/${r.value.id}@${r.value.server}`).then(function(){notify({title:"Copied to clipboard."})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareAlbum"){navigator.clipboard.writeText(`https://forte.buzl.uk/album/${r.value.id}@${r.value.server}`).then(function(){notify({title:"Copied to clipboard."})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareTrack"){navigator.clipboard.writeText(`https://forte.buzl.uk/track/${r.value.id}@${r.value.server}`).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="sharePlaylist"){navigator.clipboard.writeText(`https://forte.buzl.uk/playlist/${r.value.id}@${r.value.server}`).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareUser"){navigator.clipboard.writeText(`https://forte.buzl.uk/user/${r.value.title}@${r.value.server}`).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}}async function y(b){if(r.value.server){g(b);return}if(b=="openPlaylistPage"){n.push(`/playlist/${r.value.id}`);return}if(b=="openAlbumPage"){if(r.value.type=="album"){n.push(`/album/${r.value.id}`);return}r.value.type=="track"&&ft.API(`/track/${r.value.id}`).then(N=>{n.push(`/album/${N.album.id}`)});return}if(b=="openArtistPage"){if(r.value.type=="artist"){n.push(`/artist/${r.value.id}`);return}if(r.value.type=="album"){ft.API(`/album/${r.value.id}`).then(N=>{n.push(`/artist/${N.artist.id}`)});return}r.value.type=="track"&&ft.API(`/track/${r.value.id}`).then(N=>{n.push(`/artist/${N.artist.id}`)});return}if(b=="openUserPage"){n.push(`/user/${r.value.title}`);return}if(b=="openAuthorPage"){n.push(`/user/${r.value.author}`);return}if(b=="addToFriends"){ft.add_friend(r.value.title).then(()=>{notify({title:"Added to friends."})});return}if(b=="removeFromFriends"){ft.remove_friend(r.value.title).then(()=>{notify({title:"Removed from friends."})});return}if(b=="addToLoved"){ft.love(r.value.type,r.value.id).then(()=>{notify({title:"Added to favorites."})});return}if(b=="removeFromLoved"){ft.unlove(r.value.type,r.value.id).then(()=>{notify({title:"Removed from favorites."})});return}if(b=="playTrack"){action({func:async function(){ft.playTrack(r.value.id)},object:[r.value.id],operation:"playTrack"});return}if(b=="playAlbum"){action({func:async function(){ft.playAlbum(r.value.id)},object:[r.value.id],operation:"playAlbum"});return}if(b=="playPlaylist"){action({func:async function(){ft.playPlaylist(r.value.id)},object:[r.value.id],operation:"playPlaylist"});return}if(b=="addTrackToQueue"){action({func:async function(){ft.queueTrack(r.value.id).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id],operation:"addTrackToQueue"});return}if(b=="addAlbumToQueue"){action({func:async function(){ft.queueAlbum(r.value.id).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id],operation:"addAlbumToQueue"});return}if(b=="addPlaylistToQueue"){action({func:async function(){ft.queuePlaylist(r.value.id).then(()=>{notify({title:"Added to the queue."})})},object:[r.value.id],operation:"addPlaylistToQueue"});return}if(b=="addTrackToPlaylist"){c.value.show(r.value.id);return}if(b=="playTrackNext"){action({func:async function(){ft.playTrackNext(r.value.id)},object:[r.value.id],operation:"playTrackNext"});return}if(b=="playAlbumNext"){action({func:async function(){ft.playAlbumNext(r.value.id)},object:[r.value.id],operation:"playAlbumNext"});return}if(b=="playPlaylistNext"){action({func:async function(){ft.playPlaylistNext(r.value.id)},object:[r.value.id],operation:"playPlaylistNext"});return}if(b=="downloadTrack"){let N=await ft.API("/track/"+r.value.id+"/basic"),x=await ft.downloadTrack(r.value.id);o.value.href=window.URL.createObjectURL(x),o.value.download=`${N.track.disc_number} - ${N.track.track_position} - ${N.track.title}.flac`,o.value.click();return}if(b=="addFriend"){ft.addFriend(r.value.title).then(()=>{notify({title:"Added to friends."})});return}if(b=="shareArtist"){navigator.clipboard.writeText("https://forte.buzl.uk/artist/"+r.value.id).then(function(){notify({title:"Copied to clipboard."})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareAlbum"){navigator.clipboard.writeText("https://forte.buzl.uk/album/"+r.value.id).then(function(){notify({title:"Copied to clipboard."})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareTrack"){navigator.clipboard.writeText("https://forte.buzl.uk/track/"+r.value.id).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="sharePlaylist"){navigator.clipboard.writeText("https://forte.buzl.uk/playlist/"+r.value.id).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}if(b=="shareUser"){navigator.clipboard.writeText("https://forte.buzl.uk/user/"+r.value.title).then(function(){notify({title:"Copied to clipboard"})},function(N){console.error("Async: Could not copy text: ",N)});return}}return e({right_click:f}),onMounted(()=>{window.addEventListener("right_click",b=>{b.detail.event.preventDefault(),f(b.detail)})}),(b,N)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$Z,{ref_key:"trackContextModal",ref:i,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createVNode(_sfc_main$Y,{ref_key:"albumContextModal",ref:d,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createVNode(_sfc_main$X,{ref_key:"artistContextModal",ref:l,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createVNode(_sfc_main$W,{ref_key:"playlistContextModal",ref:u,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createVNode(_sfc_main$V,{ref_key:"stationContextModal",ref:_,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createVNode(_sfc_main$U,{ref_key:"userContextModal",ref:a,onContextMenuEvent:y,loved:s.value},null,8,["loved"]),createBaseVNode("a",{ref_key:"downloadLink",ref:o,class:"visually-hidden",href:""},null,512),createVNode(_sfc_main$T,{ref_key:"playlistSelection",ref:c},null,512)],64))}},_hoisted_1$N={class:"modal-dialog modal-dialog-centered"},_hoisted_2$N={class:"modal-content"},_hoisted_3$M={class:"modal-header"},_hoisted_4$K={class:"modal-title fw-bold",id:"staticBackdropLabel"},_hoisted_5$J=createBaseVNode("span",{class:"fw-bold"},"The server is down at the moment.",-1),_hoisted_6$E=createBaseVNode("span",{class:"mb-2"},"You can wait for a while but you can also reload or reset the connection.",-1),_sfc_main$R={__name:"Offline",setup(t){let e=null;const n=ref(null);function r(){return JSON.parse(localStorage.getItem("server"))}async function s(){console.log("Reloading..."),window.location.reload()}async function o(){["init","offline","session","server","username","token","volume","groupSession","groupSessionID"].map(i=>{localStorage.removeItem(i)}),sessionStorage.clear(),window.location.replace("/")}return onMounted(()=>{e=new Modal(n.value,{keyboard:!1}),JSON.parse(localStorage.getItem("offline"))&&e.show()}),(i,d)=>(openBlock(),createElementBlock("div",{ref_key:"modalEl",ref:n,class:"modal fade p-2",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[createBaseVNode("div",_hoisted_1$N,[createBaseVNode("div",_hoisted_2$N,[createBaseVNode("div",_hoisted_3$M,[createBaseVNode("div",null,[createBaseVNode("h5",_hoisted_4$K,[createBaseVNode("mark",null,toDisplayString(r()),1)]),_hoisted_5$J])]),createBaseVNode("div",{class:"modal-body d-flex flex-column"},[_hoisted_6$E,createBaseVNode("button",{class:"btn btn-dark mb-2",onClick:s},"Reload"),createBaseVNode("button",{class:"btn btn-danger",onClick:o},"Log out")])])])],512))}},_hoisted_1$M={class:"modal-dialog modal-dialog-centered"},_hoisted_2$M={class:"modal-content shadow"},_hoisted_3$L=createBaseVNode("div",{class:"modal-header"},[createBaseVNode("h5",{class:"modal-title"},"Editing Account"),createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_hoisted_4$J={key:0,class:"modal-body"},_hoisted_5$I={class:"d-flex flex-fill flex-column"},_hoisted_6$D={class:"input-group flex-nowrap"},_hoisted_7$A=createBaseVNode("span",{class:"input-group-text bi bi-universal-access"},null,-1),_hoisted_8$z=["value"],_hoisted_9$z={class:"input-group flex-nowrap"},_hoisted_10$y=createBaseVNode("span",{class:"input-group-text bi bi-person-circle"},null,-1),_hoisted_11$v=["value"],_hoisted_12$u={class:"input-group flex-nowrap mb-3"},_hoisted_13$u=createBaseVNode("span",{class:"input-group-text bi bi-key-fill"},null,-1),_hoisted_14$u=["value","onKeypress"],_sfc_main$Q={__name:"AccountEdit",setup(t,{expose:e}){let n=null;const r=ref(null),s=ref(null),o=ref(null),i=ref(null),d=ref(null);async function l(){n.show()}async function u(){n.hide()}async function _(c){s.value=c}async function a(){let c={server:o.value.value,username:i.value.value,token:d.value.value},f=JSON.parse(localStorage.getItem("accounts"));f=f.filter(m=>m.server!=s.value.server&&m.username!=s.value.username),f.push(c),localStorage.setItem("accounts",JSON.stringify(f)),document.querySelector("#savedAccounts").classList.remove("show"),document.querySelector(".accordion-button").classList.add("collapsed"),u()}return e({show:l,hide:u,edit:_}),onMounted(()=>{n=new Modal(r.value)}),(c,f)=>(openBlock(),createElementBlock("div",{ref_key:"modalEl",ref:r,class:"modal account-edit-modal",tabindex:"-1"},[createBaseVNode("div",_hoisted_1$M,[createBaseVNode("div",_hoisted_2$M,[_hoisted_3$L,s.value?(openBlock(),createElementBlock("div",_hoisted_4$J,[createBaseVNode("div",_hoisted_5$I,[createBaseVNode("div",_hoisted_6$D,[_hoisted_7$A,createBaseVNode("input",{ref_key:"server",ref:o,type:"text",class:"form-control",placeholder:"Server","aria-label":"Server","aria-describedby":"addon-wrapping",value:s.value.server},null,8,_hoisted_8$z)]),createBaseVNode("div",_hoisted_9$z,[_hoisted_10$y,createBaseVNode("input",{ref_key:"username",ref:i,type:"text",class:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"addon-wrapping",value:s.value.username},null,8,_hoisted_11$v)]),createBaseVNode("div",_hoisted_12$u,[_hoisted_13$u,createBaseVNode("input",{ref_key:"token",ref:d,type:"text",class:"form-control",placeholder:"Token","aria-label":"Token","aria-describedby":"addon-wrapping",value:s.value.token,onKeypress:withKeys(a,["enter"])},null,40,_hoisted_14$u)]),createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("button",{class:"btn btn-dark",onClick:a},"Save")])])])):createCommentVNode("",!0)])])],512))}},_hoisted_1$L={class:"modal-dialog modal-fullscreen"},_hoisted_2$L={class:"modal-content"},_hoisted_3$K=createStaticVNode('<div class="modal-header justify-content-center mb-3"><div class="d-flex align-items-center"><div class="me-1"><img src="'+_imports_0$3+'" width="32" height="32"></div><div><h3 class="fw-bold m-0">Forte</h3></div></div></div>',1),_hoisted_4$I={class:"modal-body"},_hoisted_5$H={class:"row g-0 justify-content-center"},_hoisted_6$C={class:"col-6"},_hoisted_7$z=createBaseVNode("div",{class:"d-flex justify-content-center mb-3"},[createBaseVNode("span",{class:"fw-bold"},"You need to log in to use this service.")],-1),_hoisted_8$y={class:"d-flex justify-content-center"},_hoisted_9$y={class:"d-flex flex-fill flex-column"},_hoisted_10$x={class:"input-group flex-nowrap"},_hoisted_11$u=createBaseVNode("span",{class:"input-group-text bi bi-universal-access"},null,-1),_hoisted_12$t={class:"input-group flex-nowrap"},_hoisted_13$t=createBaseVNode("span",{class:"input-group-text bi bi-person-circle"},null,-1),_hoisted_14$t={class:"input-group flex-nowrap mb-3"},_hoisted_15$q=createBaseVNode("span",{class:"input-group-text bi bi-key-fill"},null,-1),_hoisted_16$p=["onKeypress"],_hoisted_17$p={class:"d-flex flex-fill mt-3"},_hoisted_18$o={class:"accordion flex-fill",id:"savedAccountsAccordion"},_hoisted_19$l={class:"accordion-item"},_hoisted_20$k={id:"savedAccounts",class:"accordion-collapse collapse","data-bs-parent":"#savedAccountsAccordion"},_hoisted_21$k={class:"accordion-body"},_hoisted_22$i={class:"list-group"},_hoisted_23$h={key:0,class:"list-group-item rounded d-flex p-1"},_hoisted_24$g=createBaseVNode("div",{class:"d-flex w-100 justify-content-between align-items-center"},[createBaseVNode("span",{class:"text-decoration-underline"},"No saved accounts.")],-1),_hoisted_25$f=[_hoisted_24$g],_hoisted_26$a={class:"list-group-item list-group-item-action clickable rounded d-flex p-1"},_hoisted_27$7={class:"d-flex w-100 justify-content-between align-items-center"},_hoisted_28$7={class:""},_hoisted_29$7={class:"d-flex align-items-center"},_hoisted_30$6=["onClick"],_hoisted_31$5=["onClick"],_hoisted_32$5=["onClick"],_hoisted_33$4=createBaseVNode("hr",{class:"text-dark"},null,-1),_hoisted_34$4={key:0},_hoisted_35$4=createBaseVNode("div",{class:"d-flex flex-fill justify-content-end align-items-center mt-3"},[createBaseVNode("div",{class:"d-flex flex-fill alert alert-danger login-alert appear align-items-center",role:"alert"}," Login failed! ")],-1),_hoisted_36$4=[_hoisted_35$4],_hoisted_37$4={key:1},_hoisted_38$4=createBaseVNode("div",{class:"d-flex justify-content-center appear mt-3"},[createBaseVNode("button",{class:"btn btn-dark",type:"button",disabled:""},[createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),createTextVNode(" Logging you in... ")])],-1),_hoisted_39$4=[_hoisted_38$4],_sfc_main$P={__name:"Login",setup(t){let e=null;const n=ref(null),r=ref(null),s=ref(!0),o=ref(!1),i=ref(null),d=ref(null),l=ref(null),u=ref([]);async function _(){let v=JSON.parse(localStorage.getItem("accounts"));if(!v){localStorage.setItem("accounts",JSON.stringify([])),u.value=[];return}u.value=v}async function a(v){await r.value.edit(v),r.value.show()}async function c(v){let g=JSON.parse(localStorage.getItem("accounts"));g||(g=[]),g=g.filter(y=>y.username!=v.username||y.server!=v.server),localStorage.setItem("accounts",JSON.stringify(g)),u.value=g}async function f(v){s.value=!0,o.value=!0;let g=v.server;if(!g.startsWith("http://")&&!g.startsWith("https://")){let y=await ft.get_address(g);if(!y){s.value=!1;return}g=y}ft.connect(g,v.username,v.token).then(y=>{if(y){e.hide(),window.location.replace("/");return}s.value=!1,o.value=!1})}async function m(){if(!i.value.value.length){i.value.focus();return}if(!l.value.value.length){l.value.focus();return}s.value=!0,o.value=!0;let v=i.value.value;if(!v.startsWith("http://")&&!v.startsWith("https://")){let g=await ft.get_address(v);if(!g){s.value=!1;return}v=g}ft.connect(v,d.value.value,l.value.value).then(g=>{if(g){let y=JSON.parse(localStorage.getItem("accounts"));y||(y=[]),y.filter(N=>N.username==d.value.value&&N.server==i.value.value).length||(y.push({server:i.value.value,username:d.value.value,token:l.value.value}),localStorage.setItem("accounts",JSON.stringify(y))),e.hide(),window.location.replace("/");return}s.value=!1,o.value=!1})}return onMounted(()=>{if(e=new Modal(n.value,{keyboard:!1}),JSON.parse(localStorage.getItem("offline")))return;_(),JSON.parse(localStorage.getItem("init"))||e.show()}),(v,g)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{ref_key:"loginModalEl",ref:n,class:"modal",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[createBaseVNode("div",_hoisted_1$L,[createBaseVNode("div",_hoisted_2$L,[_hoisted_3$K,createBaseVNode("div",_hoisted_4$I,[createBaseVNode("div",_hoisted_5$H,[createBaseVNode("div",_hoisted_6$C,[_hoisted_7$z,createBaseVNode("div",_hoisted_8$y,[createBaseVNode("div",_hoisted_9$y,[createBaseVNode("div",_hoisted_10$x,[_hoisted_11$u,createBaseVNode("input",{ref_key:"server",ref:i,type:"text",class:"form-control",placeholder:"Forte server","aria-label":"Server","aria-describedby":"addon-wrapping",value:"localhost"},null,512)]),createBaseVNode("div",_hoisted_12$t,[_hoisted_13$t,createBaseVNode("input",{ref_key:"username",ref:d,type:"text",class:"form-control",placeholder:"Username","aria-label":"Username","aria-describedby":"addon-wrapping"},null,512)]),createBaseVNode("div",_hoisted_14$t,[_hoisted_15$q,createBaseVNode("input",{ref_key:"token",ref:l,type:"text",class:"form-control",placeholder:"Token","aria-label":"Token","aria-describedby":"addon-wrapping",onKeypress:withKeys(m,["enter"])},null,40,_hoisted_16$p)]),createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("button",{class:"btn btn-dark",onClick:m},"Connect")])])]),createBaseVNode("div",_hoisted_17$p,[createBaseVNode("div",_hoisted_18$o,[createBaseVNode("div",_hoisted_19$l,[createBaseVNode("h2",{class:"accordion-header"},[createBaseVNode("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#savedAccounts","aria-expanded":"false","aria-controls":"collapseTwo",onClick:_}," Accounts ")]),createBaseVNode("div",_hoisted_20$k,[createBaseVNode("div",_hoisted_21$k,[createBaseVNode("ul",_hoisted_22$i,[u.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("li",_hoisted_23$h,_hoisted_25$f)),(openBlock(!0),createElementBlock(Fragment,null,renderList(u.value,y=>(openBlock(),createElementBlock("li",_hoisted_26$a,[createBaseVNode("div",_hoisted_27$7,[createBaseVNode("span",_hoisted_28$7,toDisplayString(y.username+"@"+y.server),1),createBaseVNode("div",_hoisted_29$7,[createBaseVNode("button",{class:"btn btn-light border bi bi-arrow-right me-1",onClick:b=>f(y)},null,8,_hoisted_30$6),createBaseVNode("button",{class:"btn btn-light border bi bi-pencil-fill me-1",onClick:b=>a(y)},null,8,_hoisted_31$5),createBaseVNode("button",{class:"btn btn-light border bi bi-x-lg",onClick:b=>c(y)},null,8,_hoisted_32$5)])])]))),256))])])])])])]),_hoisted_33$4,s.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_34$4,_hoisted_36$4)),o.value?(openBlock(),createElementBlock("div",_hoisted_37$4,_hoisted_39$4)):createCommentVNode("",!0)])])])])])],512),createVNode(_sfc_main$Q,{ref_key:"account_edit",ref:r},null,512)],64))}},_sfc_main$O={__name:"ContentView",setup(t){return(e,n)=>{const r=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$P),createVNode(_sfc_main$R),createVNode(_sfc_main$S),createVNode(r)],64)}}};var bufferbuilder={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(s){typeof s=="number"?this._pieces.push(s):(this.flush(),this._parts.push(s))},r.prototype.flush=function(){if(this._pieces.length>0){var s=new Uint8Array(this._pieces);e.useArrayBufferView||(s=s.buffer),this._parts.push(s),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var s=new n,o=0,i=this._parts.length;o<i;o++)s.append(this._parts[o]);return s.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(bufferbuilder);var BufferBuilder=bufferbuilder.exports.BufferBuilder,binaryFeatures=bufferbuilder.exports.binaryFeatures,BinaryPack={unpack:function(t){var e=new Unpacker(t);return e.unpack()},pack:function(t){var e=new Packer;e.pack(t);var n=e.getBuffer();return n}},binarypack=BinaryPack;function Unpacker(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Unpacker.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Unpacker.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};Unpacker.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};Unpacker.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};Unpacker.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};Unpacker.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-(1<<8)};Unpacker.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-(1<<16)};Unpacker.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};Unpacker.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};Unpacker.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};Unpacker.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",s,o;n<t;)s=e[n],s<128?(r+=String.fromCharCode(s),n++):(s^192)<32?(o=(s^192)<<6|e[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(s&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=t,r};Unpacker.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};Unpacker.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),s=this.unpack();e[r]=s}return e};Unpacker.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};Unpacker.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,s=t&1048575|1048576,o=s*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*o};Unpacker.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function Packer(){this.bufferBuilder=new BufferBuilder}Packer.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Packer.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Packer.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Packer.prototype.pack_string=function(t){var e=utf8Length(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Packer.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};Packer.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};Packer.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,s=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),i=e<<31|n+1023<<20|s/o&1048575,d=s%o;this.bufferBuilder.append(203),this.pack_int32(i),this.pack_int32(d)};Packer.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};Packer.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};Packer.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};Packer.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Packer.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Packer.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};Packer.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};Packer.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};Packer.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function _utf8Replace(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function utf8Length(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,_utf8Replace).length}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function wrapPeerConnectionEvent(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,s=r.addEventListener;r.addEventListener=function(i,d){if(i!==e)return s.apply(this,arguments);const l=u=>{const _=n(u);_&&(d.handleEvent?d.handleEvent(_):d(_))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,l),s.apply(this,[i,l])};const o=r.removeEventListener;r.removeEventListener=function(i,d){if(i!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(d))return o.apply(this,arguments);const l=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[i,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(i){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),i&&this.addEventListener(e,this["_on"+e]=i)},enumerable:!0,configurable:!0})}function disableLog(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(logDisabled_=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(deprecationWarnings_=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(t,e){!deprecationWarnings_||console.warn(t+" is deprecated, please use "+e+" instead.")}function detectBrowser(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=extractVersion(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=extractVersion(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject(t){return Object.prototype.toString.call(t)==="[object Object]"}function compactObject(t){return isObject(t)?Object.keys(t).reduce(function(e,n){const r=isObject(t[n]),s=r?compactObject(t[n]):t[n],o=r&&!Object.keys(s).length;return s===void 0||o?e:Object.assign(e,{[n]:s})},{}):t}function walkStats(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?walkStats(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(s=>{walkStats(t,t.get(s),n)})}))}function filterStats(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const o=[];return t.forEach(i=>{i.type==="track"&&i.trackIdentifier===e.id&&o.push(i)}),o.forEach(i=>{t.forEach(d=>{d.type===r&&d.trackId===i.id&&walkStats(t,d,s)})}),s}const logging=log;function shimGetUserMedia$3(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const l={};return Object.keys(d).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const _=typeof d[u]=="object"?d[u]:{ideal:d[u]};_.exact!==void 0&&typeof _.exact=="number"&&(_.min=_.max=_.exact);const a=function(c,f){return c?c+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(_.ideal!==void 0){l.optional=l.optional||[];let c={};typeof _.ideal=="number"?(c[a("min",u)]=_.ideal,l.optional.push(c),c={},c[a("max",u)]=_.ideal,l.optional.push(c)):(c[a("",u)]=_.ideal,l.optional.push(c))}_.exact!==void 0&&typeof _.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[a("",u)]=_.exact):["min","max"].forEach(c=>{_[c]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[a(c,u)]=_[c])})}),d.advanced&&(l.optional=(l.optional||[]).concat(d.advanced)),l},s=function(d,l){if(e.version>=61)return l(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const u=function(_,a,c){a in _&&!(c in _)&&(_[c]=_[a],delete _[a])};d=JSON.parse(JSON.stringify(d)),u(d.audio,"autoGainControl","googAutoGainControl"),u(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=r(d.audio)}if(d&&typeof d.video=="object"){let u=d.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const _=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!_)){delete d.video.facingMode;let a;if(u.exact==="environment"||u.ideal==="environment"?a=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(a=["front"]),a)return n.mediaDevices.enumerateDevices().then(c=>{c=c.filter(m=>m.kind==="videoinput");let f=c.find(m=>a.some(v=>m.label.toLowerCase().includes(v)));return!f&&c.length&&a.includes("back")&&(f=c[c.length-1]),f&&(d.video.deviceId=u.exact?{exact:f.deviceId}:{ideal:f.deviceId}),d.video=r(d.video),logging("chrome: "+JSON.stringify(d)),l(d)})}d.video=r(d.video)}return logging("chrome: "+JSON.stringify(d)),l(d)},o=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},i=function(d,l,u){s(d,_=>{n.webkitGetUserMedia(_,l,a=>{u&&u(o(a))})})};if(n.getUserMedia=i.bind(n),n.mediaDevices.getUserMedia){const d=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return s(l,u=>d(u).then(_=>{if(u.audio&&!_.getAudioTracks().length||u.video&&!_.getVideoTracks().length)throw _.getTracks().forEach(a=>{a.stop()}),new DOMException("","NotFoundError");return _},_=>Promise.reject(o(_))))}}}function shimGetDisplayMedia$2(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&!!t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(s=>{const o=r.video&&r.video.width,i=r.video&&r.video.height,d=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:s,maxFrameRate:d||3}},o&&(r.video.mandatory.maxWidth=o),i&&(r.video.mandatory.maxHeight=i),t.navigator.mediaDevices.getUserMedia(r)})}}}function shimMediaStream(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function shimOnTrack$1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(d=>d.track&&d.track.id===s.track.id):o={track:s.track};const i=new Event("track");i.track=s.track,i.receiver=o,i.transceiver={receiver:o},i.streams=[r.stream],this.dispatchEvent(i)}),r.stream.getTracks().forEach(s=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(d=>d.track&&d.track.id===s.id):o={track:s};const i=new Event("track");i.track=s,i.receiver=o,i.transceiver={receiver:o},i.streams=[r.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=s.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(d,l){let u=s.apply(this,arguments);return u||(u=e(this,d),this._senders.push(u)),u};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(d){o.apply(this,arguments);const l=this._senders.indexOf(d);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(i=>{this._senders.push(e(this,i))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(i=>{const d=this._senders.find(l=>l.track===i);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,s,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const i=function(l){const u={};return l.result().forEach(a=>{const c={id:a.id,timestamp:a.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[a.type]||a.type};a.names().forEach(f=>{c[f]=a.stat(f)}),u[c.id]=c}),u},d=function(l){return new Map(Object.keys(l).map(u=>[u,l[u]]))};if(arguments.length>=2){const l=function(u){s(d(i(u)))};return e.apply(this,[l,r])}return new Promise((l,u)=>{e.apply(this,[function(_){l(d(i(_)))},u])}).then(s,o)}}function shimSenderReceiverGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(i=>i._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(i=>filterStats(i,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s}),wrapPeerConnectionEvent(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>filterStats(o,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let s,o,i;return this.getSenders().forEach(d=>{d.track===r&&(s?i=!0:s=d)}),this.getReceivers().forEach(d=>(d.track===r&&(o?i=!0:o=d),d.track===r)),i||s&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(i=>this._shimmedLocalStreams[i][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(i,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(l)===-1&&this._shimmedLocalStreams[d.id].push(l):this._shimmedLocalStreams[d.id]=[d,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(i){this._shimmedLocalStreams=this._shimmedLocalStreams||{},i.getTracks().forEach(u=>{if(this.getSenders().find(a=>a.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(u=>d.indexOf(u)===-1);this._shimmedLocalStreams[i.id]=[i].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[i.id],r.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const l=this._shimmedLocalStreams[d].indexOf(i);l!==-1&&this._shimmedLocalStreams[d].splice(l,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),s.apply(this,arguments)}}function shimAddTrackRemoveTrack(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const _=n.apply(this);return this._reverseStreams=this._reverseStreams||{},_.map(a=>this._reverseStreams[a.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(_){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},_.getTracks().forEach(a=>{if(this.getSenders().find(f=>f.track===a))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[_.id]){const a=new t.MediaStream(_.getTracks());this._streams[_.id]=a,this._reverseStreams[a.id]=_,_=a}r.apply(this,[_])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(_){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[_.id]||_]),delete this._reverseStreams[this._streams[_.id]?this._streams[_.id].id:_.id],delete this._streams[_.id]},t.RTCPeerConnection.prototype.addTrack=function(_,a){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const c=[].slice.call(arguments,1);if(c.length!==1||!c[0].getTracks().find(v=>v===_))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===_))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[a.id];if(m)m.addTrack(_),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new t.MediaStream([_]);this._streams[a.id]=v,this._reverseStreams[v.id]=a,this.addStream(v)}return this.getSenders().find(v=>v.track===_)};function o(u,_){let a=_.sdp;return Object.keys(u._reverseStreams||[]).forEach(c=>{const f=u._reverseStreams[c],m=u._streams[f.id];a=a.replace(new RegExp(m.id,"g"),f.id)}),new RTCSessionDescription({type:_.type,sdp:a})}function i(u,_){let a=_.sdp;return Object.keys(u._reverseStreams||[]).forEach(c=>{const f=u._reverseStreams[c],m=u._streams[f.id];a=a.replace(new RegExp(f.id,"g"),m.id)}),new RTCSessionDescription({type:_.type,sdp:a})}["createOffer","createAnswer"].forEach(function(u){const _=t.RTCPeerConnection.prototype[u],a={[u](){const c=arguments;return arguments.length&&typeof arguments[0]=="function"?_.apply(this,[m=>{const v=o(this,m);c[0].apply(null,[v])},m=>{c[1]&&c[1].apply(null,m)},arguments[2]]):_.apply(this,arguments).then(m=>o(this,m))}};t.RTCPeerConnection.prototype[u]=a[u]});const d=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=i(this,arguments[0]),d.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:o(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!_._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(_._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let c;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(v=>_.track===v)&&(c=this._streams[f])}),c&&(c.getTracks().length===1?this.removeStream(this._reverseStreams[c.id]):c.removeTrack(_.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$2(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),!!t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],s={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=s[n]})}function fixNegotiationNeeded(t,e){wrapPeerConnectionEvent(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2},Symbol.toStringTag,{value:"Module"}));function filterIceServers$1(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let s=r.urls||r.url;r.url&&!r.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls");const o=typeof s=="string";return o&&(s=[s]),s=s.filter(i=>{if(i.indexOf("stun:")===0)return!1;const d=i.startsWith("turn")&&!i.startsWith("turn:[")&&i.includes("transport=udp");return d&&!n?(n=!0,!0):d&&!n}),delete r.url,r.urls=o?s[0]:s,!!s.length}})}var sdp={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(s,o){return(o>0?"m="+s:s).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(s){return s.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var s={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":s.relatedAddress=r[o+1];break;case"rport":s.relatedPort=parseInt(r[o+1],10);break;case"tcptype":s.tcpType=r[o+1];break;case"ufrag":s.ufrag=r[o+1],s.usernameFragment=r[o+1];break;default:s[r[o]]=r[o+1];break}return s},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var s=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},s,o=n.substr(n.indexOf(" ")+1).split(";"),i=0;i<o.length;i++)s=o[i].trim().split("="),r[s[0].trim()]=s[1];return r},e.writeFmtp=function(n){var r="",s=n.payloadType;if(n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(i){n.parameters[i]?o.push(i+"="+n.parameters[i]):o.push(i)}),r+="a=fmtp:"+s+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",s=n.payloadType;return n.preferredPayloadType!==void 0&&(s=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+s+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),s={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(s.attribute=n.substr(r+1,o-r-1),s.value=n.substr(o+1)):s.attribute=n.substr(r+1),s},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(s){return parseInt(s,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var s=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:s.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var s="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){s+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),s},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var s=e.matchPrefix(n+r,"a=crypto:");return s.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var s=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return s&&o?{usernameFragment:s.substr(12),password:o.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n),o=s[0].split(" "),i=3;i<o.length;i++){var d=o[i],l=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(l){var u=e.parseRtpMap(l),_=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(u.parameters=_.length?e.parseFmtp(_[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(a){r.headerExtensions.push(e.parseExtmap(a))}),r},e.writeRtpDescription=function(n,r){var s="";s+="m="+n+" ",s+=r.codecs.length>0?"9":"0",s+=" UDP/TLS/RTP/SAVPF ",s+=r.codecs.map(function(i){return i.preferredPayloadType!==void 0?i.preferredPayloadType:i.payloadType}).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(i){s+=e.writeRtpMap(i),s+=e.writeFmtp(i),s+=e.writeRtcpFb(i)});var o=0;return r.codecs.forEach(function(i){i.maxptime>o&&(o=i.maxptime)}),o>0&&(s+="a=maxptime:"+o+`\r
`),s+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(i){s+=e.writeExtmap(i)}),s},e.parseRtpEncodingParameters=function(n){var r=[],s=e.parseRtpParameters(n),o=s.fecMechanisms.indexOf("RED")!==-1,i=s.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(n,"a=ssrc:").map(function(c){return e.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="cname"}),l=d.length>0&&d[0].ssrc,u,_=e.matchPrefix(n,"a=ssrc-group:FID").map(function(c){var f=c.substr(17).split(" ");return f.map(function(m){return parseInt(m,10)})});_.length>0&&_[0].length>1&&_[0][0]===l&&(u=_[0][1]),s.codecs.forEach(function(c){if(c.name.toUpperCase()==="RTX"&&c.parameters.apt){var f={ssrc:l,codecPayloadType:parseInt(c.parameters.apt,10)};l&&u&&(f.rtx={ssrc:u}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:l,mechanism:i?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&l&&r.push({ssrc:l});var a=e.matchPrefix(n,"b=");return a.length&&(a[0].indexOf("b=TIAS:")===0?a=parseInt(a[0].substr(7),10):a[0].indexOf("b=AS:")===0?a=parseInt(a[0].substr(5),10)*1e3*.95-50*40*8:a=void 0,r.forEach(function(c){c.maxBitrate=a})),r},e.parseRtcpParameters=function(n){var r={},s=e.matchPrefix(n,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"})[0];s&&(r.cname=s.value,r.ssrc=s.ssrc);var o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var i=e.matchPrefix(n,"a=rtcp-mux");return r.mux=i.length>0,r},e.parseMsid=function(n){var r,s=e.matchPrefix(n,"a=msid:");if(s.length===1)return r=s[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=e.matchPrefix(n,"a=ssrc:").map(function(i){return e.parseSsrcMedia(i)}).filter(function(i){return i.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),s=e.matchPrefix(n,"a=max-message-size:"),o;s.length>0&&(o=parseInt(s[0].substr(19),10)),isNaN(o)&&(o=65536);var i=e.matchPrefix(n,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var d=e.matchPrefix(n,"a=sctpmap:");if(d.length>0){var l=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){var s=[];return n.protocol!=="DTLS/SCTP"?s=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:s=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&s.push("a=max-message-size:"+r.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,s){var o,i=r!==void 0?r:2;n?o=n:o=e.generateSessionId();var d=s||"thisisadapterortc";return`v=0\r
o=`+d+" "+o+" "+i+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,s,o){var i=e.writeRtpDescription(n.kind,r);if(i+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),i+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),s==="offer"?"actpass":"active"),i+="a=mid:"+n.mid+`\r
`,n.direction?i+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?i+=`a=sendrecv\r
`:n.rtpSender?i+=`a=sendonly\r
`:n.rtpReceiver?i+=`a=recvonly\r
`:i+=`a=inactive\r
`,n.rtpSender){var d="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;i+="a="+d,i+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+d,n.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+d,i+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return i+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),i},e.getDirection=function(n,r){for(var s=e.splitLines(n),o=0;o<s.length;o++)switch(s[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[o].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),s=r[0].split(" ");return s[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),s=r[0].substr(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],s=r.substr(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),s=0;s<r.length;s++)if(r[s].length<2||r[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(sdp);const SDPUtils$1=sdp.exports;var SDPUtils=sdp.exports;function fixStatsType(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function writeMediaSection(t,e,n,r,s){var o=SDPUtils.writeRtpDescription(t.kind,e);if(o+=SDPUtils.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=SDPUtils.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":s||"active"),o+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?o+=`a=sendrecv\r
`:t.rtpSender?o+=`a=sendonly\r
`:t.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,t.rtpSender){var i=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=i;var d="msid:"+(r?r.id:"-")+" "+i+`\r
`;o+="a="+d,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+d,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+d,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+`\r
`),o}function filterIceServers(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var s=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof s=="string";return o&&(s=[s]),s=s.filter(function(i){var d=i.indexOf("turn:")===0&&i.indexOf("transport=udp")!==-1&&i.indexOf("turn:[")===-1&&!n;return d?(n=!0,!0):i.indexOf("stun:")===0&&e>=14393&&i.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?s[0]:s,!!s.length}})}function getCommonCapabilities(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,i){o=parseInt(o,10);for(var d=0;d<i.length;d++)if(i[d].payloadType===o||i[d].preferredPayloadType===o)return i[d]},s=function(o,i,d,l){var u=r(o.parameters.apt,d),_=r(i.parameters.apt,l);return u&&_&&u.name.toLowerCase()===_.name.toLowerCase()};return t.codecs.forEach(function(o){for(var i=0;i<e.codecs.length;i++){var d=e.codecs[i];if(o.name.toLowerCase()===d.name.toLowerCase()&&o.clockRate===d.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&d.parameters.apt&&!s(o,d,t.codecs,e.codecs))continue;d=JSON.parse(JSON.stringify(d)),d.numChannels=Math.min(o.numChannels,d.numChannels),n.codecs.push(d),d.rtcpFeedback=d.rtcpFeedback.filter(function(l){for(var u=0;u<o.rtcpFeedback.length;u++)if(o.rtcpFeedback[u].type===l.type&&o.rtcpFeedback[u].parameter===l.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(o){for(var i=0;i<e.headerExtensions.length;i++){var d=e.headerExtensions[i];if(o.uri===d.uri){n.headerExtensions.push(d);break}}}),n}function isActionAllowedInSignalingState(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function maybeAddCandidate(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function makeError(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var rtcpeerconnection=function(t,e){function n(l,u){u.addTrack(l),u.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:l}))}function r(l,u){u.removeTrack(l),u.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:l}))}function s(l,u,_,a){var c=new Event("track");c.track=u,c.receiver=_,c.transceiver={receiver:_},c.streams=a,t.setTimeout(function(){l._dispatchEvent("track",c)})}var o=function(l){var u=this,_=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(c){u[c]=_[c].bind(_)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",l=JSON.parse(JSON.stringify(l||{})),this.usingBundle=l.bundlePolicy==="max-bundle",l.rtcpMuxPolicy==="negotiate")throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(l.rtcpMuxPolicy||(l.rtcpMuxPolicy="require"),l.iceTransportPolicy){case"all":case"relay":break;default:l.iceTransportPolicy="all";break}switch(l.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:l.bundlePolicy="balanced";break}if(l.iceServers=filterIceServers(l.iceServers||[],e),this._iceGatherers=[],l.iceCandidatePoolSize)for(var a=l.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:l.iceServers,gatherPolicy:l.iceTransportPolicy}));else l.iceCandidatePoolSize=0;this._config=l,this.transceivers=[],this._sdpSessionId=SDPUtils.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(l,u){this._isClosed||(this.dispatchEvent(u),typeof this["on"+l]=="function"&&this["on"+l](u))},o.prototype._emitGatheringStateChange=function(){var l=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",l)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(l,u){var _=this.transceivers.length>0,a={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:l,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&_)a.iceTransport=this.transceivers[0].iceTransport,a.dtlsTransport=this.transceivers[0].dtlsTransport;else{var c=this._createIceAndDtlsTransports();a.iceTransport=c.iceTransport,a.dtlsTransport=c.dtlsTransport}return u||this.transceivers.push(a),a},o.prototype.addTrack=function(l,u){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var _=this.transceivers.find(function(f){return f.track===l});if(_)throw makeError("InvalidAccessError","Track already exists.");for(var a,c=0;c<this.transceivers.length;c++)!this.transceivers[c].track&&this.transceivers[c].kind===l.kind&&(a=this.transceivers[c]);return a||(a=this._createTransceiver(l.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(u)===-1&&this.localStreams.push(u),a.track=l,a.stream=u,a.rtpSender=new t.RTCRtpSender(l,a.dtlsTransport),a.rtpSender},o.prototype.addStream=function(l){var u=this;if(e>=15025)l.getTracks().forEach(function(a){u.addTrack(a,l)});else{var _=l.clone();l.getTracks().forEach(function(a,c){var f=_.getTracks()[c];a.addEventListener("enabled",function(m){f.enabled=m.enabled})}),_.getTracks().forEach(function(a){u.addTrack(a,_)})}},o.prototype.removeTrack=function(l){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(l instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var u=this.transceivers.find(function(c){return c.rtpSender===l});if(!u)throw makeError("InvalidAccessError","Sender was not created by this connection.");var _=u.stream;u.rtpSender.stop(),u.rtpSender=null,u.track=null,u.stream=null;var a=this.transceivers.map(function(c){return c.stream});a.indexOf(_)===-1&&this.localStreams.indexOf(_)>-1&&this.localStreams.splice(this.localStreams.indexOf(_),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(l){var u=this;l.getTracks().forEach(function(_){var a=u.getSenders().find(function(c){return c.track===_});a&&u.removeTrack(a)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(l){return!!l.rtpSender}).map(function(l){return l.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(l){return!!l.rtpReceiver}).map(function(l){return l.rtpReceiver})},o.prototype._createIceGatherer=function(l,u){var _=this;if(u&&l>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[l].bufferedCandidateEvents=[],this.transceivers[l].bufferCandidates=function(c){var f=!c.candidate||Object.keys(c.candidate).length===0;a.state=f?"completed":"gathering",_.transceivers[l].bufferedCandidateEvents!==null&&_.transceivers[l].bufferedCandidateEvents.push(c)},a.addEventListener("localcandidate",this.transceivers[l].bufferCandidates),a},o.prototype._gather=function(l,u){var _=this,a=this.transceivers[u].iceGatherer;if(!a.onlocalcandidate){var c=this.transceivers[u].bufferedCandidateEvents;this.transceivers[u].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[u].bufferCandidates),a.onlocalcandidate=function(f){if(!(_.usingBundle&&u>0)){var m=new Event("icecandidate");m.candidate={sdpMid:l,sdpMLineIndex:u};var v=f.candidate,g=!v||Object.keys(v).length===0;if(g)(a.state==="new"||a.state==="gathering")&&(a.state="completed");else{a.state==="new"&&(a.state="gathering"),v.component=1,v.ufrag=a.getLocalParameters().usernameFragment;var y=SDPUtils.writeCandidate(v);m.candidate=Object.assign(m.candidate,SDPUtils.parseCandidate(y)),m.candidate.candidate=y,m.candidate.toJSON=function(){return{candidate:m.candidate.candidate,sdpMid:m.candidate.sdpMid,sdpMLineIndex:m.candidate.sdpMLineIndex,usernameFragment:m.candidate.usernameFragment}}}var b=SDPUtils.getMediaSections(_._localDescription.sdp);g?b[m.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:b[m.candidate.sdpMLineIndex]+="a="+m.candidate.candidate+`\r
`,_._localDescription.sdp=SDPUtils.getDescription(_._localDescription.sdp)+b.join("");var N=_.transceivers.every(function(x){return x.iceGatherer&&x.iceGatherer.state==="completed"});_.iceGatheringState!=="gathering"&&(_.iceGatheringState="gathering",_._emitGatheringStateChange()),g||_._dispatchEvent("icecandidate",m),N&&(_._dispatchEvent("icecandidate",new Event("icecandidate")),_.iceGatheringState="complete",_._emitGatheringStateChange())}},t.setTimeout(function(){c.forEach(function(f){a.onlocalcandidate(f)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var l=this,u=new t.RTCIceTransport(null);u.onicestatechange=function(){l._updateIceConnectionState(),l._updateConnectionState()};var _=new t.RTCDtlsTransport(u);return _.ondtlsstatechange=function(){l._updateConnectionState()},_.onerror=function(){Object.defineProperty(_,"state",{value:"failed",writable:!0}),l._updateConnectionState()},{iceTransport:u,dtlsTransport:_}},o.prototype._disposeIceAndDtlsTransports=function(l){var u=this.transceivers[l].iceGatherer;u&&(delete u.onlocalcandidate,delete this.transceivers[l].iceGatherer);var _=this.transceivers[l].iceTransport;_&&(delete _.onicestatechange,delete this.transceivers[l].iceTransport);var a=this.transceivers[l].dtlsTransport;a&&(delete a.ondtlsstatechange,delete a.onerror,delete this.transceivers[l].dtlsTransport)},o.prototype._transceive=function(l,u,_){var a=getCommonCapabilities(l.localCapabilities,l.remoteCapabilities);u&&l.rtpSender&&(a.encodings=l.sendEncodingParameters,a.rtcp={cname:SDPUtils.localCName,compound:l.rtcpParameters.compound},l.recvEncodingParameters.length&&(a.rtcp.ssrc=l.recvEncodingParameters[0].ssrc),l.rtpSender.send(a)),_&&l.rtpReceiver&&a.codecs.length>0&&(l.kind==="video"&&l.recvEncodingParameters&&e<15019&&l.recvEncodingParameters.forEach(function(c){delete c.rtx}),l.recvEncodingParameters.length?a.encodings=l.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:l.rtcpParameters.compound},l.rtcpParameters.cname&&(a.rtcp.cname=l.rtcpParameters.cname),l.sendEncodingParameters.length&&(a.rtcp.ssrc=l.sendEncodingParameters[0].ssrc),l.rtpReceiver.receive(a))},o.prototype.setLocalDescription=function(l){var u=this;if(["offer","answer"].indexOf(l.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+l.type+'"'));if(!isActionAllowedInSignalingState("setLocalDescription",l.type,u.signalingState)||u._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set local "+l.type+" in state "+u.signalingState));var _,a;if(l.type==="offer")_=SDPUtils.splitSections(l.sdp),a=_.shift(),_.forEach(function(f,m){var v=SDPUtils.parseRtpParameters(f);u.transceivers[m].localCapabilities=v}),u.transceivers.forEach(function(f,m){u._gather(f.mid,m)});else if(l.type==="answer"){_=SDPUtils.splitSections(u._remoteDescription.sdp),a=_.shift();var c=SDPUtils.matchPrefix(a,"a=ice-lite").length>0;_.forEach(function(f,m){var v=u.transceivers[m],g=v.iceGatherer,y=v.iceTransport,b=v.dtlsTransport,N=v.localCapabilities,x=v.remoteCapabilities,A=SDPUtils.isRejected(f)&&SDPUtils.matchPrefix(f,"a=bundle-only").length===0;if(!A&&!v.rejected){var L=SDPUtils.getIceParameters(f,a),V=SDPUtils.getDtlsParameters(f,a);c&&(V.role="server"),(!u.usingBundle||m===0)&&(u._gather(v.mid,m),y.state==="new"&&y.start(g,L,c?"controlling":"controlled"),b.state==="new"&&b.start(V));var P=getCommonCapabilities(N,x);u._transceive(v,P.codecs.length>0,!1)}})}return u._localDescription={type:l.type,sdp:l.sdp},l.type==="offer"?u._updateSignalingState("have-local-offer"):u._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(l){var u=this;if(["offer","answer"].indexOf(l.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+l.type+'"'));if(!isActionAllowedInSignalingState("setRemoteDescription",l.type,u.signalingState)||u._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set remote "+l.type+" in state "+u.signalingState));var _={};u.remoteStreams.forEach(function(y){_[y.id]=y});var a=[],c=SDPUtils.splitSections(l.sdp),f=c.shift(),m=SDPUtils.matchPrefix(f,"a=ice-lite").length>0,v=SDPUtils.matchPrefix(f,"a=group:BUNDLE ").length>0;u.usingBundle=v;var g=SDPUtils.matchPrefix(f,"a=ice-options:")[0];return g?u.canTrickleIceCandidates=g.substr(14).split(" ").indexOf("trickle")>=0:u.canTrickleIceCandidates=!1,c.forEach(function(y,b){var N=SDPUtils.splitLines(y),x=SDPUtils.getKind(y),A=SDPUtils.isRejected(y)&&SDPUtils.matchPrefix(y,"a=bundle-only").length===0,L=N[0].substr(2).split(" ")[2],V=SDPUtils.getDirection(y,f),P=SDPUtils.parseMsid(y),j=SDPUtils.getMid(y)||SDPUtils.generateIdentifier();if(A||x==="application"&&(L==="DTLS/SCTP"||L==="UDP/DTLS/SCTP")){u.transceivers[b]={mid:j,kind:x,protocol:L,rejected:!0};return}!A&&u.transceivers[b]&&u.transceivers[b].rejected&&(u.transceivers[b]=u._createTransceiver(x,!0));var H,ae,ie,le,J,F,G,C,D,X=SDPUtils.parseRtpParameters(y),z,pe;A||(z=SDPUtils.getIceParameters(y,f),pe=SDPUtils.getDtlsParameters(y,f),pe.role="client"),G=SDPUtils.parseRtpEncodingParameters(y);var _e=SDPUtils.parseRtcpParameters(y),be=SDPUtils.matchPrefix(y,"a=end-of-candidates",f).length>0,ge=SDPUtils.matchPrefix(y,"a=candidate:").map(function(ee){return SDPUtils.parseCandidate(ee)}).filter(function(ee){return ee.component===1});if((l.type==="offer"||l.type==="answer")&&!A&&v&&b>0&&u.transceivers[b]&&(u._disposeIceAndDtlsTransports(b),u.transceivers[b].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[b].iceTransport=u.transceivers[0].iceTransport,u.transceivers[b].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[b].rtpSender&&u.transceivers[b].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[b].rtpReceiver&&u.transceivers[b].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),l.type==="offer"&&!A){H=u.transceivers[b]||u._createTransceiver(x),H.mid=j,H.iceGatherer||(H.iceGatherer=u._createIceGatherer(b,v)),ge.length&&H.iceTransport.state==="new"&&(be&&(!v||b===0)?H.iceTransport.setRemoteCandidates(ge):ge.forEach(function(ee){maybeAddCandidate(H.iceTransport,ee)})),C=t.RTCRtpReceiver.getCapabilities(x),e<15019&&(C.codecs=C.codecs.filter(function(ee){return ee.name!=="rtx"})),F=H.sendEncodingParameters||[{ssrc:(2*b+2)*1001}];var R=!1;if(V==="sendrecv"||V==="sendonly"){if(R=!H.rtpReceiver,J=H.rtpReceiver||new t.RTCRtpReceiver(H.dtlsTransport,x),R){var Q;D=J.track,P&&P.stream==="-"||(P?(_[P.stream]||(_[P.stream]=new t.MediaStream,Object.defineProperty(_[P.stream],"id",{get:function(){return P.stream}})),Object.defineProperty(D,"id",{get:function(){return P.track}}),Q=_[P.stream]):(_.default||(_.default=new t.MediaStream),Q=_.default)),Q&&(n(D,Q),H.associatedRemoteMediaStreams.push(Q)),a.push([D,J,Q])}}else H.rtpReceiver&&H.rtpReceiver.track&&(H.associatedRemoteMediaStreams.forEach(function(ee){var ue=ee.getTracks().find(function(ce){return ce.id===H.rtpReceiver.track.id});ue&&r(ue,ee)}),H.associatedRemoteMediaStreams=[]);H.localCapabilities=C,H.remoteCapabilities=X,H.rtpReceiver=J,H.rtcpParameters=_e,H.sendEncodingParameters=F,H.recvEncodingParameters=G,u._transceive(u.transceivers[b],!1,R)}else if(l.type==="answer"&&!A){H=u.transceivers[b],ae=H.iceGatherer,ie=H.iceTransport,le=H.dtlsTransport,J=H.rtpReceiver,F=H.sendEncodingParameters,C=H.localCapabilities,u.transceivers[b].recvEncodingParameters=G,u.transceivers[b].remoteCapabilities=X,u.transceivers[b].rtcpParameters=_e,ge.length&&ie.state==="new"&&((m||be)&&(!v||b===0)?ie.setRemoteCandidates(ge):ge.forEach(function(ee){maybeAddCandidate(H.iceTransport,ee)})),(!v||b===0)&&(ie.state==="new"&&ie.start(ae,z,"controlling"),le.state==="new"&&le.start(pe));var Y=getCommonCapabilities(H.localCapabilities,H.remoteCapabilities),te=Y.codecs.filter(function(ee){return ee.name.toLowerCase()==="rtx"}).length;!te&&H.sendEncodingParameters[0].rtx&&delete H.sendEncodingParameters[0].rtx,u._transceive(H,V==="sendrecv"||V==="recvonly",V==="sendrecv"||V==="sendonly"),J&&(V==="sendrecv"||V==="sendonly")?(D=J.track,P?(_[P.stream]||(_[P.stream]=new t.MediaStream),n(D,_[P.stream]),a.push([D,J,_[P.stream]])):(_.default||(_.default=new t.MediaStream),n(D,_.default),a.push([D,J,_.default]))):delete H.rtpReceiver}}),u._dtlsRole===void 0&&(u._dtlsRole=l.type==="offer"?"active":"passive"),u._remoteDescription={type:l.type,sdp:l.sdp},l.type==="offer"?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(_).forEach(function(y){var b=_[y];if(b.getTracks().length){if(u.remoteStreams.indexOf(b)===-1){u.remoteStreams.push(b);var N=new Event("addstream");N.stream=b,t.setTimeout(function(){u._dispatchEvent("addstream",N)})}a.forEach(function(x){var A=x[0],L=x[1];b.id===x[2].id&&s(u,A,L,[b])})}}),a.forEach(function(y){y[2]||s(u,y[0],y[1],[])}),t.setTimeout(function(){!(u&&u.transceivers)||u.transceivers.forEach(function(y){y.iceTransport&&y.iceTransport.state==="new"&&y.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),y.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(l){l.iceTransport&&l.iceTransport.stop(),l.dtlsTransport&&l.dtlsTransport.stop(),l.rtpSender&&l.rtpSender.stop(),l.rtpReceiver&&l.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(l){this.signalingState=l;var u=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",u)},o.prototype._maybeFireNegotiationNeeded=function(){var l=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(l.needNegotiation){l.needNegotiation=!1;var u=new Event("negotiationneeded");l._dispatchEvent("negotiationneeded",u)}},0))},o.prototype._updateIceConnectionState=function(){var l,u={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(a){a.iceTransport&&!a.rejected&&u[a.iceTransport.state]++}),l="new",u.failed>0?l="failed":u.checking>0?l="checking":u.disconnected>0?l="disconnected":u.new>0?l="new":u.connected>0?l="connected":u.completed>0&&(l="completed"),l!==this.iceConnectionState){this.iceConnectionState=l;var _=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",_)}},o.prototype._updateConnectionState=function(){var l,u={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(a){a.iceTransport&&a.dtlsTransport&&!a.rejected&&(u[a.iceTransport.state]++,u[a.dtlsTransport.state]++)}),u.connected+=u.completed,l="new",u.failed>0?l="failed":u.connecting>0?l="connecting":u.disconnected>0?l="disconnected":u.new>0?l="new":u.connected>0&&(l="connected"),l!==this.connectionState){this.connectionState=l;var _=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",_)}},o.prototype.createOffer=function(){var l=this;if(l._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var u=l.transceivers.filter(function(m){return m.kind==="audio"}).length,_=l.transceivers.filter(function(m){return m.kind==="video"}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");a.offerToReceiveAudio!==void 0&&(a.offerToReceiveAudio===!0?u=1:a.offerToReceiveAudio===!1?u=0:u=a.offerToReceiveAudio),a.offerToReceiveVideo!==void 0&&(a.offerToReceiveVideo===!0?_=1:a.offerToReceiveVideo===!1?_=0:_=a.offerToReceiveVideo)}for(l.transceivers.forEach(function(m){m.kind==="audio"?(u--,u<0&&(m.wantReceive=!1)):m.kind==="video"&&(_--,_<0&&(m.wantReceive=!1))});u>0||_>0;)u>0&&(l._createTransceiver("audio"),u--),_>0&&(l._createTransceiver("video"),_--);var c=SDPUtils.writeSessionBoilerplate(l._sdpSessionId,l._sdpSessionVersion++);l.transceivers.forEach(function(m,v){var g=m.track,y=m.kind,b=m.mid||SDPUtils.generateIdentifier();m.mid=b,m.iceGatherer||(m.iceGatherer=l._createIceGatherer(v,l.usingBundle));var N=t.RTCRtpSender.getCapabilities(y);e<15019&&(N.codecs=N.codecs.filter(function(A){return A.name!=="rtx"})),N.codecs.forEach(function(A){A.name==="H264"&&A.parameters["level-asymmetry-allowed"]===void 0&&(A.parameters["level-asymmetry-allowed"]="1"),m.remoteCapabilities&&m.remoteCapabilities.codecs&&m.remoteCapabilities.codecs.forEach(function(L){A.name.toLowerCase()===L.name.toLowerCase()&&A.clockRate===L.clockRate&&(A.preferredPayloadType=L.payloadType)})}),N.headerExtensions.forEach(function(A){var L=m.remoteCapabilities&&m.remoteCapabilities.headerExtensions||[];L.forEach(function(V){A.uri===V.uri&&(A.id=V.id)})});var x=m.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];g&&e>=15019&&y==="video"&&!x[0].rtx&&(x[0].rtx={ssrc:x[0].ssrc+1}),m.wantReceive&&(m.rtpReceiver=new t.RTCRtpReceiver(m.dtlsTransport,y)),m.localCapabilities=N,m.sendEncodingParameters=x}),l._config.bundlePolicy!=="max-compat"&&(c+="a=group:BUNDLE "+l.transceivers.map(function(m){return m.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`,l.transceivers.forEach(function(m,v){c+=writeMediaSection(m,m.localCapabilities,"offer",m.stream,l._dtlsRole),c+=`a=rtcp-rsize\r
`,m.iceGatherer&&l.iceGatheringState!=="new"&&(v===0||!l.usingBundle)&&(m.iceGatherer.getLocalCandidates().forEach(function(g){g.component=1,c+="a="+SDPUtils.writeCandidate(g)+`\r
`}),m.iceGatherer.state==="completed"&&(c+=`a=end-of-candidates\r
`))});var f=new t.RTCSessionDescription({type:"offer",sdp:c});return Promise.resolve(f)},o.prototype.createAnswer=function(){var l=this;if(l._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"));if(!(l.signalingState==="have-remote-offer"||l.signalingState==="have-local-pranswer"))return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+l.signalingState));var u=SDPUtils.writeSessionBoilerplate(l._sdpSessionId,l._sdpSessionVersion++);l.usingBundle&&(u+="a=group:BUNDLE "+l.transceivers.map(function(c){return c.mid}).join(" ")+`\r
`),u+=`a=ice-options:trickle\r
`;var _=SDPUtils.getMediaSections(l._remoteDescription.sdp).length;l.transceivers.forEach(function(c,f){if(!(f+1>_)){if(c.rejected){c.kind==="application"?c.protocol==="DTLS/SCTP"?u+=`m=application 0 DTLS/SCTP 5000\r
`:u+="m=application 0 "+c.protocol+` webrtc-datachannel\r
`:c.kind==="audio"?u+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:c.kind==="video"&&(u+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),u+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+c.mid+`\r
`;return}if(c.stream){var m;c.kind==="audio"?m=c.stream.getAudioTracks()[0]:c.kind==="video"&&(m=c.stream.getVideoTracks()[0]),m&&e>=15019&&c.kind==="video"&&!c.sendEncodingParameters[0].rtx&&(c.sendEncodingParameters[0].rtx={ssrc:c.sendEncodingParameters[0].ssrc+1})}var v=getCommonCapabilities(c.localCapabilities,c.remoteCapabilities),g=v.codecs.filter(function(y){return y.name.toLowerCase()==="rtx"}).length;!g&&c.sendEncodingParameters[0].rtx&&delete c.sendEncodingParameters[0].rtx,u+=writeMediaSection(c,v,"answer",c.stream,l._dtlsRole),c.rtcpParameters&&c.rtcpParameters.reducedSize&&(u+=`a=rtcp-rsize\r
`)}});var a=new t.RTCSessionDescription({type:"answer",sdp:u});return Promise.resolve(a)},o.prototype.addIceCandidate=function(l){var u=this,_;return l&&!(l.sdpMLineIndex!==void 0||l.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,c){if(u._remoteDescription)if(!l||l.candidate==="")for(var f=0;f<u.transceivers.length&&!(!u.transceivers[f].rejected&&(u.transceivers[f].iceTransport.addRemoteCandidate({}),_=SDPUtils.getMediaSections(u._remoteDescription.sdp),_[f]+=`a=end-of-candidates\r
`,u._remoteDescription.sdp=SDPUtils.getDescription(u._remoteDescription.sdp)+_.join(""),u.usingBundle));f++);else{var m=l.sdpMLineIndex;if(l.sdpMid){for(var v=0;v<u.transceivers.length;v++)if(u.transceivers[v].mid===l.sdpMid){m=v;break}}var g=u.transceivers[m];if(g){if(g.rejected)return a();var y=Object.keys(l.candidate).length>0?SDPUtils.parseCandidate(l.candidate):{};if(y.protocol==="tcp"&&(y.port===0||y.port===9)||y.component&&y.component!==1)return a();if((m===0||m>0&&g.iceTransport!==u.transceivers[0].iceTransport)&&!maybeAddCandidate(g.iceTransport,y))return c(makeError("OperationError","Can not add ICE candidate"));var b=l.candidate.trim();b.indexOf("a=")===0&&(b=b.substr(2)),_=SDPUtils.getMediaSections(u._remoteDescription.sdp),_[m]+="a="+(y.type?b:"end-of-candidates")+`\r
`,u._remoteDescription.sdp=SDPUtils.getDescription(u._remoteDescription.sdp)+_.join("")}else return c(makeError("OperationError","Can not add ICE candidate"))}else return c(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));a()})},o.prototype.getStats=function(l){if(l&&l instanceof t.MediaStreamTrack){var u=null;if(this.transceivers.forEach(function(a){a.rtpSender&&a.rtpSender.track===l?u=a.rtpSender:a.rtpReceiver&&a.rtpReceiver.track===l&&(u=a.rtpReceiver)}),!u)throw makeError("InvalidAccessError","Invalid selector.");return u.getStats()}var _=[];return this.transceivers.forEach(function(a){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(c){a[c]&&_.push(a[c].getStats())})}),Promise.all(_).then(function(a){var c=new Map;return a.forEach(function(f){f.forEach(function(m){c.set(m.id,m)})}),c})};var i=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];i.forEach(function(l){var u=t[l];if(u&&u.prototype&&u.prototype.getStats){var _=u.prototype.getStats;u.prototype.getStats=function(){return _.apply(this).then(function(a){var c=new Map;return Object.keys(a).forEach(function(f){a[f].type=fixStatsType(a[f]),c.set(f,a[f])}),c})}}});var d=["createOffer","createAnswer"];return d.forEach(function(l){var u=o.prototype[l];o.prototype[l]=function(){var _=arguments;return typeof _[0]=="function"||typeof _[1]=="function"?u.apply(this,[arguments[2]]).then(function(a){typeof _[0]=="function"&&_[0].apply(null,[a])},function(a){typeof _[1]=="function"&&_[1].apply(null,[a])}):u.apply(this,arguments)}}),d=["setLocalDescription","setRemoteDescription","addIceCandidate"],d.forEach(function(l){var u=o.prototype[l];o.prototype[l]=function(){var _=arguments;return typeof _[1]=="function"||typeof _[2]=="function"?u.apply(this,arguments).then(function(){typeof _[1]=="function"&&_[1].apply(null)},function(a){typeof _[2]=="function"&&_[2].apply(null,[a])}):u.apply(this,arguments)}}),["getStats"].forEach(function(l){var u=o.prototype[l];o.prototype[l]=function(){var _=arguments;return typeof _[1]=="function"?u.apply(this,arguments).then(function(){typeof _[1]=="function"&&_[1].apply(null)}):u.apply(this,arguments)}}),o};function shimGetUserMedia$2(t){const e=t&&t.navigator,n=function(s){return{name:{PermissionDeniedError:"NotAllowedError"}[s.name]||s.name,message:s.message,constraint:s.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(s){return r(s).catch(o=>Promise.reject(n(o)))}}function shimGetDisplayMedia$1(t){"getDisplayMedia"in t.navigator&&(!t.navigator.mediaDevices||t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function shimPeerConnection$1(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(s){return s}),t.RTCSessionDescription||(t.RTCSessionDescription=function(s){return s}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(s){r.set.call(this,s);const o=new Event("enabled");o.enabled=s,this.dispatchEvent(o)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=rtcpeerconnection(t,e.version);t.RTCPeerConnection=function(s){return s&&s.iceServers&&(s.iceServers=filterIceServers$1(s.iceServers,e.version),log("ICE servers after filtering:",s.iceServers)),new n(s)},t.RTCPeerConnection.prototype=n.prototype}function shimReplaceTrack(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const edgeShim=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(s,o,i){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(s).then(o,i)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const s=function(i,d,l){d in i&&!(l in i)&&(i[l]=i[d],delete i[d])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(i){return typeof i=="object"&&typeof i.audio=="object"&&(i=JSON.parse(JSON.stringify(i)),s(i.audio,"autoGainControl","mozAutoGainControl"),s(i.audio,"noiseSuppression","mozNoiseSuppression")),o(i)},r&&r.prototype.getSettings){const i=r.prototype.getSettings;r.prototype.getSettings=function(){const d=i.apply(this,arguments);return s(d,"mozAutoGainControl","autoGainControl"),s(d,"mozNoiseSuppression","noiseSuppression"),d}}if(r&&r.prototype.applyConstraints){const i=r.prototype.applyConstraints;r.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),s(d,"autoGainControl","mozAutoGainControl"),s(d,"noiseSuppression","mozNoiseSuppression")),i.apply(this,[d])}}}}function shimGetDisplayMedia(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||!t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function shimOnTrack(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const o=t.RTCPeerConnection.prototype[s],i={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=i[s]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,i,d]=arguments;return r.apply(this,[o||null]).then(l=>{if(e.version<53&&!i)try{l.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((_,a)=>{l.set(a,Object.assign({},_,{type:n[_.type]||_.type}))})}return l}).then(i,d)}}function shimSenderGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(o=>o._pc=this),s});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(s=>s._pc=this),r}),wrapPeerConnectionEvent(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){deprecated("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function shimRTCDataChannel(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function shimAddTransceiver(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],s=r&&"sendEncodings"in r;s&&r.sendEncodings.forEach(i=>{if("rid"in i&&!/^[a-z0-9]{0,16}$/i.test(i.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in i&&!(parseFloat(i.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in i&&!(parseFloat(i.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(s){const{sender:i}=o,d=i.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=r.sendEncodings,i.sendEncodings=r.sendEncodings,this.setParametersPromises.push(i.setParameters(d).then(()=>{delete i.sendEncodings}).catch(()=>{delete i.sendEncodings})))}return o})}function shimGetParameters(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function shimCreateOffer(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(s=>e.call(this,s,r)),r.getVideoTracks().forEach(s=>e.call(this,s,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...s){return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const s=n.getTracks();this.getSenders().forEach(o=>{s.includes(o.track)&&this.removeTrack(o)})})}}function shimRemoteStreamsAPI(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const i=new Event("addstream");i.stream=o,r.dispatchEvent(i)})}),e.apply(r,arguments)}}}function shimCallbacksAPI(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,s=e.setLocalDescription,o=e.setRemoteDescription,i=e.addIceCandidate;e.createOffer=function(u,_){const a=arguments.length>=2?arguments[2]:arguments[0],c=n.apply(this,[a]);return _?(c.then(u,_),Promise.resolve()):c},e.createAnswer=function(u,_){const a=arguments.length>=2?arguments[2]:arguments[0],c=r.apply(this,[a]);return _?(c.then(u,_),Promise.resolve()):c};let d=function(l,u,_){const a=s.apply(this,[l]);return _?(a.then(u,_),Promise.resolve()):a};e.setLocalDescription=d,d=function(l,u,_){const a=o.apply(this,[l]);return _?(a.then(u,_),Promise.resolve()):a},e.setRemoteDescription=d,d=function(l,u,_){const a=i.apply(this,[l]);return _?(a.then(u,_),Promise.resolve()):a},e.addIceCandidate=d}function shimGetUserMedia(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=s=>r(shimConstraints(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,s,o){e.mediaDevices.getUserMedia(r).then(s,o)}.bind(e))}function shimConstraints(t){return t&&t.video!==void 0?Object.assign({},t,{video:compactObject(t.video)}):t}function shimRTCIceServerUrls(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,s){if(r&&r.iceServers){const o=[];for(let i=0;i<r.iceServers.length;i++){let d=r.iceServers[i];!d.hasOwnProperty("urls")&&d.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,o.push(d)):o.push(r.iceServers[i])}r.iceServers=o}return new e(r,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const s=this.getTransceivers().find(i=>i.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(i=>i.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return e.apply(this,arguments)}}function shimAudioContext(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"}));function shimRTCIceCandidate(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const s=new e(r),o=SDPUtils$1.parseCandidate(r.candidate),i=Object.assign(s,o);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function shimMaxMessageSize(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(d){if(!d||!d.sdp)return!1;const l=SDPUtils$1.splitSections(d.sdp);return l.shift(),l.some(u=>{const _=SDPUtils$1.parseMLine(u);return _&&_.kind==="application"&&_.protocol.indexOf("SCTP")!==-1})},r=function(d){const l=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},s=function(d){let l=65536;return e.browser==="firefox"&&(e.version<57?d===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},o=function(d,l){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const _=SDPUtils$1.matchPrefix(d.sdp,"a=max-message-size:");return _.length>0?u=parseInt(_[0].substr(19),10):e.browser==="firefox"&&l!==-1&&(u=2147483637),u},i=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),u=s(l),_=o(arguments[0],l);let a;u===0&&_===0?a=Number.POSITIVE_INFINITY:u===0||_===0?a=Math.max(u,_):a=Math.min(u,_);const c={};Object.defineProperty(c,"maxMessageSize",{get(){return a}}),this._sctp=c}return i.apply(this,arguments)}}function shimSendThrowTypeError(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,s){const o=r.send;r.send=function(){const d=arguments[0],l=d.length||d.size||d.byteLength;if(r.readyState==="open"&&s.sctp&&l>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=n.apply(this,arguments);return e(s,this),s},wrapPeerConnectionEvent(t,"datachannel",r=>(e(r.channel,r.target),r))}function shimConnectionState(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const o=s.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const i=new Event("connectionstatechange",s);o.dispatchEvent(i)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function removeExtmapAllowMixed(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=s.sdp.split(`
`).filter(i=>i.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:o}):s.sdp=o}return n.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=log,r=detectBrowser(t),s={browserDetails:r,commonShim,extractVersion,disableLog,disableWarnings};switch(r.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),s;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),s;n("adapter.js shimming chrome."),s.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(t,r),shimGetUserMedia$3(t,r),shimMediaStream(t),shimPeerConnection$2(t,r),shimOnTrack$1(t),shimAddTrackRemoveTrack(t,r),shimGetSendersWithDtmf(t),shimGetStats(t),shimSenderReceiverGetStats(t),fixNegotiationNeeded(t,r),shimRTCIceCandidate(t),shimConnectionState(t),shimMaxMessageSize(t,r),shimSendThrowTypeError(t),removeExtmapAllowMixed(t,r);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),s;n("adapter.js shimming firefox."),s.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(t,r),shimGetUserMedia$1(t,r),shimPeerConnection(t,r),shimOnTrack(t),shimRemoveStream(t),shimSenderGetStats(t),shimReceiverGetStats(t),shimRTCDataChannel(t),shimAddTransceiver(t),shimGetParameters(t),shimCreateOffer(t),shimCreateAnswer(t),shimRTCIceCandidate(t),shimConnectionState(t),shimMaxMessageSize(t,r),shimSendThrowTypeError(t);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),s;n("adapter.js shimming edge."),s.browserShim=edgeShim,shimGetUserMedia$2(t),shimGetDisplayMedia$1(t),shimPeerConnection$1(t,r),shimReplaceTrack(t),shimMaxMessageSize(t,r),shimSendThrowTypeError(t);break;case"safari":if(!safariShim||!e.shimSafari)return n("Safari shim is not included in this adapter release."),s;n("adapter.js shimming safari."),s.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(t,r),shimRTCIceServerUrls(t),shimCreateOfferLegacy(t),shimCallbacksAPI(t),shimLocalStreamsAPI(t),shimRemoteStreamsAPI(t),shimTrackEventTransceiver(t),shimGetUserMedia(t),shimAudioContext(t),shimRTCIceCandidate(t),shimMaxMessageSize(t,r),shimSendThrowTypeError(t),removeExtmapAllowMixed(t,r);break;default:n("Unsupported browser!");break}return s}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var $af8cf1f663f490f4$var$webRTCAdapter=adapter.default||adapter,$af8cf1f663f490f4$export$25be9502477c137d=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser},t.prototype.getVersion=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=$af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,s=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),s=!0}catch{}finally{r&&r.close()}return s},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),$06cb531ed7840f78$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},$06cb531ed7840f78$var$Util=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=$06cb531ed7840f78$var$DEFAULT_CONFIG,this.browser=$af8cf1f663f490f4$export$25be9502477c137d.getBrowser(),this.browserVersion=$af8cf1f663f490f4$export$25be9502477c137d.getVersion(),this.supports=function(){var e={browser:$af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),webRTC:$af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!$af8cf1f663f490f4$export$25be9502477c137d.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=binarypack.pack,this.unpack=binarypack.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,s=Math.ceil(r/$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),o=0,i=0;i<r;){var d=Math.min(r,i+$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),l=e.slice(i,d),u={__peerData:this._dataCount,n:o,data:l,total:s};n.push(u),i=d,o++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(s){s.target&&n(s.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),$06cb531ed7840f78$export$7debb50ef11d5e0b=new $06cb531ed7840f78$var$Util,$26088d7da5b03f69$exports={};$parcel$export($26088d7da5b03f69$exports,"Peer",()=>$26088d7da5b03f69$export$ecd1fc136c422448,t=>$26088d7da5b03f69$export$ecd1fc136c422448=t);var $ac9b757d51178e15$exports={},$ac9b757d51178e15$var$has=Object.prototype.hasOwnProperty,$ac9b757d51178e15$var$prefix="~";function $ac9b757d51178e15$var$Events(){}Object.create&&($ac9b757d51178e15$var$Events.prototype=Object.create(null),new $ac9b757d51178e15$var$Events().__proto__||($ac9b757d51178e15$var$prefix=!1));function $ac9b757d51178e15$var$EE(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function $ac9b757d51178e15$var$addListener(t,e,n,r,s){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new $ac9b757d51178e15$var$EE(n,r||t,s),i=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;return t._events[i]?t._events[i].fn?t._events[i]=[t._events[i],o]:t._events[i].push(o):(t._events[i]=o,t._eventsCount++),t}function $ac9b757d51178e15$var$clearEvent(t,e){--t._eventsCount===0?t._events=new $ac9b757d51178e15$var$Events:delete t._events[e]}function $ac9b757d51178e15$var$EventEmitter(){this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0}$ac9b757d51178e15$var$EventEmitter.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)$ac9b757d51178e15$var$has.call(n,r)&&e.push($ac9b757d51178e15$var$prefix?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};$ac9b757d51178e15$var$EventEmitter.prototype.listeners=function(e){var n=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,o=r.length,i=new Array(o);s<o;s++)i[s]=r[s].fn;return i};$ac9b757d51178e15$var$EventEmitter.prototype.listenerCount=function(e){var n=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,r=this._events[n];return r?r.fn?1:r.length:0};$ac9b757d51178e15$var$EventEmitter.prototype.emit=function(e,n,r,s,o,i){var d=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[d])return!1;var l=this._events[d],u=arguments.length,_,a;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,s),!0;case 5:return l.fn.call(l.context,n,r,s,o),!0;case 6:return l.fn.call(l.context,n,r,s,o,i),!0}for(a=1,_=new Array(u-1);a<u;a++)_[a-1]=arguments[a];l.fn.apply(l.context,_)}else{var c=l.length,f;for(a=0;a<c;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,void 0,!0),u){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,n);break;case 3:l[a].fn.call(l[a].context,n,r);break;case 4:l[a].fn.call(l[a].context,n,r,s);break;default:if(!_)for(f=1,_=new Array(u-1);f<u;f++)_[f-1]=arguments[f];l[a].fn.apply(l[a].context,_)}}return!0};$ac9b757d51178e15$var$EventEmitter.prototype.on=function(e,n,r){return $ac9b757d51178e15$var$addListener(this,e,n,r,!1)};$ac9b757d51178e15$var$EventEmitter.prototype.once=function(e,n,r){return $ac9b757d51178e15$var$addListener(this,e,n,r,!0)};$ac9b757d51178e15$var$EventEmitter.prototype.removeListener=function(e,n,r,s){var o=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[o])return this;if(!n)return $ac9b757d51178e15$var$clearEvent(this,o),this;var i=this._events[o];if(i.fn)i.fn===n&&(!s||i.once)&&(!r||i.context===r)&&$ac9b757d51178e15$var$clearEvent(this,o);else{for(var d=0,l=[],u=i.length;d<u;d++)(i[d].fn!==n||s&&!i[d].once||r&&i[d].context!==r)&&l.push(i[d]);l.length?this._events[o]=l.length===1?l[0]:l:$ac9b757d51178e15$var$clearEvent(this,o)}return this};$ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners=function(e){var n;return e?(n=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,this._events[n]&&$ac9b757d51178e15$var$clearEvent(this,n)):(this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0),this};$ac9b757d51178e15$var$EventEmitter.prototype.off=$ac9b757d51178e15$var$EventEmitter.prototype.removeListener;$ac9b757d51178e15$var$EventEmitter.prototype.addListener=$ac9b757d51178e15$var$EventEmitter.prototype.on;$ac9b757d51178e15$var$EventEmitter.prefixed=$ac9b757d51178e15$var$prefix;$ac9b757d51178e15$var$EventEmitter.EventEmitter=$ac9b757d51178e15$var$EventEmitter;$ac9b757d51178e15$exports=$ac9b757d51178e15$var$EventEmitter;var $1615705ecc6adca3$exports={};$parcel$export($1615705ecc6adca3$exports,"LogLevel",()=>$1615705ecc6adca3$export$243e62d78d3b544d,t=>$1615705ecc6adca3$export$243e62d78d3b544d=t);$parcel$export($1615705ecc6adca3$exports,"default",()=>$1615705ecc6adca3$export$2e2bcd8739ae039,t=>$1615705ecc6adca3$export$2e2bcd8739ae039=t);var $1615705ecc6adca3$var$__read=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},$1615705ecc6adca3$var$__spreadArray=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},$1615705ecc6adca3$var$LOG_PREFIX="PeerJS: ",$1615705ecc6adca3$export$243e62d78d3b544d;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})($1615705ecc6adca3$export$243e62d78d3b544d||($1615705ecc6adca3$export$243e62d78d3b544d={}));var $1615705ecc6adca3$var$Logger=function(){function t(){this._logLevel=$1615705ecc6adca3$export$243e62d78d3b544d.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.All&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.All],$1615705ecc6adca3$var$__read(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Warnings],$1615705ecc6adca3$var$__read(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Errors],$1615705ecc6adca3$var$__read(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$var$LOG_PREFIX],$1615705ecc6adca3$var$__read(n),!1);for(var o in s)s[o]instanceof Error&&(s[o]="("+s[o].name+") "+s[o].message);e>=$1615705ecc6adca3$export$243e62d78d3b544d.All?console.log.apply(console,$1615705ecc6adca3$var$__spreadArray([],$1615705ecc6adca3$var$__read(s),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings?console.warn.apply(console,$1615705ecc6adca3$var$__spreadArray(["WARNING"],$1615705ecc6adca3$var$__read(s),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&console.error.apply(console,$1615705ecc6adca3$var$__spreadArray(["ERROR"],$1615705ecc6adca3$var$__read(s),!1))},t}(),$1615705ecc6adca3$export$2e2bcd8739ae039=new $1615705ecc6adca3$var$Logger,$31d11a8d122cb4b7$exports={};$parcel$export($31d11a8d122cb4b7$exports,"Socket",()=>$31d11a8d122cb4b7$export$4798917dbf149b79,t=>$31d11a8d122cb4b7$export$4798917dbf149b79=t);var $60fadef21a2daafc$export$3157d57b4135e3bc;(function(t){t.Data="data",t.Media="media"})($60fadef21a2daafc$export$3157d57b4135e3bc||($60fadef21a2daafc$export$3157d57b4135e3bc={}));var $60fadef21a2daafc$export$9547aaa2e39030ff;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})($60fadef21a2daafc$export$9547aaa2e39030ff||($60fadef21a2daafc$export$9547aaa2e39030ff={}));var $60fadef21a2daafc$export$89f507cf986a947;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})($60fadef21a2daafc$export$89f507cf986a947||($60fadef21a2daafc$export$89f507cf986a947={}));var $60fadef21a2daafc$export$3b5c4a4b6354f023;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})($60fadef21a2daafc$export$3b5c4a4b6354f023||($60fadef21a2daafc$export$3b5c4a4b6354f023={}));var $60fadef21a2daafc$export$adb4a1754da6f10d;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})($60fadef21a2daafc$export$adb4a1754da6f10d||($60fadef21a2daafc$export$adb4a1754da6f10d={}));var $0d1ed891c5cb27c0$exports={};$0d1ed891c5cb27c0$exports=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var $31d11a8d122cb4b7$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$31d11a8d122cb4b7$var$__read=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},$31d11a8d122cb4b7$var$__spreadArray=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},$31d11a8d122cb4b7$var$__values=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$31d11a8d122cb4b7$export$4798917dbf149b79=function(t){$31d11a8d122cb4b7$var$__extends(e,t);function e(n,r,s,o,i,d){d===void 0&&(d=5e3);var l=t.call(this)||this;l.pingInterval=d,l._disconnected=!0,l._messagesQueue=[];var u=n?"wss://":"ws://";return l._baseUrl=u+r+":"+s+o+"peerjs?key="+i,l}return e.prototype.start=function(n,r){var s=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);!!this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+$0d1ed891c5cb27c0$exports.version),this._disconnected=!1,this._socket.onmessage=function(i){var d;try{d=JSON.parse(i.data),$1615705ecc6adca3$exports.default.log("Server message received:",d)}catch{$1615705ecc6adca3$exports.default.log("Invalid server message",i.data);return}s.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,d)},this._socket.onclose=function(i){s._disconnected||($1615705ecc6adca3$exports.default.log("Socket closed.",i),s._cleanup(),s._disconnected=!0,s.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=function(){s._disconnected||(s._sendQueuedMessages(),$1615705ecc6adca3$exports.default.log("Socket open"),s._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){$1615705ecc6adca3$exports.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,s=$31d11a8d122cb4b7$var$__spreadArray([],$31d11a8d122cb4b7$var$__read(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=$31d11a8d122cb4b7$var$__values(s),i=o.next();!i.done;i=o.next()){var d=i.value;this.send(d)}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(!!this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$exports={};$parcel$export($353dee38f9ab557b$exports,"MediaConnection",()=>$353dee38f9ab557b$export$4a84e95a2324ac29,t=>$353dee38f9ab557b$export$4a84e95a2324ac29=t);var $77f14d3e81888156$exports={};$parcel$export($77f14d3e81888156$exports,"Negotiator",()=>$77f14d3e81888156$export$89e6bb5ad64bf4a,t=>$77f14d3e81888156$export$89e6bb5ad64bf4a=t);var $77f14d3e81888156$var$__assign=function(){return $77f14d3e81888156$var$__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},$77f14d3e81888156$var$__assign.apply(this,arguments)},$77f14d3e81888156$var$__awaiter=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function d(_){try{u(r.next(_))}catch(a){i(a)}}function l(_){try{u(r.throw(_))}catch(a){i(a)}}function u(_){_.done?o(_.value):s(_.value).then(d,l)}u((r=r.apply(t,e||[])).next())})},$77f14d3e81888156$var$__generator=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(u){return function(_){return l([u,_])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(_){u=[6,_],s=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$77f14d3e81888156$export$89e6bb5ad64bf4a=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var r=this.connection,s={ordered:!!e.reliable},o=n.createDataChannel(r.label,s);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){$1615705ecc6adca3$exports.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,s=this.connection.connectionId,o=this.connection.type,i=this.connection.provider;$1615705ecc6adca3$exports.default.log("Listening for ICE candidates."),e.onicecandidate=function(d){!d.candidate||!d.candidate.candidate||($1615705ecc6adca3$exports.default.log("Received ICE candidates for ".concat(r,":"),d.candidate),i.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,payload:{candidate:d.candidate,type:o,connectionId:s},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":$1615705ecc6adca3$exports.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":$1615705ecc6adca3$exports.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":$1615705ecc6adca3$exports.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=$06cb531ed7840f78$export$7debb50ef11d5e0b.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},$1615705ecc6adca3$exports.default.log("Listening for data channel"),e.ondatachannel=function(d){$1615705ecc6adca3$exports.default.log("Received data channel");var l=d.channel,u=i.getConnection(r,s);u.initialize(l)},$1615705ecc6adca3$exports.default.log("Listening for remote stream"),e.ontrack=function(d){$1615705ecc6adca3$exports.default.log("Received remote stream");var l=d.streams[0],u=i.getConnection(r,s);if(u.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var _=u;n._addStreamToMediaConnection(l,_)}}},t.prototype.cleanup=function(){$1615705ecc6adca3$exports.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(!!e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var s=this.connection,o=s.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,n,r,s,o,i,d;return $77f14d3e81888156$var$__generator(this,function(l){switch(l.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,l.label=1;case 1:return l.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=l.sent(),$1615705ecc6adca3$exports.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return l.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),s={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data&&(o=this.connection,s=$77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({},s),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Offer,payload:s,dst:this.connection.peer}),[3,6];case 5:return i=l.sent(),i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,i),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",i)),[3,6];case 6:return[3,8];case 7:return d=l.sent(),n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to createOffer, ",d),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,n,r,s,o;return $77f14d3e81888156$var$__generator(this,function(i){switch(i.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,i.label=1;case 1:return i.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=i.sent(),$1615705ecc6adca3$exports.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return i.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},dst:this.connection.peer}),[3,6];case 5:return s=i.sent(),n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,s),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",s),[3,6];case 6:return[3,8];case 7:return o=i.sent(),n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,o),$1615705ecc6adca3$exports.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var r,s,o,i;return $77f14d3e81888156$var$__generator(this,function(d){switch(d.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,s=this.connection.provider,$1615705ecc6adca3$exports.default.log("Setting remote description",n),o=this,d.label=1;case 1:return d.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return d.sent(),$1615705ecc6adca3$exports.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:return i=d.sent(),s.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,i),$1615705ecc6adca3$exports.default.log("Failed to setRemoteDescription, ",i),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var n,r,s,o,i,d;return $77f14d3e81888156$var$__generator(this,function(l){switch(l.label){case 0:$1615705ecc6adca3$exports.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,s=e.sdpMid,o=this.connection.peerConnection,i=this.connection.provider,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:s,sdpMLineIndex:r,candidate:n}))];case 2:return l.sent(),$1615705ecc6adca3$exports.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return d=l.sent(),i.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if($1615705ecc6adca3$exports.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return $1615705ecc6adca3$exports.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){$1615705ecc6adca3$exports.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),$0b3b332fd86c5202$exports={};$parcel$export($0b3b332fd86c5202$exports,"BaseConnection",()=>$0b3b332fd86c5202$export$23a2a68283c24d80,t=>$0b3b332fd86c5202$export$23a2a68283c24d80=t);var $0b3b332fd86c5202$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$0b3b332fd86c5202$export$23a2a68283c24d80=function(t){$0b3b332fd86c5202$var$__extends(e,t);function e(n,r,s){var o=t.call(this)||this;return o.peer=n,o.provider=r,o.options=s,o._open=!1,o.metadata=s.metadata,o}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$353dee38f9ab557b$var$__assign=function(){return $353dee38f9ab557b$var$__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},$353dee38f9ab557b$var$__assign.apply(this,arguments)},$353dee38f9ab557b$var$__values=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$353dee38f9ab557b$export$4a84e95a2324ac29=function(t){$353dee38f9ab557b$var$__extends(e,t);function e(n,r,s){var o=t.call(this,n,r,s)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),o._negotiator=new $77f14d3e81888156$exports.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){$1615705ecc6adca3$exports.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,s=n.payload;switch(n.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(r,s.sdp),this._open=!0;break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var s,o;if(r===void 0&&(r={}),this._localStream){$1615705ecc6adca3$exports.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({},this.options._payload),{_stream:n}));var i=this.provider._getMessages(this.connectionId);try{for(var d=$353dee38f9ab557b$var$__values(i),l=d.next();!l.done;l=d.next()){var u=l.value;this.handleMessage(u)}}catch(_){s={error:_}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}($0b3b332fd86c5202$exports.BaseConnection),$3356170d7bce7f20$exports={};$parcel$export($3356170d7bce7f20$exports,"DataConnection",()=>$3356170d7bce7f20$export$d365f7ad9d7df9c9,t=>$3356170d7bce7f20$export$d365f7ad9d7df9c9=t);var $3014d862dcc9946b$exports={};$parcel$export($3014d862dcc9946b$exports,"EncodingQueue",()=>$3014d862dcc9946b$export$c6913ae0ed687038,t=>$3014d862dcc9946b$export$c6913ae0ed687038=t);var $3014d862dcc9946b$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$3014d862dcc9946b$export$c6913ae0ed687038=function(t){$3014d862dcc9946b$var$__extends(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){$1615705ecc6adca3$exports.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}($ac9b757d51178e15$exports.EventEmitter),$3356170d7bce7f20$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$3356170d7bce7f20$var$__values=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$3356170d7bce7f20$export$d365f7ad9d7df9c9=function(t){$3356170d7bce7f20$var$__extends(e,t);function e(n,r,s){var o=t.call(this,n,r,s)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new $3014d862dcc9946b$exports.EncodingQueue,o.connectionId=o.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||$60fadef21a2daafc$export$89f507cf986a947.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(i){o._bufferedSend(i)}),o._encodingQueue.on("error",function(){$1615705ecc6adca3$exports.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new $77f14d3e81888156$exports.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob||$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){$1615705ecc6adca3$exports.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,s=n.data,o=s.constructor,i=this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8,d=s;if(i){if(o===Blob){$06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(s,function(u){var _=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(u);r.emit("data",_)});return}else if(o===ArrayBuffer)d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(s);else if(o===String){var l=$06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(s);d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(l)}}else this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON&&(d=this.parse(s));if(d.__peerData){this._handleChunk(d);return}t.prototype.emit.call(this,"data",d)},e.prototype._handleChunk=function(n){var r=n.__peerData,s=this._chunkedData[r]||{data:[],count:0,total:n.total};if(s.data[n.n]=n.data,s.count++,this._chunkedData[r]=s,s.total===s.count){delete this._chunkedData[r];var o=new Blob(s.data);this._handleDataMessage({data:o})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8){var s=$06cb531ed7840f78$export$7debb50ef11d5e0b.pack(n);if(!r&&s.size>$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU){this._sendChunks(s);return}$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob?this._bufferedSend(s):this._encodingQueue.enque(s)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(s){return $1615705ecc6adca3$exports.default.error("DC#:".concat(this.connectionId," Error when sending:"),s),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,s,o=$06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(n);$1615705ecc6adca3$exports.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var i=$3356170d7bce7f20$var$__values(o),d=i.next();!d.done;d=i.next()){var l=d.value;this.send(l,!0)}}catch(u){r={error:u}}finally{try{d&&!d.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}($0b3b332fd86c5202$exports.BaseConnection),$9e85b3e1327369e6$exports={};$parcel$export($9e85b3e1327369e6$exports,"API",()=>$9e85b3e1327369e6$export$2c4e825dc9120f87,t=>$9e85b3e1327369e6$export$2c4e825dc9120f87=t);var $9e85b3e1327369e6$var$__awaiter=function(t,e,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function d(_){try{u(r.next(_))}catch(a){i(a)}}function l(_){try{u(r.throw(_))}catch(a){i(a)}}function u(_){_.done?o(_.value):s(_.value).then(d,l)}u((r=r.apply(t,e||[])).next())})},$9e85b3e1327369e6$var$__generator=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,i;return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(u){return function(_){return l([u,_])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=u[0]&2?s.return:u[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,u[1])).done)return o;switch(s=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(_){u=[6,_],s=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$9e85b3e1327369e6$export$2c4e825dc9120f87=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,s=r.host,o=r.port,i=r.path,d=r.key,l=new URL("".concat(n,"://").concat(s,":").concat(o).concat(i).concat(d,"/").concat(e));return l.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),l.searchParams.set("version",$0d1ed891c5cb27c0$exports.version),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,n,r;return $9e85b3e1327369e6$var$__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=s.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=s.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,n,r;return $9e85b3e1327369e6$var$__generator(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=s.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=s.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),$26088d7da5b03f69$var$__extends=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),$26088d7da5b03f69$var$__assign=function(){return $26088d7da5b03f69$var$__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},$26088d7da5b03f69$var$__assign.apply(this,arguments)},$26088d7da5b03f69$var$__values=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$26088d7da5b03f69$var$__read=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],i;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){i={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},$26088d7da5b03f69$export$ecd1fc136c422448=function(t){$26088d7da5b03f69$var$__extends(e,t);function e(n,r){var s=t.call(this)||this;s._id=null,s._lastServerId=null,s._destroyed=!1,s._disconnected=!1,s._open=!1,s._connections=new Map,s._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=$26088d7da5b03f69$var$__assign({debug:0,host:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,port:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),config:$06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),s._options=r,s._options.host==="/"&&(s._options.host=window.location.hostname),s._options.path&&(s._options.path[0]!=="/"&&(s._options.path="/"+s._options.path),s._options.path[s._options.path.length-1]!=="/"&&(s._options.path+="/")),s._options.secure===void 0&&s._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?s._options.secure=$06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure():s._options.host==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(s._options.secure=!0),s._options.logFunction&&$1615705ecc6adca3$exports.default.setLogFunction(s._options.logFunction),$1615705ecc6adca3$exports.default.logLevel=s._options.debug||0,s._api=new $9e85b3e1327369e6$exports.API(r),s._socket=s._createServerConnection(),!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data?(s._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC"),s):!!o&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(o)?(s._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID,'ID "'.concat(o,'" is invalid')),s):(o?s._initialize(o):s._api.retrieveId().then(function(i){return s._initialize(i)}).catch(function(i){return s._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,i)}),s)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,s=Object.create(null);try{for(var o=$26088d7da5b03f69$var$__values(this._connections),i=o.next();!i.done;i=o.next()){var d=$26088d7da5b03f69$var$__read(i.value,2),l=d[0],u=d[1];s[l]=u}}catch(_){n={error:_}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new $31d11a8d122cb4b7$exports.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,function(s){n._handleMessage(s)}),r.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,function(s){n._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError,s)}),r.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected,function(){n.disconnected||(n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network,"Lost connection to server."),n.disconnect())}),r.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close,function(){n.disconnected||n._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,s,o=n.type,i=n.payload,d=n.src;switch(o){case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,i.msg);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:$1615705ecc6adca3$exports.default.log("Received leave message from ".concat(d)),this._cleanupPeer(d),this._connections.delete(d);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable,"Could not connect to peer ".concat(d));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:var m=i.connectionId,v=this.getConnection(d,m);if(v&&(v.close(),$1615705ecc6adca3$exports.default.warn("Offer received for existing Connection ID:".concat(m))),i.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var l=new $353dee38f9ab557b$exports.MediaConnection(d,this,{connectionId:m,_payload:i,metadata:i.metadata});v=l,this._addConnection(d,v),this.emit("call",l)}else if(i.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var u=new $3356170d7bce7f20$exports.DataConnection(d,this,{connectionId:m,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});v=u,this._addConnection(d,v),this.emit("connection",u)}else{$1615705ecc6adca3$exports.default.warn("Received malformed connection type:".concat(i.type));return}var _=this._getMessages(m);try{for(var a=$26088d7da5b03f69$var$__values(_),c=a.next();!c.done;c=a.next()){var f=c.value;v.handleMessage(f)}}catch(g){r={error:g}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}break;default:if(!i){$1615705ecc6adca3$exports.default.warn("You received a malformed message from ".concat(d," of type ").concat(o));return}var m=i.connectionId,v=this.getConnection(d,m);v&&v.peerConnection?v.handleMessage(n):m?this._storeMessage(m,n):$1615705ecc6adca3$exports.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var s=new $3356170d7bce7f20$exports.DataConnection(n,this,r);return this._addConnection(n,s),s},e.prototype.call=function(n,r,s){if(s===void 0&&(s={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){$1615705ecc6adca3$exports.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new $353dee38f9ab557b$exports.MediaConnection(n,this,$26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({},s),{_stream:r}));return this._addConnection(n,o),o},e.prototype._addConnection=function(n,r){$1615705ecc6adca3$exports.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var s=r.indexOf(n);s!==-1&&r.splice(s,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var s,o,i=this._connections.get(n);if(!i)return null;try{for(var d=$26088d7da5b03f69$var$__values(i),l=d.next();!l.done;l=d.next()){var u=l.value;if(u.connectionId===r)return u}}catch(_){s={error:_}}finally{try{l&&!l.done&&(o=d.return)&&o.call(d)}finally{if(s)throw s.error}}return null},e.prototype._delayedAbort=function(n,r){var s=this;setTimeout(function(){s._abort(n,r)},0)},e.prototype._abort=function(n,r){$1615705ecc6adca3$exports.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){$1615705ecc6adca3$exports.default.error("Error:",r);var s;typeof r=="string"?s=new Error(r):s=r,s.type=n,this.emit("error",s)},e.prototype.destroy=function(){this.destroyed||($1615705ecc6adca3$exports.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var s=$26088d7da5b03f69$var$__values(this._connections.keys()),o=s.next();!o.done;o=s.next()){var i=o.value;this._cleanupPeer(i),this._connections.delete(i)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,s,o=this._connections.get(n);if(!!o)try{for(var i=$26088d7da5b03f69$var$__values(o),d=i.next();!d.done;d=i.next()){var l=d.value;l.close()}}catch(u){r={error:u}}finally{try{d&&!d.done&&(s=i.return)&&s.call(i)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;$1615705ecc6adca3$exports.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)$1615705ecc6adca3$exports.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$1615705ecc6adca3$exports.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(s){}),this._api.listAllPeers().then(function(s){return n(s)}).catch(function(s){return r._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,s)})},e.DEFAULT_KEY="peerjs",e}($ac9b757d51178e15$exports.EventEmitter);$26088d7da5b03f69$exports.Peer;const _hoisted_1$K={class:"input-group mb-2"},_hoisted_2$K=createBaseVNode("span",{class:"input-group-text bg-success theme-border text-white"},"Connected to:",-1),_hoisted_3$J=["value"],_hoisted_4$H=createBaseVNode("hr",null,null,-1),_hoisted_5$G={class:"d-flex flex-column mb-2"},_hoisted_6$B=createBaseVNode("h5",{class:"theme-color fw-bold"},"Reactions",-1),_hoisted_7$y={class:"input-group"},_hoisted_8$x=createBaseVNode("hr",null,null,-1),_hoisted_9$x={class:"input-group mb-2"},_hoisted_10$w=["onKeyup"],_hoisted_11$t={class:"alert alert-danger alert-dismissible fade show",role:"alert"},_hoisted_12$s={class:"progress",style:{height:"2em"}},_hoisted_13$s=createBaseVNode("div",{class:"progress-bar bg-success progress-bar-striped progress-bar-animated fw-bold unclickable",role:"progressbar","aria-label":"Animated striped example","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}}," Connecting... ",-1),_hoisted_14$s=[_hoisted_13$s],_hoisted_15$p={class:"d-flex flex-column card foreground p-3 rounded text-white"},_hoisted_16$o={class:"d-flex mb-2"},_hoisted_17$o={class:"theme-color"},_hoisted_18$n=["href"],_sfc_main$N={__name:"PeerJS",props:{peer:{type:Object},conn:{type:Object},peer_id:{type:String}},emits:["disconnected","show","reaction","message"],setup(t,{expose:e,emit:n}){const r=t,s=ref(null),o=ref("disconnected"),i=ref(null),d=ref(null),l=ref({show:!1,message:null}),u=ref({requester:{},recipient:{}}),_=computed(()=>"https://forte.buzl.uk/user/"+u.value.requester.username);async function a(){l.value={show:!1,message:null}}function c(){u.value.requester={},u.value.recipient={},store.peer_status="disconnected",n("disconnected")}async function f(V){l.value={show:!0,message:V}}async function m(){let V=s.value.value;!V.length||(r.conn.send({type:"message",message:V}),s.value.value="")}async function v(){b(),r.conn.send({type:"accept",peer_id:r.peer_id,username:JSON.parse(localStorage.getItem("username"))}),u.value.requester={},store.peer_status="connected",ft.reset()}async function g(){r.conn.send({type:"reject",peer_id:r.peer_id,username:JSON.parse(localStorage.getItem("username"))}),c(),n("reset")}async function y(){r.conn.send({type:"disconnect",peer_id:i.value,username:JSON.parse(localStorage.getItem("username"))}),c()}function b(){u.value.recipient=u.value.requester}function N(){r.conn.send({type:"ack"})}async function x(V){r.conn.send(V)}async function A(V){notify({title:"Reaction sent."}),r.conn.send({type:"reaction",event:V})}async function L(){N(),store.func_stack.pop()()}return r.conn.on("data",async function(V){if(V.type=="ack"){store.func_stack.pop()();return}if(V.type=="execute"){switch(V.operation){case"play":store.func_stack.push(async function(){ft.play()});break;case"playPrevious":store.func_stack.push(async function(){ft.play_previous()});break;case"playNext":store.func_stack.push(async function(){ft.play_next()});break;case"seek":store.func_stack.push(async function(){ft.seek(V.object)});break;case"repeat":store.func_stack.push(async function(){ft.repeat()});break;case"clearQueue":store.func_stack.push(async function(){if(!store.playing.is_playing){ft.setCurrentQueue([]),refresh_queue();return}let j=ft.getCurrentQueue();j=[j[store.queue_index]],store.queue_index=0,ft.setCurrentQueue(j),refresh_queue()});break;case"playQueueTrack":store.func_stack.push(async function(){let j=ft.getCurrentQueue();if(store.queue_index=V.object,j[store.queue_index].server){ft.load_federated_track(j[store.queue_index]);return}ft.load_track(j[store.queue_index])});break;case"addTrackToQueue":store.func_stack.push(async function(){ft.queueTrack(...V.object).then(()=>{notify({title:"Added to the queue."})})});break;case"addAlbumToQueue":store.func_stack.push(async function(){ft.queueAlbum(...V.object).then(()=>{notify({title:"Added to the queue."})})});break;case"addPlaylistToQueue":store.func_stack.push(async function(){ft.queuePlaylist(...V.object).then(()=>{notify({title:"Added to the queue."})})});break;case"removeQueueTrack":store.func_stack.push(async function(){ft.removeQueueTrack(...V.object)});break;case"playTrack":store.func_stack.push(async function(){ft.playTrack(...V.object)});break;case"playAlbum":store.func_stack.push(async function(){ft.playAlbum(...V.object)});break;case"playPlaylist":store.func_stack.push(async function(){ft.playPlaylist(...V.object)});break;case"playTrackNext":store.func_stack.push(async function(){ft.playTrackNext(...V.object)});break;case"playAlbumNext":store.func_stack.push(async function(){ft.playAlbumNext(...V.object)});break;case"playPlaylistNext":store.func_stack.push(async function(){ft.playPlaylistNext(...V.object)});break;default:return}L();return}if(V.type=="message"){notify_message({username:u.value.recipient.username,message:V.message});return}if(V.type=="reaction"){reaction(V.event);return}if(V.type=="connect"){u.value.requester={peer_id:V.peer_id,username:V.username},store.peer_status="requesting",n("show");return}if(V.type=="disconnect"){c();return}if(V.type=="accept"){u.value.recipient={peer_id:V.peer_id,username:V.username},store.peer_status="connected",ft.reset(),n("show");return}if(V.type=="reject"){store.peer_status="disconnected",f(V.username+" rejected your request."),c(),n("reset");return}}),e({status:o,peer_id:i,recipient_id:d,peer_event:x}),onMounted(()=>{window.addEventListener("peer",V=>{x(V.detail)})}),(V,P)=>(openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_1$K,[_hoisted_2$K,createBaseVNode("input",{type:"text",class:"form-control search-card-input",value:u.value.recipient.username,readonly:""},null,8,_hoisted_3$J)]),createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("button",{class:"btn btn-danger fw-bold",onClick:y},"Disconnect")]),_hoisted_4$H,createBaseVNode("div",_hoisted_5$G,[_hoisted_6$B,createBaseVNode("div",_hoisted_7$y,[createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[0]||(P[0]=j=>A("love"))},"\u2764\uFE0F"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[1]||(P[1]=j=>A("hand"))},"\u{1F918}"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[2]||(P[2]=j=>A("eyes"))},"\u{1F440}"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[3]||(P[3]=j=>A("ship"))},"\u{1F680}"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[4]||(P[4]=j=>A("bomb"))},"\u{1F4A3}"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[5]||(P[5]=j=>A("puke"))},"\u{1F92E}"),createBaseVNode("button",{class:"btn theme-btn clickable-opacity theme-border",type:"button",onClick:P[6]||(P[6]=j=>A("shit"))},"\u{1F4A9}")])]),_hoisted_8$x,createBaseVNode("div",_hoisted_9$x,[createBaseVNode("input",{ref_key:"message",ref:s,type:"text",class:"form-control search-card-input",placeholder:"Send a message...",onKeyup:withKeys(m,["enter"])},null,40,_hoisted_10$w),createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:m},"Send")])],512),[[vShow,unref(store).peer_status=="connected"]]),withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_11$t,[createTextVNode(toDisplayString(l.value.message)+" ",1),createBaseVNode("button",{type:"button",class:"btn-close",onClick:a})])],512),[[vShow,l.value.show]]),withDirectives(createBaseVNode("div",_hoisted_12$s,_hoisted_14$s,512),[[vShow,unref(store).peer_status=="disconnected.connecting"]]),withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_15$p,[createBaseVNode("div",_hoisted_16$o,[createBaseVNode("p",_hoisted_17$o,[createBaseVNode("a",{class:"text-danger fw-bold",href:unref(_)},toDisplayString(u.value.requester.username),9,_hoisted_18$n),createTextVNode(" wants to start a group session with you. ")])]),createBaseVNode("div",{class:"d-flex justify-content-between"},[createBaseVNode("button",{type:"button",class:"btn btn-danger fw-bold",onClick:g},"Reject"),createBaseVNode("button",{type:"button",class:"btn btn-success fw-bold",onClick:v},"Accept")])])],512),[[vShow,unref(store).peer_status=="requesting"]])],64))}},_hoisted_1$J={id:"groupSessionModal",class:"modal",role:"dialog",tabindex:"-1","aria-hidden":"true"},_hoisted_2$J={class:"modal-dialog modal-dialog-centered",role:"document"},_hoisted_3$I={class:"modal-content theme-bg theme-border"},_hoisted_4$G=createBaseVNode("div",{class:"modal-header d-flex flex-column border-bottom-0 pb-0"},[createBaseVNode("button",{class:"btn-close theme-filter",type:"button","data-bs-dismiss":"modal","aria-label":"Close"}),createBaseVNode("h2",{class:"modal-title theme-color fw-bold"},"Group Session"),createBaseVNode("span",{class:"text-muted"},"Connect to another user to start a group session.")],-1),_hoisted_5$F={class:"modal-body pt-0"},_hoisted_6$A=createBaseVNode("hr",null,null,-1),_hoisted_7$x={class:"input-group mb-2"},_hoisted_8$w={class:"form-floating"},_hoisted_9$w=["value"],_hoisted_10$v=createBaseVNode("label",{for:"floatingInputValue",class:"theme-label theme-color"},"My PeerID",-1),_hoisted_11$s={class:"input-group mb-2"},_sfc_main$M={__name:"GroupSession",emits:["reaction","message"],setup(t,{expose:e,emit:n}){const r=ref(null),s=ref(null),o=ref(null);let i=ref(null);const d=ref(!1),l=ref(null),u=ref(null),_=ref(0);async function a(){let L=u.value.value;!L.length||(store.peer_status="disconnected.connecting",o.value=s.value.connect(L),d.value=!0,o.value.on("open",()=>{o.value.send({type:"connect",peer_id:l.value,username:JSON.parse(localStorage.getItem("username"))})}))}async function c(L){store.peer_status="disconnected.connecting",o.value=s.value.connect(L),d.value=!0,o.value.on("open",()=>{o.value.send({type:"connect",peer_id:l.value,username:JSON.parse(localStorage.getItem("username"))})})}async function f(){b(),group_key()}async function m(){store.peer_status="disconnected"}async function v(L){n("reaction",L)}async function g(L){n("message",L)}async function y(){r.value.show()}async function b(){r.value.hide()}async function N(){r.value.toggle()}async function x(L){i.value.peer_event(L)}async function A(){navigator.clipboard.writeText("https://forte.buzl.uk/groupsession/"+l.value)}return e({show:y,hide:b,toggle:N,peer_event:x}),onMounted(()=>{r.value=new Modal(document.querySelector("#groupSessionModal")),s.value=new $26088d7da5b03f69$export$ecd1fc136c422448,s.value.on("open",L=>{l.value=L,store.queue_index=0,store.group_queue=[],store.func_stack=[];let V=JSON.parse(localStorage.getItem("group_session_id"));V&&(c(V),localStorage.removeItem("group_session_id"))}),s.value.on("connection",L=>{o.value=L,d.value=!0})}),(L,V)=>(openBlock(),createElementBlock("div",_hoisted_1$J,[createBaseVNode("div",_hoisted_2$J,[createBaseVNode("div",_hoisted_3$I,[_hoisted_4$G,createBaseVNode("div",_hoisted_5$F,[_hoisted_6$A,withDirectives(createBaseVNode("div",_hoisted_7$x,[createBaseVNode("form",_hoisted_8$w,[createBaseVNode("input",{type:"text",class:"form-control search-card-input",id:"floatingInputValue",value:l.value,readonly:""},null,8,_hoisted_9$w),_hoisted_10$v]),createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:A},"Copy")],512),[[vShow,unref(store).peer_status!="connected"]]),withDirectives(createBaseVNode("div",_hoisted_11$s,[createBaseVNode("input",{ref_key:"recipient_id",ref:u,type:"text",class:"form-control search-card-input",placeholder:"PeerID","aria-label":"Username","aria-describedby":"basic-addon1"},null,512),withDirectives(createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:a},"Connect",512),[[vShow,unref(store).peer_status=="disconnected"]]),withDirectives(createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:m},"Stop",512),[[vShow,unref(store).peer_status=="disconnected.connecting"]])],512),[[vShow,unref(store).peer_status.startsWith("disconnected")]]),d.value?(openBlock(),createBlock(_sfc_main$N,{ref_key:"thisPeerJS",ref:i,key:_.value,peer:s.value,conn:o.value,peer_id:l.value,onShow:y,onDisconnected:f,onReaction:v,onMessage:g},null,8,["peer","conn","peer_id"])):createCommentVNode("",!0)])])])]))}};var hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,s){var o=["","webkit","Moz","MS","ms","o"],i=n.createElement("div"),d="function",l=Math.round,u=Math.abs,_=Date.now;function a($,E,k){return setTimeout(N($,k),E)}function c($,E,k){return Array.isArray($)?(f($,k[E],k),!0):!1}function f($,E,k){var w;if(!!$)if($.forEach)$.forEach(E,k);else if($.length!==s)for(w=0;w<$.length;)E.call(k,$[w],w,$),w++;else for(w in $)$.hasOwnProperty(w)&&E.call(k,$[w],w,$)}function m($,E,k){var w="DEPRECATED METHOD: "+E+`
`+k+` AT 
`;return function(){var U=new Error("get-stack-trace"),ne=U&&U.stack?U.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",he=e.console&&(e.console.warn||e.console.log);return he&&he.call(e.console,w,ne),$.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(E){if(E===s||E===null)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(E),w=1;w<arguments.length;w++){var U=arguments[w];if(U!==s&&U!==null)for(var ne in U)U.hasOwnProperty(ne)&&(k[ne]=U[ne])}return k}:v=Object.assign;var g=m(function(E,k,w){for(var U=Object.keys(k),ne=0;ne<U.length;)(!w||w&&E[U[ne]]===s)&&(E[U[ne]]=k[U[ne]]),ne++;return E},"extend","Use `assign`."),y=m(function(E,k){return g(E,k,!0)},"merge","Use `assign`.");function b($,E,k){var w=E.prototype,U;U=$.prototype=Object.create(w),U.constructor=$,U._super=w,k&&v(U,k)}function N($,E){return function(){return $.apply(E,arguments)}}function x($,E){return typeof $==d?$.apply(E&&E[0]||s,E):$}function A($,E){return $===s?E:$}function L($,E,k){f(H(E),function(w){$.addEventListener(w,k,!1)})}function V($,E,k){f(H(E),function(w){$.removeEventListener(w,k,!1)})}function P($,E){for(;$;){if($==E)return!0;$=$.parentNode}return!1}function j($,E){return $.indexOf(E)>-1}function H($){return $.trim().split(/\s+/g)}function ae($,E,k){if($.indexOf&&!k)return $.indexOf(E);for(var w=0;w<$.length;){if(k&&$[w][k]==E||!k&&$[w]===E)return w;w++}return-1}function ie($){return Array.prototype.slice.call($,0)}function le($,E,k){for(var w=[],U=[],ne=0;ne<$.length;){var he=E?$[ne][E]:$[ne];ae(U,he)<0&&w.push($[ne]),U[ne]=he,ne++}return k&&(E?w=w.sort(function(Ee,Te){return Ee[E]>Te[E]}):w=w.sort()),w}function J($,E){for(var k,w,U=E[0].toUpperCase()+E.slice(1),ne=0;ne<o.length;){if(k=o[ne],w=k?k+U:E,w in $)return w;ne++}return s}var F=1;function G(){return F++}function C($){var E=$.ownerDocument||$;return E.defaultView||E.parentWindow||e}var D=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in e,z=J(e,"PointerEvent")!==s,pe=X&&D.test(navigator.userAgent),_e="touch",be="pen",ge="mouse",R="kinect",Q=25,Y=1,te=2,ee=4,ue=8,ce=1,T=2,S=4,B=8,O=16,I=T|S,W=B|O,Z=I|W,K=["x","y"],q=["clientX","clientY"];function M($,E){var k=this;this.manager=$,this.callback=E,this.element=$.element,this.target=$.options.inputTarget,this.domHandler=function(w){x($.options.enable,[$])&&k.handler(w)},this.init()}M.prototype={handler:function(){},init:function(){this.evEl&&L(this.element,this.evEl,this.domHandler),this.evTarget&&L(this.target,this.evTarget,this.domHandler),this.evWin&&L(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&V(this.element,this.evEl,this.domHandler),this.evTarget&&V(this.target,this.evTarget,this.domHandler),this.evWin&&V(C(this.element),this.evWin,this.domHandler)}};function oe($){var E,k=$.options.inputClass;return k?E=k:z?E=Xe:pe?E=We:X?E=Ze:E=Ye,new E($,re)}function re($,E,k){var w=k.pointers.length,U=k.changedPointers.length,ne=E&Y&&w-U===0,he=E&(ee|ue)&&w-U===0;k.isFirst=!!ne,k.isFinal=!!he,ne&&($.session={}),k.eventType=E,se($,k),$.emit("hammer.input",k),$.recognize(k),$.session.prevInput=k}function se($,E){var k=$.session,w=E.pointers,U=w.length;k.firstInput||(k.firstInput=ve(E)),U>1&&!k.firstMultiple?k.firstMultiple=ve(E):U===1&&(k.firstMultiple=!1);var ne=k.firstInput,he=k.firstMultiple,$e=he?he.center:ne.center,Ee=E.center=me(w);E.timeStamp=_(),E.deltaTime=E.timeStamp-ne.timeStamp,E.angle=Me($e,Ee),E.distance=Ce($e,Ee),de(k,E),E.offsetDirection=ke(E.deltaX,E.deltaY);var Te=ye(E.deltaTime,E.deltaX,E.deltaY);E.overallVelocityX=Te.x,E.overallVelocityY=Te.y,E.overallVelocity=u(Te.x)>u(Te.y)?Te.x:Te.y,E.scale=he?Ge(he.pointers,w):1,E.rotation=he?Ie(he.pointers,w):0,E.maxPointers=k.prevInput?E.pointers.length>k.prevInput.maxPointers?E.pointers.length:k.prevInput.maxPointers:E.pointers.length,fe(k,E);var Be=$.element;P(E.srcEvent.target,Be)&&(Be=E.srcEvent.target),E.target=Be}function de($,E){var k=E.center,w=$.offsetDelta||{},U=$.prevDelta||{},ne=$.prevInput||{};(E.eventType===Y||ne.eventType===ee)&&(U=$.prevDelta={x:ne.deltaX||0,y:ne.deltaY||0},w=$.offsetDelta={x:k.x,y:k.y}),E.deltaX=U.x+(k.x-w.x),E.deltaY=U.y+(k.y-w.y)}function fe($,E){var k=$.lastInterval||E,w=E.timeStamp-k.timeStamp,U,ne,he,$e;if(E.eventType!=ue&&(w>Q||k.velocity===s)){var Ee=E.deltaX-k.deltaX,Te=E.deltaY-k.deltaY,Be=ye(w,Ee,Te);ne=Be.x,he=Be.y,U=u(Be.x)>u(Be.y)?Be.x:Be.y,$e=ke(Ee,Te),$.lastInterval=E}else U=k.velocity,ne=k.velocityX,he=k.velocityY,$e=k.direction;E.velocity=U,E.velocityX=ne,E.velocityY=he,E.direction=$e}function ve($){for(var E=[],k=0;k<$.pointers.length;)E[k]={clientX:l($.pointers[k].clientX),clientY:l($.pointers[k].clientY)},k++;return{timeStamp:_(),pointers:E,center:me(E),deltaX:$.deltaX,deltaY:$.deltaY}}function me($){var E=$.length;if(E===1)return{x:l($[0].clientX),y:l($[0].clientY)};for(var k=0,w=0,U=0;U<E;)k+=$[U].clientX,w+=$[U].clientY,U++;return{x:l(k/E),y:l(w/E)}}function ye($,E,k){return{x:E/$||0,y:k/$||0}}function ke($,E){return $===E?ce:u($)>=u(E)?$<0?T:S:E<0?B:O}function Ce($,E,k){k||(k=K);var w=E[k[0]]-$[k[0]],U=E[k[1]]-$[k[1]];return Math.sqrt(w*w+U*U)}function Me($,E,k){k||(k=K);var w=E[k[0]]-$[k[0]],U=E[k[1]]-$[k[1]];return Math.atan2(U,w)*180/Math.PI}function Ie($,E){return Me(E[1],E[0],q)+Me($[1],$[0],q)}function Ge($,E){return Ce(E[0],E[1],q)/Ce($[0],$[1],q)}var Ne={mousedown:Y,mousemove:te,mouseup:ee},Se="mousedown",Ue="mousemove mouseup";function Ye(){this.evEl=Se,this.evWin=Ue,this.pressed=!1,M.apply(this,arguments)}b(Ye,M,{handler:function(E){var k=Ne[E.type];k&Y&&E.button===0&&(this.pressed=!0),k&te&&E.which!==1&&(k=ee),this.pressed&&(k&ee&&(this.pressed=!1),this.callback(this.manager,k,{pointers:[E],changedPointers:[E],pointerType:ge,srcEvent:E}))}});var $t={pointerdown:Y,pointermove:te,pointerup:ee,pointercancel:ue,pointerout:ue},Et={2:_e,3:be,4:ge,5:R},it="pointerdown",lt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(it="MSPointerDown",lt="MSPointerMove MSPointerUp MSPointerCancel");function Xe(){this.evEl=it,this.evWin=lt,M.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b(Xe,M,{handler:function(E){var k=this.store,w=!1,U=E.type.toLowerCase().replace("ms",""),ne=$t[U],he=Et[E.pointerType]||E.pointerType,$e=he==_e,Ee=ae(k,E.pointerId,"pointerId");ne&Y&&(E.button===0||$e)?Ee<0&&(k.push(E),Ee=k.length-1):ne&(ee|ue)&&(w=!0),!(Ee<0)&&(k[Ee]=E,this.callback(this.manager,ne,{pointers:k,changedPointers:[E],pointerType:he,srcEvent:E}),w&&k.splice(Ee,1))}});var Nt={touchstart:Y,touchmove:te,touchend:ee,touchcancel:ue},Tt="touchstart",kt="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=Tt,this.evWin=kt,this.started=!1,M.apply(this,arguments)}b(ct,M,{handler:function(E){var k=Nt[E.type];if(k===Y&&(this.started=!0),!!this.started){var w=St.call(this,E,k);k&(ee|ue)&&w[0].length-w[1].length===0&&(this.started=!1),this.callback(this.manager,k,{pointers:w[0],changedPointers:w[1],pointerType:_e,srcEvent:E})}}});function St($,E){var k=ie($.touches),w=ie($.changedTouches);return E&(ee|ue)&&(k=le(k.concat(w),"identifier",!0)),[k,w]}var xt={touchstart:Y,touchmove:te,touchend:ee,touchcancel:ue},Ct="touchstart touchmove touchend touchcancel";function We(){this.evTarget=Ct,this.targetIds={},M.apply(this,arguments)}b(We,M,{handler:function(E){var k=xt[E.type],w=wt.call(this,E,k);!w||this.callback(this.manager,k,{pointers:w[0],changedPointers:w[1],pointerType:_e,srcEvent:E})}});function wt($,E){var k=ie($.touches),w=this.targetIds;if(E&(Y|te)&&k.length===1)return w[k[0].identifier]=!0,[k,k];var U,ne,he=ie($.changedTouches),$e=[],Ee=this.target;if(ne=k.filter(function(Te){return P(Te.target,Ee)}),E===Y)for(U=0;U<ne.length;)w[ne[U].identifier]=!0,U++;for(U=0;U<he.length;)w[he[U].identifier]&&$e.push(he[U]),E&(ee|ue)&&delete w[he[U].identifier],U++;if(!!$e.length)return[le(ne.concat($e),"identifier",!0),$e]}var At=2500,dt=25;function Ze(){M.apply(this,arguments);var $=N(this.handler,this);this.touch=new We(this.manager,$),this.mouse=new Ye(this.manager,$),this.primaryTouch=null,this.lastTouches=[]}b(Ze,M,{handler:function(E,k,w){var U=w.pointerType==_e,ne=w.pointerType==ge;if(!(ne&&w.sourceCapabilities&&w.sourceCapabilities.firesTouchEvents)){if(U)Bt.call(this,k,w);else if(ne&&Vt.call(this,w))return;this.callback(E,k,w)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Bt($,E){$&Y?(this.primaryTouch=E.changedPointers[0].identifier,ut.call(this,E)):$&(ee|ue)&&ut.call(this,E)}function ut($){var E=$.changedPointers[0];if(E.identifier===this.primaryTouch){var k={x:E.clientX,y:E.clientY};this.lastTouches.push(k);var w=this.lastTouches,U=function(){var ne=w.indexOf(k);ne>-1&&w.splice(ne,1)};setTimeout(U,At)}}function Vt($){for(var E=$.srcEvent.clientX,k=$.srcEvent.clientY,w=0;w<this.lastTouches.length;w++){var U=this.lastTouches[w],ne=Math.abs(E-U.x),he=Math.abs(k-U.y);if(ne<=dt&&he<=dt)return!0}return!1}var pt=J(i.style,"touchAction"),ht=pt!==s,_t="compute",mt="auto",et="manipulation",De="none",Fe="pan-x",je="pan-y",Je=Ot();function tt($,E){this.manager=$,this.set(E)}tt.prototype={set:function($){$==_t&&($=this.compute()),ht&&this.manager.element.style&&Je[$]&&(this.manager.element.style[pt]=$),this.actions=$.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var $=[];return f(this.manager.recognizers,function(E){x(E.options.enable,[E])&&($=$.concat(E.getTouchAction()))}),Pt($.join(" "))},preventDefaults:function($){var E=$.srcEvent,k=$.offsetDirection;if(this.manager.session.prevented){E.preventDefault();return}var w=this.actions,U=j(w,De)&&!Je[De],ne=j(w,je)&&!Je[je],he=j(w,Fe)&&!Je[Fe];if(U){var $e=$.pointers.length===1,Ee=$.distance<2,Te=$.deltaTime<250;if($e&&Ee&&Te)return}if(!(he&&ne)&&(U||ne&&k&I||he&&k&W))return this.preventSrc(E)},preventSrc:function($){this.manager.session.prevented=!0,$.preventDefault()}};function Pt($){if(j($,De))return De;var E=j($,Fe),k=j($,je);return E&&k?De:E||k?E?Fe:je:j($,et)?et:mt}function Ot(){if(!ht)return!1;var $={},E=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(k){$[k]=E?e.CSS.supports("touch-action",k):!0}),$}var qe=1,xe=2,Le=4,Re=8,Ve=Re,He=16,Ae=32;function Pe($){this.options=v({},this.defaults,$||{}),this.id=G(),this.manager=null,this.options.enable=A(this.options.enable,!0),this.state=qe,this.simultaneous={},this.requireFail=[]}Pe.prototype={defaults:{},set:function($){return v(this.options,$),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function($){if(c($,"recognizeWith",this))return this;var E=this.simultaneous;return $=Ke($,this),E[$.id]||(E[$.id]=$,$.recognizeWith(this)),this},dropRecognizeWith:function($){return c($,"dropRecognizeWith",this)?this:($=Ke($,this),delete this.simultaneous[$.id],this)},requireFailure:function($){if(c($,"requireFailure",this))return this;var E=this.requireFail;return $=Ke($,this),ae(E,$)===-1&&(E.push($),$.requireFailure(this)),this},dropRequireFailure:function($){if(c($,"dropRequireFailure",this))return this;$=Ke($,this);var E=ae(this.requireFail,$);return E>-1&&this.requireFail.splice(E,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function($){return!!this.simultaneous[$.id]},emit:function($){var E=this,k=this.state;function w(U){E.manager.emit(U,$)}k<Re&&w(E.options.event+vt(k)),w(E.options.event),$.additionalEvent&&w($.additionalEvent),k>=Re&&w(E.options.event+vt(k))},tryEmit:function($){if(this.canEmit())return this.emit($);this.state=Ae},canEmit:function(){for(var $=0;$<this.requireFail.length;){if(!(this.requireFail[$].state&(Ae|qe)))return!1;$++}return!0},recognize:function($){var E=v({},$);if(!x(this.options.enable,[this,E])){this.reset(),this.state=Ae;return}this.state&(Ve|He|Ae)&&(this.state=qe),this.state=this.process(E),this.state&(xe|Le|Re|He)&&this.tryEmit(E)},process:function($){},getTouchAction:function(){},reset:function(){}};function vt($){return $&He?"cancel":$&Re?"end":$&Le?"move":$&xe?"start":""}function gt($){return $==O?"down":$==B?"up":$==T?"left":$==S?"right":""}function Ke($,E){var k=E.manager;return k?k.get($):$}function we(){Pe.apply(this,arguments)}b(we,Pe,{defaults:{pointers:1},attrTest:function($){var E=this.options.pointers;return E===0||$.pointers.length===E},process:function($){var E=this.state,k=$.eventType,w=E&(xe|Le),U=this.attrTest($);return w&&(k&ue||!U)?E|He:w||U?k&ee?E|Re:E&xe?E|Le:xe:Ae}});function ze(){we.apply(this,arguments),this.pX=null,this.pY=null}b(ze,we,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var $=this.options.direction,E=[];return $&I&&E.push(je),$&W&&E.push(Fe),E},directionTest:function($){var E=this.options,k=!0,w=$.distance,U=$.direction,ne=$.deltaX,he=$.deltaY;return U&E.direction||(E.direction&I?(U=ne===0?ce:ne<0?T:S,k=ne!=this.pX,w=Math.abs($.deltaX)):(U=he===0?ce:he<0?B:O,k=he!=this.pY,w=Math.abs($.deltaY))),$.direction=U,k&&w>E.threshold&&U&E.direction},attrTest:function($){return we.prototype.attrTest.call(this,$)&&(this.state&xe||!(this.state&xe)&&this.directionTest($))},emit:function($){this.pX=$.deltaX,this.pY=$.deltaY;var E=gt($.direction);E&&($.additionalEvent=this.options.event+E),this._super.emit.call(this,$)}});function nt(){we.apply(this,arguments)}b(nt,we,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function($){return this._super.attrTest.call(this,$)&&(Math.abs($.scale-1)>this.options.threshold||this.state&xe)},emit:function($){if($.scale!==1){var E=$.scale<1?"in":"out";$.additionalEvent=this.options.event+E}this._super.emit.call(this,$)}});function rt(){Pe.apply(this,arguments),this._timer=null,this._input=null}b(rt,Pe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[mt]},process:function($){var E=this.options,k=$.pointers.length===E.pointers,w=$.distance<E.threshold,U=$.deltaTime>E.time;if(this._input=$,!w||!k||$.eventType&(ee|ue)&&!U)this.reset();else if($.eventType&Y)this.reset(),this._timer=a(function(){this.state=Ve,this.tryEmit()},E.time,this);else if($.eventType&ee)return Ve;return Ae},reset:function(){clearTimeout(this._timer)},emit:function($){this.state===Ve&&($&&$.eventType&ee?this.manager.emit(this.options.event+"up",$):(this._input.timeStamp=_(),this.manager.emit(this.options.event,this._input)))}});function st(){we.apply(this,arguments)}b(st,we,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[De]},attrTest:function($){return this._super.attrTest.call(this,$)&&(Math.abs($.rotation)>this.options.threshold||this.state&xe)}});function ot(){we.apply(this,arguments)}b(ot,we,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:I|W,pointers:1},getTouchAction:function(){return ze.prototype.getTouchAction.call(this)},attrTest:function($){var E=this.options.direction,k;return E&(I|W)?k=$.overallVelocity:E&I?k=$.overallVelocityX:E&W&&(k=$.overallVelocityY),this._super.attrTest.call(this,$)&&E&$.offsetDirection&&$.distance>this.options.threshold&&$.maxPointers==this.options.pointers&&u(k)>this.options.velocity&&$.eventType&ee},emit:function($){var E=gt($.offsetDirection);E&&this.manager.emit(this.options.event+E,$),this.manager.emit(this.options.event,$)}});function Qe(){Pe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}b(Qe,Pe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[et]},process:function($){var E=this.options,k=$.pointers.length===E.pointers,w=$.distance<E.threshold,U=$.deltaTime<E.time;if(this.reset(),$.eventType&Y&&this.count===0)return this.failTimeout();if(w&&U&&k){if($.eventType!=ee)return this.failTimeout();var ne=this.pTime?$.timeStamp-this.pTime<E.interval:!0,he=!this.pCenter||Ce(this.pCenter,$.center)<E.posThreshold;this.pTime=$.timeStamp,this.pCenter=$.center,!he||!ne?this.count=1:this.count+=1,this._input=$;var $e=this.count%E.taps;if($e===0)return this.hasRequireFailures()?(this._timer=a(function(){this.state=Ve,this.tryEmit()},E.interval,this),xe):Ve}return Ae},failTimeout:function(){return this._timer=a(function(){this.state=Ae},this.options.interval,this),Ae},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Oe($,E){return E=E||{},E.recognizers=A(E.recognizers,Oe.defaults.preset),new at($,E)}Oe.VERSION="2.0.7",Oe.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[nt,{enable:!1},["rotate"]],[ot,{direction:I}],[ze,{direction:I},["swipe"]],[Qe],[Qe,{event:"doubletap",taps:2},["tap"]],[rt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Rt=1,yt=2;function at($,E){this.options=v({},Oe.defaults,E||{}),this.options.inputTarget=this.options.inputTarget||$,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=$,this.input=oe(this),this.touchAction=new tt(this,this.options.touchAction),bt(this,!0),f(this.options.recognizers,function(k){var w=this.add(new k[0](k[1]));k[2]&&w.recognizeWith(k[2]),k[3]&&w.requireFailure(k[3])},this)}at.prototype={set:function($){return v(this.options,$),$.touchAction&&this.touchAction.update(),$.inputTarget&&(this.input.destroy(),this.input.target=$.inputTarget,this.input.init()),this},stop:function($){this.session.stopped=$?yt:Rt},recognize:function($){var E=this.session;if(!E.stopped){this.touchAction.preventDefaults($);var k,w=this.recognizers,U=E.curRecognizer;(!U||U&&U.state&Ve)&&(U=E.curRecognizer=null);for(var ne=0;ne<w.length;)k=w[ne],E.stopped!==yt&&(!U||k==U||k.canRecognizeWith(U))?k.recognize($):k.reset(),!U&&k.state&(xe|Le|Re)&&(U=E.curRecognizer=k),ne++}},get:function($){if($ instanceof Pe)return $;for(var E=this.recognizers,k=0;k<E.length;k++)if(E[k].options.event==$)return E[k];return null},add:function($){if(c($,"add",this))return this;var E=this.get($.options.event);return E&&this.remove(E),this.recognizers.push($),$.manager=this,this.touchAction.update(),$},remove:function($){if(c($,"remove",this))return this;if($=this.get($),$){var E=this.recognizers,k=ae(E,$);k!==-1&&(E.splice(k,1),this.touchAction.update())}return this},on:function($,E){if($!==s&&E!==s){var k=this.handlers;return f(H($),function(w){k[w]=k[w]||[],k[w].push(E)}),this}},off:function($,E){if($!==s){var k=this.handlers;return f(H($),function(w){E?k[w]&&k[w].splice(ae(k[w],E),1):delete k[w]}),this}},emit:function($,E){this.options.domEvents&&It($,E);var k=this.handlers[$]&&this.handlers[$].slice();if(!(!k||!k.length)){E.type=$,E.preventDefault=function(){E.srcEvent.preventDefault()};for(var w=0;w<k.length;)k[w](E),w++}},destroy:function(){this.element&&bt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function bt($,E){var k=$.element;if(!!k.style){var w;f($.options.cssProps,function(U,ne){w=J(k.style,ne),E?($.oldCssProps[w]=k.style[w],k.style[w]=U):k.style[w]=$.oldCssProps[w]||""}),E||($.oldCssProps={})}}function It($,E){var k=n.createEvent("Event");k.initEvent($,!0,!0),k.gesture=E,E.target.dispatchEvent(k)}v(Oe,{INPUT_START:Y,INPUT_MOVE:te,INPUT_END:ee,INPUT_CANCEL:ue,STATE_POSSIBLE:qe,STATE_BEGAN:xe,STATE_CHANGED:Le,STATE_ENDED:Re,STATE_RECOGNIZED:Ve,STATE_CANCELLED:He,STATE_FAILED:Ae,DIRECTION_NONE:ce,DIRECTION_LEFT:T,DIRECTION_RIGHT:S,DIRECTION_UP:B,DIRECTION_DOWN:O,DIRECTION_HORIZONTAL:I,DIRECTION_VERTICAL:W,DIRECTION_ALL:Z,Manager:at,Input:M,TouchAction:tt,TouchInput:We,MouseInput:Ye,PointerEventInput:Xe,TouchMouseInput:Ze,SingleTouchInput:ct,Recognizer:Pe,AttrRecognizer:we,Tap:Qe,Pan:ze,Swipe:ot,Pinch:nt,Rotate:st,Press:rt,on:L,off:V,each:f,merge:y,extend:g,assign:v,inherit:b,bindFn:N,prefixed:J});var Dt=typeof e<"u"?e:typeof self<"u"?self:{};Dt.Hammer=Oe,typeof s=="function"&&s.amd?s(function(){return Oe}):t.exports?t.exports=Oe:e[r]=Oe})(window,document,"Hammer")})(hammer);const Hammer=hammer.exports,_hoisted_1$I=createBaseVNode("div",{class:"offcanvas-header d-flex bg-dark text-white justify-content-end"},[createBaseVNode("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),_hoisted_2$I={class:"offcanvas-body"},_hoisted_3$H={class:"list-group"},_hoisted_4$F=createBaseVNode("div",{class:"d-flex align-items-center"},[createBaseVNode("span",{class:"fw-bold"},"Queue")],-1),_hoisted_5$E=["onClick"],_hoisted_6$z={class:"d-flex"},_hoisted_7$w={class:"d-flex align-items-center"},_hoisted_8$v=["src"],_hoisted_9$v={class:"d-flex align-items-center"},_hoisted_10$u=["content_id"],_hoisted_11$r={class:"text-muted me-2"},_hoisted_12$r={class:"theme-color text-break"},_hoisted_13$r={class:"d-flex h-100 align-items-center"},_hoisted_14$r=["onClick"],_sfc_main$L={__name:"Queue",setup(t,{expose:e}){let n=null;const r=ref(null),s=ref(store.queue);async function o(f){f.target.src="/images/track.svg"}async function i(f){action({func:async function(){ft.removeQueueTrack(f)},object:[f],operation:"removeQueueTrack"})}function d(f){return f?f.startsWith("http")?f:ft.server+"/"+f:"/images/track.svg"}function l(f){for(let m=f.length-1;m>0;m--){const v=Math.floor(Math.random()*(m+1)),g=f[m];f[m]=f[v],f[v]=g}}function u(){s.value=ft.getCurrentQueue(),n.show()}async function _(){if(ft.inGroupSession()){notify({title:"You can't use shuffle in a group session."});return}if(!store.playing.is_playing){l(store.queue),s.value=store.queue;return}let f=store.queue[store.queue_index];store.queue.splice(store.queue_index,1),l(store.queue),store.queue.unshift(f),store.queue_index=0,s.value=store.queue}async function a(){action({func:async function(){if(!store.playing.is_playing){ft.setCurrentQueue([]),refresh_queue();return}let m=ft.getCurrentQueue();m=[m[store.queue_index]],store.queue_index=0,ft.setCurrentQueue(m),refresh_queue()},object:[null],operation:"clearQueue"})}async function c(f){action({func:async function(){let v=ft.getCurrentQueue();if(store.queue_index=f,v[store.queue_index].server){ft.load_federated_track(v[store.queue_index]);return}ft.load_track(v[store.queue_index])},object:[f],operation:"playQueueTrack"})}return e({show:u,shuffle:_}),onMounted(()=>{n=new Offcanvas(r.value),window.addEventListener("queue",()=>{s.value=ft.getCurrentQueue()})}),(f,m)=>(openBlock(),createElementBlock("div",{ref_key:"offcanvasEl",ref:r,class:"offcanvas offcanvas-bottom border-0 vh-100 vw-100",tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel",style:{"z-index":"1046"}},[_hoisted_1$I,createBaseVNode("div",_hoisted_2$I,[createBaseVNode("ul",_hoisted_3$H,[createBaseVNode("li",{class:"list-group-item bg-dark text-light d-flex pe-1"},[createBaseVNode("div",{class:"d-flex justify-content-between w-100"},[_hoisted_4$F,createBaseVNode("div",null,[createBaseVNode("button",{class:"btn btn-dark theme-btn black-on-hover fw-bold",onClick:a},"Clear")])])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,(v,g)=>(openBlock(),createElementBlock("li",{class:normalizeClass(["list-group-item theme-list-item foreground-content clickable d-flex p-1",{"now-playing":g===unref(store).queue_index}])},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between",onClick:y=>c(g)},[createBaseVNode("div",_hoisted_6$z,[createBaseVNode("div",_hoisted_7$w,[createBaseVNode("img",{src:d(v.cover),class:"track-cover theme-border rounded",onError:o},null,40,_hoisted_8$v)]),createBaseVNode("div",_hoisted_9$v,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:v.id,style:{display:"contents"}},[createBaseVNode("span",_hoisted_11$r,toDisplayString(g+1)+".",1),createBaseVNode("span",_hoisted_12$r,toDisplayString(v.title),1)],8,_hoisted_10$u)])])],8,_hoisted_5$E),createBaseVNode("div",_hoisted_13$r,[createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold action-btn bi bi-x ms-0 m-2",type:"button",onClick:y=>i(g)},null,8,_hoisted_14$r)])],2))),256))])])],512))}},_hoisted_1$H={id:"lyricsModal",class:"modal",tabindex:"-1"},_hoisted_2$H={class:"modal-dialog modal-dialog-scrollable modal-dialog-centered"},_hoisted_3$G={class:"modal-content theme-bg theme-border"},_hoisted_4$E={class:"modal-header border-bottom-0 pb-0"},_hoisted_5$D={class:"modal-title fs-5 theme-color fw-bold"},_hoisted_6$y=createBaseVNode("button",{type:"button",class:"btn-close theme-filter","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_hoisted_7$v={class:"modal-body pt-0"},_hoisted_8$u=createBaseVNode("hr",null,null,-1),_hoisted_9$u=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("div",{class:"spinner-border",role:"status"},[createBaseVNode("span",{class:"visually-hidden"},"Loading...")])],-1),_hoisted_10$t=[_hoisted_9$u],_hoisted_11$q=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("h1",{class:"fs-5 fw-bold"},"Lyrics not found")],-1),_hoisted_12$q=[_hoisted_11$q],_hoisted_13$q={class:"lyrics theme-color"},_hoisted_14$q=createBaseVNode("hr",null,null,-1),_hoisted_15$o=["href"],_sfc_main$K={__name:"Lyrics",setup(__props,{expose}){const url=ref(null),modal=ref(null),track_id=ref(null),lyrics_id=ref(null),loaded=ref(!1),error=ref(!1);async function _get_lyrics(preload=!1){if(!store.playing.loaded)return;if(store.playing.type!="track"){notify({title:"Can't get lyrics for this item."});return}if(!preload){_show();return}if(error.value=!1,store.playing.id==track_id.value){loaded.value=!0;return}loaded.value=!1,error.value=!1;let artist_id=store.playing.artist,title=store.playing.title,server=null;store.playing.server&&(server=store.playing.server,artist_id=`${store.playing.artist}@${store.playing.server}`);let response=await ft.lyrics(artist_id,title,server);if(!response||response.error){document.querySelector(".lyrics").innerHTML="",track_id.value=store.playing.id,error.value=!0,loaded.value=!0;return}url.value=response.url,lyrics_id.value=response.id;let lyrics=await fetch(`https://genius.com/songs/${lyrics_id.value}/embed.js`).then(t=>t.text()),div=document.createElement("div");div.innerHTML=eval(lyrics.match(/JSON\.parse\('(.*)'\)/)[0]);try{div.querySelector(".rg_embed_header").remove(),div.querySelector(".rg_embed_footer").remove(),div.querySelector(`#rg_embed_analytics_${lyrics_id.value}`).remove()}catch(t){console.info(t)}document.querySelector(".lyrics").innerHTML=div.innerHTML,loaded.value=!0}function _show(){modal.value.show()}return expose({get_lyrics:_get_lyrics}),onMounted(()=>{modal.value=new Modal(document.querySelector("#lyricsModal")),window.addEventListener("lyrics",t=>{_get_lyrics(!0)})}),(t,e)=>(openBlock(),createElementBlock("div",_hoisted_1$H,[createBaseVNode("div",_hoisted_2$H,[createBaseVNode("div",_hoisted_3$G,[createBaseVNode("div",_hoisted_4$E,[createBaseVNode("h1",_hoisted_5$D,toDisplayString(unref(store).playing.title),1),_hoisted_6$y]),createBaseVNode("div",_hoisted_7$v,[_hoisted_8$u,withDirectives(createBaseVNode("div",null,_hoisted_10$t,512),[[vShow,!loaded.value]]),withDirectives(createBaseVNode("div",null,_hoisted_12$q,512),[[vShow,error.value]]),withDirectives(createBaseVNode("div",_hoisted_13$q,null,512),[[vShow,loaded.value]]),_hoisted_14$q,withDirectives(createBaseVNode("div",null,[createBaseVNode("a",{class:"theme-color fw-bold",href:url.value,target:"_blank"},"Source",8,_hoisted_15$o)],512),[[vShow,loaded.value]])])])])]))}},_hoisted_1$G={class:"offcanvas-body"},_hoisted_2$G={class:"row h-100 justify-content-center align-items-end gx-0"},_hoisted_3$F={class:"col h-100"},_hoisted_4$D={class:"m-3"},_hoisted_5$C=["src"],_hoisted_6$x={class:"overflow-hidden text-center mt-0 m-3"},_hoisted_7$u={class:"fw-bold theme-btn black-on-hover text-white rounded p-2"},_hoisted_8$t={class:"card-body d-flex align-items-end p-2"},_hoisted_9$t={class:"d-flex flex-fill flex-column"},_hoisted_10$s={class:"d-flex justify-content-between"},_hoisted_11$p={class:"d-flex align-items-center font-monospace theme-color me-2"},_hoisted_12$p={class:"d-flex align-items-center font-monospace theme-color me-2"},_hoisted_13$p=createBaseVNode("span",{class:"visually-hidden"},null,-1),_hoisted_14$p=[_hoisted_13$p],_hoisted_15$n={class:"btn-group btn-group-sm mb-2",role:"group","aria-label":"Basic example"},_hoisted_16$n=createBaseVNode("hr",null,null,-1),_hoisted_17$n={class:"d-flex justify-content-between"},_sfc_main$J={__name:"MobileView",props:{seekProgress:{type:Function,default:()=>{}},play:{type:Function,default:()=>{}},play_next:{type:Function,default:()=>{}},play_previous:{type:Function,default:()=>{}},repeat_icon:{type:String,default:"bi-repeat text-muted"}},emits:["queue","lyrics","shuffle","group_session","quality"],setup(t,{expose:e,emit:n}){const r=t,s=useRouter();let o=null;const i=ref(null),d=ref(null);async function l(v){v.target.src="/images/track.svg"}async function u(){store.selected_track_id=store.playing.id,s.push("/album/"+store.playing.album),c()}function _(v){return v?v.startsWith("http")?v:ft.server+"/"+v:"/images/track.svg"}function a(){o.show()}function c(){o.hide()}function f(v){let g=parseInt(v),y=Math.floor(g/60);return g=g%60,y+":"+(g<10?"0":"")+g}async function m(){action({func:async function(){ft.repeat()},object:[null],operation:"repeat"})}return e({show:a,hide:c}),onMounted(()=>{let v=new Hammer(d.value);v.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),v.on("swipedown",function(){c()}),o=new Offcanvas(i.value)}),(v,g)=>(openBlock(),createElementBlock("div",{ref_key:"offcanvasEl",ref:i,class:"offcanvas offcanvas-bottom bg-dark border-0 vh-100 vw-100",tabindex:"-1",id:"offcanvasBottom","aria-labelledby":"offcanvasBottomLabel"},[createBaseVNode("div",_hoisted_1$G,[createBaseVNode("div",_hoisted_2$G,[createBaseVNode("div",_hoisted_3$F,[createBaseVNode("div",{ref_key:"cardView",ref:d,class:"card h-100"},[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_4$D,[createBaseVNode("img",{class:"card-img-top image-stable border border-dark rounded",src:_(unref(store).playing.cover),onError:l},null,40,_hoisted_5$C)]),createBaseVNode("div",_hoisted_6$x,[createBaseVNode("div",{class:"text-wrap clickable mb-3",onClick:u},[createBaseVNode("h5",_hoisted_7$u,toDisplayString(unref(store).playing.title),1)]),createBaseVNode("button",{class:"btn btn-sm btn-dark theme-btn black-on-hover fw-bold",onClick:g[0]||(g[0]=y=>n("quality"))},toDisplayString(unref(store).playing.quality),1)])]),createBaseVNode("div",_hoisted_8$t,[createBaseVNode("div",_hoisted_9$t,[createBaseVNode("div",_hoisted_10$s,[createBaseVNode("div",_hoisted_11$p,[createBaseVNode("small",null,toDisplayString(f(unref(store).playing.seek)),1)]),createBaseVNode("div",_hoisted_12$p,[createBaseVNode("small",null,toDisplayString(f(unref(store).playing.duration)),1)])]),createBaseVNode("div",{class:"progress mb-4",onClick:g[1]||(g[1]=y=>r.seekProgress(y))},[createBaseVNode("div",{class:"progress-bar theme-btn progress-bar-animated","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:normalizeStyle({width:unref(store).playing.progress+"%"})},_hoisted_14$p,4)]),createBaseVNode("div",_hoisted_15$n,[createBaseVNode("button",{type:"button",class:"btn btn-dark theme-btn black-on-hover rounded bi bi-skip-start-fill",onClick:g[2]||(g[2]=(...y)=>t.play_previous&&t.play_previous(...y))}),createBaseVNode("button",{type:"button",class:normalizeClass(["btn btn-dark theme-btn black-on-hover rounded bi mx-2",{"bi-play-fill":!unref(store).playing.is_playing,"bi-pause-fill":unref(store).playing.is_playing}]),onClick:g[3]||(g[3]=(...y)=>t.play&&t.play(...y))},null,2),createBaseVNode("button",{type:"button",class:"btn btn-dark theme-btn black-on-hover rounded bi bi-skip-end-fill",onClick:g[4]||(g[4]=(...y)=>t.play_next&&t.play_next(...y))})]),_hoisted_16$n,createBaseVNode("div",_hoisted_17$n,[createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover theme-color bi bi-shuffle mx-1",onClick:g[5]||(g[5]=y=>n("shuffle"))}),createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover theme-color bi bi-soundwave mx-1",onClick:g[6]||(g[6]=y=>n("group_session"))}),createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover theme-color bi bi-chat-square-text-fill mx-1",onClick:g[7]||(g[7]=y=>n("lyrics"))}),createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover theme-color bi bi-collection-fill mx-1",onClick:g[8]||(g[8]=y=>n("queue"))}),createBaseVNode("button",{type:"button",class:normalizeClass(["btn theme-btn black-on-hover bi mx-1",r.repeat_icon]),onClick:m},null,2)])])])],512)])])])],512))}},_hoisted_1$F={id:"qualityDisplay",class:"modal",tabindex:"-1"},_hoisted_2$F={class:"modal-dialog modal-dialog-centered",role:"document"},_hoisted_3$E={class:"modal-content theme-bg theme-border"},_hoisted_4$C=createBaseVNode("div",{class:"modal-header border-bottom-0 pb-0"},[createBaseVNode("h2",{class:"modal-title fs-5 theme-color fw-bold"},"Audio"),createBaseVNode("button",{type:"button",class:"btn-close theme-filter","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_hoisted_5$B={class:"modal-body"},_hoisted_6$w={class:"list-group foreground p-2"},_hoisted_7$t={class:"list-group-item theme-list-item theme-color"},_hoisted_8$s=createBaseVNode("span",{class:"fw-bold"},"Quality: ",-1),_hoisted_9$s={class:"list-group-item theme-list-item theme-color"},_hoisted_10$r=createBaseVNode("span",{class:"fw-bold"},"Bitrate: ",-1),_hoisted_11$o={class:"list-group-item theme-list-item theme-color"},_hoisted_12$o=createBaseVNode("span",{class:"fw-bold"},"Duration: ",-1),_hoisted_13$o={class:"list-group-item theme-list-item theme-color"},_hoisted_14$o=createBaseVNode("span",{class:"fw-bold"},"Audio Format: ",-1),_sfc_main$I={__name:"QualityDisplay",setup(t,{expose:e}){const n=ref(null);function r(){n.value.show()}function s(){n.value.hide()}return e({show:r,hide:s}),onMounted(()=>{n.value=new Modal(document.querySelector("#qualityDisplay"))}),(o,i)=>(openBlock(),createElementBlock("div",_hoisted_1$F,[createBaseVNode("div",_hoisted_2$F,[createBaseVNode("div",_hoisted_3$E,[_hoisted_4$C,createBaseVNode("div",_hoisted_5$B,[createBaseVNode("ul",_hoisted_6$w,[createBaseVNode("li",_hoisted_7$t,[_hoisted_8$s,createBaseVNode("span",null,toDisplayString(unref(store).playing.quality),1)]),createBaseVNode("li",_hoisted_9$s,[_hoisted_10$r,createBaseVNode("span",null,toDisplayString(unref(store).playing.bitrate)+" kbps",1)]),createBaseVNode("li",_hoisted_11$o,[_hoisted_12$o,createBaseVNode("span",null,toDisplayString(unref(store).playing.duration)+" seconds",1)]),createBaseVNode("li",_hoisted_13$o,[_hoisted_14$o,createBaseVNode("span",null,toDisplayString(unref(store).playing.format),1)])])])])])]))}},_hoisted_1$E={class:"player-card hide-on-desktop"},_hoisted_2$E={class:"nav nav-pills nav-fill"},_hoisted_3$D={class:"nav-item"},_hoisted_4$B={class:"nav-item"},_hoisted_5$A={class:"nav-item"},_hoisted_6$v={class:"nav-item"},_hoisted_7$s={class:"nav-item"},_hoisted_8$r={class:"nav-item"},_hoisted_9$r=createBaseVNode("span",{class:"fs-5 bi bi-person-circle me-1"},null,-1),_sfc_main$H={__name:"NavBarMobile",setup(t){const e=useRouter();ref(null);const n=computed(()=>e.currentRoute.value.path);return(r,s)=>{const o=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$E,[createBaseVNode("ul",_hoisted_2$E,[createBaseVNode("li",_hoisted_3$D,[createVNode(o,{to:"/",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-house-door-fill":unref(n)=="/","bi-house-door":unref(n)!="/"}])},null,2)]),_:1})]),createBaseVNode("li",_hoisted_4$B,[createVNode(o,{to:"/search",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi bi-compass-fill":unref(n).startsWith("/search"),"bi bi-compass":!unref(n).startsWith("/search")}])},null,2)]),_:1})]),createBaseVNode("li",_hoisted_5$A,[createVNode(o,{to:"/artists",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-person-fill":unref(n)=="/artists","bi-person":unref(n)!="/artists"}])},null,2)]),_:1})]),createBaseVNode("li",_hoisted_6$v,[createVNode(o,{to:"/albums",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-vinyl-fill":unref(n)=="/albums","bi-vinyl":unref(n)!="/albums"}])},null,2)]),_:1})]),createBaseVNode("li",_hoisted_7$s,[createVNode(o,{to:"/playlists",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(["fs-5 bi me-1",{"bi-cassette-fill":unref(n)=="/playlists","bi-cassette":unref(n)!="/playlists"}])},null,2)]),_:1})]),createBaseVNode("li",_hoisted_8$r,[createVNode(o,{to:"/profile",class:"nav-link text-white fw-bold","aria-current":"page"},{default:withCtx(()=>[_hoisted_9$r]),_:1})])])])}}},_hoisted_1$D={class:"player-card card rounded-0 hide-on-mobile"},_hoisted_2$D={class:"card-body p-0"},_hoisted_3$C={class:"d-flex flex-column"},_hoisted_4$A={class:"d-flex flex-row justify-content-between align-items-center p-2 pb-0 rounded m-0"},_hoisted_5$z={class:"d-flex flex-row align-items-center"},_hoisted_6$u=["src"],_hoisted_7$r={class:"d-flex flex-column"},_hoisted_8$q={class:"d-flex mb-1"},_hoisted_9$q={class:"purple-on-hover text-white text-break fw-bold"},_hoisted_10$q={class:"d-flex align-items-center p-2"},_hoisted_11$n={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},_hoisted_12$n={class:"d-flex flex-fill align-items-center mx-2"},_hoisted_13$n={class:"d-flex align-items-center font-monospace text-white"},_hoisted_14$n={class:"d-flex align-items-center font-monospace text-white"},_hoisted_15$m={class:"btn-group btn-group-sm",role:"group","aria-label":"Basic example"},_hoisted_16$m=["volume"],_hoisted_17$m=createBaseVNode("span",{class:"bi bi-justify-left me-2"},null,-1),_hoisted_18$m=createBaseVNode("span",null,"Show lyrics",-1),_hoisted_19$k=[_hoisted_17$m,_hoisted_18$m],_hoisted_20$j=createBaseVNode("span",{class:"bi bi-soundwave me-2"},null,-1),_hoisted_21$j=createBaseVNode("span",null,"Group session",-1),_hoisted_22$h=[_hoisted_20$j,_hoisted_21$j],_hoisted_23$g={class:"card-body p-0"},_hoisted_24$f={class:"overflow-hidden"},_hoisted_25$e=["src"],_hoisted_26$9={class:"overflow-hidden"},_hoisted_27$6={class:"fw-bold text-nowrap clickable"},_hoisted_28$6={class:"d-flex align-items-center p-2"},_hoisted_29$6={class:"btn-group btn-group-sm me-2",role:"group","aria-label":"Basic example"},_sfc_main$G={__name:"Player",setup(t,{expose:e}){const n=useRouter(),r=ref(null),s=ref(null),o=ref(null),i=ref(null),d=ref(100),l=ref(null),u=ref(null),_=ref(null),a=ref(0),c=ref(null);async function f(X){X.target.src="/images/track.svg"}function m(X){return X?X.startsWith("http")?X:ft.server+"/"+X:"/images/track.svg"}async function v(){ft.mute()}const g=computed(()=>store.playing.muted?"bi-volume-mute-fill":d.value>75?"bi-volume-up-fill":d.value>50?"bi-volume-down-fill":d.value>0?"bi-volume-off-fill":"bi-volume-mute-fill"),y=computed(()=>{if(store.playing.repeat==0)return"bi-repeat text-muted";if(store.playing.repeat==1)return"bi-repeat";if(store.playing.repeat==2)return"bi-repeat-1"});function b(X){let z=parseInt(X),pe=Math.floor(z/60);return z=z%60,pe+":"+(z<10?"0":"")+z}async function N(X){let z=null;X.target.classList.contains("progress")?z=X.target:z=X.target.parentElement;let pe=z.getBoundingClientRect(),_e=X.clientX-pe.left,be=ft.player.duration()*(_e/pe.width);action({func:async function(){ft.seek(be)},object:[be],operation:"seek"})}async function x(){u.value=new Tooltip(l.value,{placement:"top",container:"body",trigger:"hover",delay:{hide:300}})}const A=computed(()=>{u.value&&u.value.setContent({".tooltip-inner":d.value.toString()})});async function L(X){X.wheelDelta>0?V():P()}async function V(){if(d.value+=5,d.value>100){d.value=100;return}ft.player.volume(d.value/100),localStorage.setItem("volume",JSON.stringify(d.value/100))}async function P(){if(d.value-=5,d.value<0){d.value=0;return}ft.player.volume(d.value/100),localStorage.setItem("volume",JSON.stringify(d.value/100))}async function j(){action({func:async function(){ft.play()},object:[null],operation:"play"})}async function H(){action({func:async function(){ft.play_previous()},object:[null],operation:"playPrevious"})}async function ae(){action({func:async function(){ft.play_next()},object:[null],operation:"playNext"})}async function ie(){r.value.show()}async function le(){store.selected_track_id=store.playing.id,n.push("/album/"+store.playing.album)}async function J(){s.value.get_lyrics()}async function F(){action({func:async function(){ft.repeat()},object:[null],operation:"repeat"})}async function G(){r.value.shuffle()}async function C(){_.value.show()}async function D(){c.value.show()}return e({show_queue:ie,show_lyrics:J,shuffle:G,repeat:F,group_session:C}),onMounted(()=>{let X=JSON.parse(localStorage.getItem("volume"));X?(d.value=parseInt(parseFloat(X)*100),ft.player.volume(d.value/100)):localStorage.setItem("volume",JSON.stringify(d.value/100));let z=new Hammer(i.value);z.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),z.on("swipeup",function(){o.value.show()}),x(),window.addEventListener("group_key",()=>{a.value++})}),(X,z)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$D,[createBaseVNode("div",_hoisted_2$D,[createBaseVNode("div",_hoisted_3$C,[withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_4$A,[createBaseVNode("div",_hoisted_5$z,[createBaseVNode("div",{class:"clickable-opacity",onClick:le,onContextmenu:z[0]||(z[0]=withModifiers(pe=>unref(right_click)({item:unref(store).playing,event:pe}),["prevent"]))},[createBaseVNode("img",{class:"img-fluid rounded me-2",src:m(unref(store).playing.cover),onError:f,width:"56",height:"56"},null,40,_hoisted_6$u)],32),createBaseVNode("div",_hoisted_7$r,[createBaseVNode("div",_hoisted_8$q,[createBaseVNode("div",{class:"d-flex clickable text-start p-0",style:{display:"contents"},onClick:le},[createBaseVNode("span",_hoisted_9$q,toDisplayString(unref(store).playing.title),1)])]),createBaseVNode("div",null,[createBaseVNode("button",{class:"btn btn-sm btn-light fw-bold",onClick:D},toDisplayString(unref(store).playing.quality),1)])])])])],512),[[vShow,unref(store).playing.loaded]]),createBaseVNode("div",_hoisted_10$q,[createBaseVNode("div",_hoisted_11$n,[createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-skip-start-fill",onClick:H}),createBaseVNode("button",{type:"button",class:normalizeClass(["btn btn-light bi",{"bi-play-fill":!unref(store).playing.is_playing,"bi-pause-fill":unref(store).playing.is_playing}]),onClick:j},null,2),createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-skip-end-fill",onClick:ae})]),createBaseVNode("div",_hoisted_12$n,[createBaseVNode("div",_hoisted_13$n,[createBaseVNode("small",null,toDisplayString(b(unref(store).playing.seek)),1)]),createBaseVNode("div",{class:"progress flex-fill mx-2",onClick:z[1]||(z[1]=pe=>N(pe))},[createBaseVNode("div",{class:"progress-bar theme-btn progress-bar-animated","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:normalizeStyle({width:unref(store).playing.progress+"%"})},null,4)]),createBaseVNode("div",_hoisted_14$n,[createBaseVNode("small",null,toDisplayString(b(unref(store).playing.duration)),1)])]),createBaseVNode("div",_hoisted_15$m,[createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-shuffle",onClick:G}),createBaseVNode("button",{type:"button",class:normalizeClass(["btn btn-light bi",unref(y)]),onClick:F},null,2),createBaseVNode("button",{ref_key:"volumeButton",ref:l,type:"button",class:normalizeClass(["btn btn-light bi",unref(g)]),"data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-title":"100",onWheel:z[2]||(z[2]=withModifiers(pe=>L(pe),["prevent"])),volume:unref(A),onClick:v},null,42,_hoisted_16$m),createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-collection-fill",onClick:ie}),createBaseVNode("button",{class:"btn btn-light bi bi-three-dots",type:"button","data-bs-toggle":"dropdown"},[createBaseVNode("ul",{class:"dropdown-menu shadow-lg context-menu"},[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:J},_hoisted_19$k)]),createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:C},_hoisted_22$h)])])])])])])])]),createBaseVNode("div",{ref_key:"mobilePlayer",ref:i,class:"player-card card text-bg-dark rounded-0 hide-on-desktop"},[createBaseVNode("div",_hoisted_23$g,[createBaseVNode("div",{class:normalizeClass(["d-inline-flex flex-row w-100 align-items-center",{"justify-content-between":unref(store).playing.loaded,"justify-content-end":!unref(store).playing.loaded}])},[withDirectives(createBaseVNode("div",_hoisted_24$f,[createBaseVNode("div",{class:"d-flex flex-row align-items-center p-2 pb-0 rounded clickable m-0",onClick:le},[createBaseVNode("img",{class:"img-fluid me-2",src:m(unref(store).playing.cover),onError:f,width:"56",height:"56"},null,40,_hoisted_25$e),createBaseVNode("div",_hoisted_26$9,[createBaseVNode("div",_hoisted_27$6,toDisplayString(unref(store).playing.title),1)])])],512),[[vShow,unref(store).playing.loaded]]),createBaseVNode("div",_hoisted_28$6,[createBaseVNode("div",_hoisted_29$6,[createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-skip-start-fill",onClick:H}),createBaseVNode("button",{type:"button",class:normalizeClass(["btn btn-light bi",{"bi-play-fill":!unref(store).playing.is_playing,"bi-pause-fill":unref(store).playing.is_playing}]),onClick:j},null,2),createBaseVNode("button",{type:"button",class:"btn btn-light bi bi-skip-end-fill",onClick:ae})])])],2),createBaseVNode("div",{class:"progress progress-minified flex-fill",onClick:z[3]||(z[3]=pe=>N(pe))},[createBaseVNode("div",{class:"progress-bar theme-btn progress-bar-animated","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:normalizeStyle({width:unref(store).playing.progress+"%"})},null,4)])])],512),createVNode(_sfc_main$H),createVNode(_sfc_main$K,{ref_key:"lyricsEl",ref:s},null,512),createVNode(_sfc_main$L,{ref_key:"queueEl",ref:r},null,512),createVNode(_sfc_main$J,{ref_key:"mobileViewEl",ref:o,seekProgress:N,play:j,play_next:ae,play_previous:H,repeat_icon:unref(y),onQueue:ie,onLyrics:J,onShuffle:G,onGroup_session:C,onQuality:D},null,8,["repeat_icon"]),(openBlock(),createBlock(_sfc_main$M,{ref_key:"groupSession",ref:_,key:a.value})),createVNode(_sfc_main$I,{ref_key:"qualityDisplay",ref:c},null,512)],64))}},_hoisted_1$C={"aria-live":"polite","aria-atomic":"true",class:"position-relative"},_hoisted_2$C=["id"],_hoisted_3$B={class:"d-flex"},_hoisted_4$z={class:"toast-body"},_hoisted_5$y=createBaseVNode("button",{type:"button",class:"btn-close me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1),_sfc_main$F={__name:"Toasts",setup(t){const e=ref(null),n=ref([]);async function r(s){n.value.push(s.title)}return watch(n.value,async(s,o)=>{if(await nextTick(),s.length>0){let i=s.length-1,d=document.getElementById("toast_"+i);new Toast(d,{autohide:!0,delay:2e3}).show()}}),onMounted(()=>{window.addEventListener("notify",s=>{r(s.detail)})}),(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1$C,[createBaseVNode("div",{ref_key:"toast_container",ref:e,class:"toast-container top-0 end-0 p-4"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(i,d)=>(openBlock(),createElementBlock("div",{id:"toast_"+d,class:"toast mb-2",role:"alert","aria-live":"assertive","aria-atomic":"true"},[createBaseVNode("div",_hoisted_3$B,[createBaseVNode("div",_hoisted_4$z,toDisplayString(i),1),_hoisted_5$y])],8,_hoisted_2$C))),256))],512)]))}},_hoisted_1$B={"aria-live":"polite","aria-atomic":"true"},_hoisted_2$B=["id"],_hoisted_3$A={class:"d-flex flex-column"},_hoisted_4$y={class:"d-flex justify-content-center"},_hoisted_5$x={class:"toast-body d-flex flex-fill flex-column"},_hoisted_6$t={class:"d-flex justify-content-center"},_hoisted_7$q={class:"fw-bold text-break m-0"},_sfc_main$E={__name:"Messages",setup(t){const e=ref(null),n=ref([]);async function r(s){n.value.push({username:s.username,message:s.message})}return watch(n.value,async(s,o)=>{if(await nextTick(),s.length>0){let i=s.length-1,d=document.getElementById("message_"+i);new Toast(d,{autohide:!1}).show()}}),onMounted(()=>{window.addEventListener("message",s=>{r(s.detail)})}),(s,o)=>(openBlock(),createElementBlock("div",_hoisted_1$B,[createBaseVNode("div",{ref_key:"toast_container",ref:e,class:"toast-container bottom-0 start-50 translate-middle-x px-2"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(i,d)=>(openBlock(),createElementBlock("div",{id:"message_"+d,class:"toast mb-2","data-bs-dismiss":"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},[createBaseVNode("div",_hoisted_3$A,[createBaseVNode("div",_hoisted_4$y,[createBaseVNode("div",_hoisted_5$x,[createBaseVNode("div",_hoisted_6$t,[createBaseVNode("h3",_hoisted_7$q,toDisplayString(i.message),1)])])])])],8,_hoisted_2$B))),256))],512)]))}};function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function normalizeComputedStyleValue(t){return+t.replace(/px/,"")}function fixDPR(t){var e=window.devicePixelRatio,n=getComputedStyle(t),r=normalizeComputedStyleValue(n.getPropertyValue("width")),s=normalizeComputedStyleValue(n.getPropertyValue("height"));t.setAttribute("width",(r*e).toString()),t.setAttribute("height",(s*e).toString())}function generateRandomNumber(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Math.random()*(e-t)+t;return Math.floor(r*Math.pow(10,n))/Math.pow(10,n)}function generateRandomArrayElement(t){return t[generateRandomNumber(0,t.length)]}var FREE_FALLING_OBJECT_ACCELERATION=.00125,MIN_DRAG_FORCE_COEFFICIENT=5e-4,MAX_DRAG_FORCE_COEFFICIENT=9e-4,ROTATION_SLOWDOWN_ACCELERATION=1e-5,INITIAL_SHAPE_RADIUS=6,INITIAL_EMOJI_SIZE=80,MIN_INITIAL_CONFETTI_SPEED=.9,MAX_INITIAL_CONFETTI_SPEED=1.7,MIN_FINAL_X_CONFETTI_SPEED=.2,MAX_FINAL_X_CONFETTI_SPEED=.6,MIN_INITIAL_ROTATION_SPEED=.03,MAX_INITIAL_ROTATION_SPEED=.07,MIN_CONFETTI_ANGLE=15,MAX_CONFETTI_ANGLE=82,MAX_CONFETTI_POSITION_SHIFT=150,SHAPE_VISIBILITY_TRESHOLD=100,DEFAULT_CONFETTI_NUMBER=250,DEFAULT_EMOJIS_NUMBER=40,DEFAULT_CONFETTI_COLORS=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function getWindowWidthCoefficient(t){var e=1920;return Math.log(t)/Math.log(e)}var ConfettiShape=function(){function t(e){_classCallCheck(this,t);var n=e.initialPosition,r=e.direction,s=e.confettiRadius,o=e.confettiColors,i=e.emojis,d=e.emojiSize,l=e.canvasWidth,u=generateRandomNumber(MIN_INITIAL_CONFETTI_SPEED,MAX_INITIAL_CONFETTI_SPEED,3),_=u*getWindowWidthCoefficient(l);this.confettiSpeed={x:_,y:_},this.finalConfettiSpeedX=generateRandomNumber(MIN_FINAL_X_CONFETTI_SPEED,MAX_FINAL_X_CONFETTI_SPEED,3),this.rotationSpeed=i.length?.01:generateRandomNumber(MIN_INITIAL_ROTATION_SPEED,MAX_INITIAL_ROTATION_SPEED,3)*getWindowWidthCoefficient(l),this.dragForceCoefficient=generateRandomNumber(MIN_DRAG_FORCE_COEFFICIENT,MAX_DRAG_FORCE_COEFFICIENT,6),this.radius={x:s,y:s},this.initialRadius=s,this.rotationAngle=r==="left"?generateRandomNumber(0,.2,3):generateRandomNumber(-.2,0,3),this.emojiSize=d,this.emojiRotationAngle=generateRandomNumber(0,2*Math.PI),this.radiusYUpdateDirection="down";var a=r==="left"?generateRandomNumber(MAX_CONFETTI_ANGLE,MIN_CONFETTI_ANGLE)*Math.PI/180:generateRandomNumber(-MIN_CONFETTI_ANGLE,-MAX_CONFETTI_ANGLE)*Math.PI/180;this.absCos=Math.abs(Math.cos(a)),this.absSin=Math.abs(Math.sin(a));var c=generateRandomNumber(-MAX_CONFETTI_POSITION_SHIFT,0),f={x:n.x+(r==="left"?-c:c)*this.absCos,y:n.y-c*this.absSin};this.currentPosition=Object.assign({},f),this.initialPosition=Object.assign({},f),this.color=i.length?null:generateRandomArrayElement(o),this.emoji=i.length?generateRandomArrayElement(i):null,this.createdAt=new Date().getTime(),this.direction=r}return _createClass(t,[{key:"draw",value:function(n){var r=this.currentPosition,s=this.radius,o=this.color,i=this.emoji,d=this.rotationAngle,l=this.emojiRotationAngle,u=this.emojiSize,_=window.devicePixelRatio;o?(n.fillStyle=o,n.beginPath(),n.ellipse(r.x*_,r.y*_,s.x*_,s.y*_,d,0,2*Math.PI),n.fill()):i&&(n.font="".concat(u,"px serif"),n.save(),n.translate(_*r.x,_*r.y),n.rotate(l),n.textAlign="center",n.fillText(i,0,0),n.restore())}},{key:"updatePosition",value:function(n,r){var s=this.confettiSpeed,o=this.dragForceCoefficient,i=this.finalConfettiSpeedX,d=this.radiusYUpdateDirection,l=this.rotationSpeed,u=this.createdAt,_=this.direction,a=r-u;if(s.x>i&&(this.confettiSpeed.x-=o*n),this.currentPosition.x+=s.x*(_==="left"?-this.absCos:this.absCos)*n,this.currentPosition.y=this.initialPosition.y-s.y*this.absSin*a+FREE_FALLING_OBJECT_ACCELERATION*Math.pow(a,2)/2,this.rotationSpeed-=this.emoji?1e-4:ROTATION_SLOWDOWN_ACCELERATION*n,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*n%(2*Math.PI);return}d==="down"?(this.radius.y-=n*l,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=n*l,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(n){return this.currentPosition.y<n+SHAPE_VISIBILITY_TRESHOLD}}]),t}();function createCanvas(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.zIndex="1000",t.style.pointerEvents="none",document.body.appendChild(t),t}function normalizeConfettiConfig(t){var e=t.confettiRadius,n=e===void 0?INITIAL_SHAPE_RADIUS:e,r=t.confettiNumber,s=r===void 0?t.confettiesNumber||(t.emojis?DEFAULT_EMOJIS_NUMBER:DEFAULT_CONFETTI_NUMBER):r,o=t.confettiColors,i=o===void 0?DEFAULT_CONFETTI_COLORS:o,d=t.emojis,l=d===void 0?t.emojies||[]:d,u=t.emojiSize,_=u===void 0?INITIAL_EMOJI_SIZE:u;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:n,confettiNumber:s,confettiColors:i,emojis:l,emojiSize:_}}var ConfettiBatch=function(){function t(e){var n=this;_classCallCheck(this,t),this.canvasContext=e,this.shapes=[],this.promise=new Promise(function(r){return n.resolvePromise=r})}return _createClass(t,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var n;(n=this.shapes).push.apply(n,arguments)}},{key:"complete",value:function(){var n;return this.shapes.length?!1:((n=this.resolvePromise)===null||n===void 0||n.call(this),!0)}},{key:"processShapes",value:function(n,r,s){var o=this,i=n.timeDelta,d=n.currentTime;this.shapes=this.shapes.filter(function(l){return l.updatePosition(i,d),l.draw(o.canvasContext),s?l.getIsVisibleOnCanvas(r):!0})}}]),t}(),JSConfetti=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck(this,t),this.activeConfettiBatches=[],this.canvas=e.canvas||createCanvas(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return _createClass(t,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,fixDPR(this.canvas);var n=new Date().getTime(),r=n-this.lastUpdated,s=this.canvas.offsetHeight,o=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(i){return i.processShapes({timeDelta:r,currentTime:n},s,o),o?!i.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(n)}},{key:"queueAnimationFrameIfNeeded",value:function(n){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=n||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=normalizeConfettiConfig(n),s=r.confettiRadius,o=r.confettiNumber,i=r.confettiColors,d=r.emojis,l=r.emojiSize,u=this.canvas.getBoundingClientRect(),_=u.width,a=u.height,c=a*5/7,f={x:0,y:c},m={x:_,y:c},v=new ConfettiBatch(this.canvasContext),g=0;g<o/2;g++){var y=new ConfettiShape({initialPosition:f,direction:"right",confettiRadius:s,confettiColors:i,confettiNumber:o,emojis:d,emojiSize:l,canvasWidth:_}),b=new ConfettiShape({initialPosition:m,direction:"left",confettiRadius:s,confettiColors:i,confettiNumber:o,emojis:d,emojiSize:l,canvasWidth:_});v.addShapes(y,b)}return this.activeConfettiBatches.push(v),this.queueAnimationFrameIfNeeded(),v.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}}]),t}();const _sfc_main$D={__name:"Animation",setup(t,{expose:e}){const n=new JSConfetti,r=ref({love:"\u2764\uFE0F",hand:"\u{1F918}",eyes:"\u{1F440}",ship:"\u{1F680}",bomb:"\u{1F4A3}",puke:"\u{1F92E}",shit:"\u{1F4A9}"});async function s(){showAnimation.value=!0}async function o(){showAnimation.value=!1}async function i(d){n.addConfetti({emojis:[r.value[d]]})}return e({show:s,hide:o}),onMounted(()=>{window.addEventListener("reaction",d=>{i(d.detail)})}),(d,l)=>null}},_hoisted_1$A={class:"vw-100 complete-view d-flex flex-column"},_hoisted_2$A={class:"side-view d-flex"},_hoisted_3$z={class:"d-none d-sm-block d-flex flex-column flex-shrink-0"},_hoisted_4$x={class:"content-view pb-4"},_hoisted_5$w={class:"player-view"},_sfc_main$C={__name:"App",setup(t){const e=ref(null),n=ref(null),r=ref(null);async function s(o){if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.code=="Space"){o.preventDefault(),action({func:async function(){ft.play()},object:[null],operation:"play"});return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="ArrowLeft"){o.preventDefault(),action({func:async function(){ft.play_previous()},object:[null],operation:"playPrevious"});return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="ArrowRight"){o.preventDefault(),action({func:async function(){ft.play_next()},object:[null],operation:"playNext"});return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="m"){o.preventDefault(),ft.mute();return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="q"){o.preventDefault(),r.value.show_queue();return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="l"){o.preventDefault(),r.value.show_lyrics();return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.key=="g"){o.preventDefault(),r.value.group_session();return}if(o.target.tagName!="INPUT"&&o.target.tagName!="TEXTAREA"&&o.ctrlKey&&o.key=="k"){o.preventDefault(),e.value.focus_search();return}}return onBeforeMount(()=>{let o=JSON.parse(localStorage.getItem("theme"));o?(document.body.classList=o+"-theme",store.theme=o):window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.body.classList="dark-theme",store.theme="dark");let i=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${i}px`),window.focus(),window.addEventListener("keydown",s)}),(o,i)=>(openBlock(),createElementBlock("div",_hoisted_1$A,[createVNode(_sfc_main$E),createVNode(_sfc_main$F),createVNode(_sfc_main$D),createBaseVNode("div",_hoisted_2$A,[createBaseVNode("div",_hoisted_3$z,[createVNode(_sfc_main$_)]),createBaseVNode("div",_hoisted_4$x,[createVNode(_sfc_main$$,{ref_key:"thisNavBar",ref:e},null,512),createVNode(_sfc_main$O,{ref_key:"thisContentView",ref:n},null,512)])]),createBaseVNode("div",_hoisted_5$w,[createVNode(_sfc_main$G,{ref_key:"thisPlayer",ref:r},null,512)])]))}},_hoisted_1$z={class:"p-0"},_hoisted_2$z={class:"position-relative clickable-shadow rounded"},_hoisted_3$y=["src"],_hoisted_4$w={class:"position-absolute bottom-0 right-0 m-2"},_hoisted_5$v={class:"d-flex flex-fill"},_sfc_main$B={__name:"Track",props:{track:{type:Object}},setup(t){const e=t,n=useRouter();async function r(d){d.target.src="/images/track.svg"}function s(d){return d?d.startsWith("http")?d:ft.server+"/"+d:"/images/track.svg"}async function o(){store.selected_track_id=e.track.id,n.push("/album/"+e.track.album)}async function i(d){action({func:async function(){ft.playTrack(d)},object:[d],operation:"playTrack"})}return(d,l)=>(openBlock(),createElementBlock("div",{class:"card h-100 w-100 border-0",onContextmenu:l[1]||(l[1]=withModifiers(u=>unref(right_click)({item:e.track,event:u}),["prevent"]))},[createBaseVNode("div",_hoisted_1$z,[createBaseVNode("div",_hoisted_2$z,[createBaseVNode("div",{class:"ph rounded",onClick:o},[createBaseVNode("img",{class:"img-fluid placeholder-img rounded",src:s(e.track.cover),onError:r},null,40,_hoisted_3$y)]),createBaseVNode("div",_hoisted_4$w,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill",type:"button",onClick:l[0]||(l[0]=u=>i(e.track.id))})])]),createBaseVNode("div",_hoisted_5$v,[createBaseVNode("h6",{class:"theme-color purple-on-hover fw-bold text-break text-wrap clickable p-2 ps-0",onClick:o},toDisplayString(e.track.title),1)])])],32))}},_hoisted_1$y={class:"card-body border-0"},_hoisted_2$y=["src"],_hoisted_3$x={class:"mt-2"},_sfc_main$A={__name:"CarouselTrack",props:{track:{type:Object}},setup(t){const e=t,n=useRouter();async function r(i){i.target.src="/images/track.svg"}function s(i){return i?i.startsWith("http")?i:ft.server+"/"+i:"/images/track.svg"}async function o(){store.selected_track_id=e.track.id,n.push("/album/"+e.track.album)}return(i,d)=>(openBlock(),createElementBlock("div",{class:"card border-0 p-0",onContextmenu:d[0]||(d[0]=withModifiers(l=>unref(right_click)({item:e.track,event:l}),["prevent"]))},[createBaseVNode("div",_hoisted_1$y,[createBaseVNode("div",{class:"clickable-shadow",onClick:o},[createBaseVNode("img",{class:"carousel-img",src:s(e.track.cover),onError:r,width:"250",height:"250"},null,40,_hoisted_2$y)]),createBaseVNode("div",_hoisted_3$x,[createBaseVNode("h6",{class:"fw-bold clickable theme-color purple-on-hover",onClick:o},toDisplayString(t.track.title),1)])])],32))}},_hoisted_1$x={key:0,class:"card rounded-0 border-0 mx-3"},_hoisted_2$x={class:"card-body px-3"},_hoisted_3$w={key:0,class:"hide-on-desktop"},_hoisted_4$v=createBaseVNode("h3",{class:"theme-color fw-bold"},"Recommended for you",-1),_hoisted_5$u={key:0,class:"px-3 text-decoration-underline"},_hoisted_6$s={class:"list-group list-group-horizontal mobile-carousel"},_hoisted_7$p={class:"list-group-item theme-background border-0 p-0"},_hoisted_8$p=createBaseVNode("hr",{class:"mx-3"},null,-1),_hoisted_9$p={class:"row g-2"},_hoisted_10$p={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_hoisted_11$m={key:1,class:"hide-on-mobile row g-3"},_hoisted_12$m=createBaseVNode("h3",{class:"theme-color fw-bold"},"Recommended for you",-1),_hoisted_13$m={key:0,class:"px-3 text-decoration-underline"},_hoisted_14$m={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_sfc_main$z={__name:"Recommendations",setup(t){const e=ref([]),n=ref(!1);async function r(){let s=await ft.API("/random/tracks");!s||(e.value=e.value.concat(s.tracks),n.value=!0)}return onBeforeMount(()=>{r()}),(s,o)=>n.value?(openBlock(),createElementBlock("div",_hoisted_1$x,[createBaseVNode("div",_hoisted_2$x,[n.value?(openBlock(),createElementBlock("div",_hoisted_3$w,[_hoisted_4$v,e.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$u,"No content in the library.")),createBaseVNode("ul",_hoisted_6$s,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value.slice(0,12),i=>(openBlock(),createElementBlock("li",_hoisted_7$p,[createVNode(_sfc_main$A,{track:i},null,8,["track"])]))),256))]),_hoisted_8$p,createBaseVNode("div",_hoisted_9$p,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value.slice(12,24),i=>(openBlock(),createElementBlock("div",_hoisted_10$p,[createVNode(_sfc_main$B,{track:i},null,8,["track"])]))),256))])])):createCommentVNode("",!0),n.value?(openBlock(),createElementBlock("div",_hoisted_11$m,[_hoisted_12$m,e.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_13$m,"No content in the library.")),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,i=>(openBlock(),createElementBlock("div",_hoisted_14$m,[createVNode(_sfc_main$B,{track:i},null,8,["track"])]))),256))])):createCommentVNode("",!0)])])):createCommentVNode("",!0)}},_hoisted_1$w={class:"list-group rounded-0 mx-3 px-3 pb-3 theme-background"},_hoisted_2$w={class:"hide-on-desktop card-body py-3"},_hoisted_3$v={class:"d-flex flex-column"},_hoisted_4$u={class:"d-inline-flex input-group flex-nowrap"},_hoisted_5$t=["onKeyup"],_hoisted_6$r={key:0,class:"list-group-item theme-list-item-no-hover foreground theme-border d-flex justify-content-between"},_hoisted_7$o=createBaseVNode("div",{class:"d-flex w-100 justify-content-between"},[createBaseVNode("div",null,[createBaseVNode("span",{class:"theme-color fw-bold"},"No results")])],-1),_hoisted_8$o=[_hoisted_7$o],_hoisted_9$o=["onContextmenu","onClick"],_hoisted_10$o={class:"d-flex w-100 justify-content-between"},_hoisted_11$l={class:"d-flex"},_hoisted_12$l={class:"d-flex align-items-center"},_hoisted_13$l=["src","type"],_hoisted_14$l={class:"d-flex align-items-center"},_hoisted_15$l={class:"d-flex flex-column"},_hoisted_16$l={class:"d-flex"},_hoisted_17$l=["content_id","content_type"],_hoisted_18$l={class:"theme-color text-break fw-bold"},_hoisted_19$j={class:"btn btn-link d-flex text-start align-items-center py-0"},_sfc_main$y={__name:"Search",setup(t){const e=useRouter(),n=ref([]),r=ref(null),s=computed(()=>e.currentRoute.value.params.query);async function o(f){switch(f.target.attributes.type.value){case"user":f.target.src="/images/friend.svg";break;case"track":f.target.src="/images/track.svg";break;case"album":f.target.src="/images/album.svg";break;case"artist":f.target.src="/images/artist.svg";break;case"playlist":f.target.src="/images/cassette.svg";break}}function i(f,m){if(m)return m.startsWith("http")?m:ft.server+"/"+m;switch(f){case"user":return"/images/friend.svg";case"track":return"/images/track.svg";case"album":return"/images/album.svg";case"artist":return"/images/artist.svg";case"playlist":return"/images/cassette.svg"}}function d(f,m=200){let v;return(...g)=>{clearTimeout(v),v=setTimeout(()=>{f.apply(this,g)},m)}}async function l(){let f=r.value.value;if(!f.length){r.value.focus();return}e.push("/search/"+f)}const u=d(async f=>{f.preventDefault();let m=r.value.value;if(!m.length){r.value.focus();return}e.push("/search/"+m)});async function _(){let f=e.currentRoute.value.params.query;if(!f)return;let m=await ft.API("/search/"+f);!m||(n.value=m.data)}async function a(){let f=e.currentRoute.value.params.query;if(!f)return;let m=JSON.parse(localStorage.getItem("federated_servers"));for(let v=0;v<m.length;v++){let g=m[v],y=await ft.fAPI(g,"/search/"+f);if(!y||!y.data)return;y.data.forEach(b=>{b.server=g,n.value.filter(N=>N.uuid==b.uuid).length||n.value.push(b)})}}async function c(f){let m=null,v=f.id,g=f.id,y=f.title;if(f.server&&(m=f.server,g=f.id+`@${f.server}`,y=f.title+`@${f.server}`),f.type=="track"){action({func:async function(){ft.playTrack(v,m)},object:[v,m],operation:"playTrack"});return}if(f.type=="user"){e.push("/user/"+y);return}e.push("/"+f.type+"/"+g)}return watch(s,()=>{!e.currentRoute.value.params.query||(_(),a())}),onMounted(()=>{_(),a()}),(f,m)=>(openBlock(),createElementBlock("ul",_hoisted_1$w,[createBaseVNode("div",_hoisted_2$w,[createBaseVNode("div",_hoisted_3$v,[createBaseVNode("div",_hoisted_4$u,[createBaseVNode("input",{ref_key:"search_field",ref:r,type:"text",class:"form-control search-card-input",placeholder:"Search","aria-label":"Search",onInput:m[0]||(m[0]=(...v)=>unref(u)&&unref(u)(...v)),onKeyup:withKeys(l,["enter"])},null,40,_hoisted_5$t)])])]),n.value.length==0?(openBlock(),createElementBlock("li",_hoisted_6$r,_hoisted_8$o)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,v=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item foreground-content clickable rounded d-flex p-1",onContextmenu:withModifiers(g=>unref(right_click)({item:v,event:g}),["prevent"]),onClick:g=>c(v)},[createBaseVNode("div",_hoisted_10$o,[createBaseVNode("div",_hoisted_11$l,[createBaseVNode("div",_hoisted_12$l,[createBaseVNode("img",{src:i(v.type,v.cover),class:"track-cover theme-border rounded",type:v.type,onError:o},null,40,_hoisted_13$l)]),createBaseVNode("div",_hoisted_14$l,[createBaseVNode("div",_hoisted_15$l,[createBaseVNode("div",_hoisted_16$l,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:v.id,content_type:v.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_18$l,toDisplayString(v.title),1)],8,_hoisted_17$l)]),createBaseVNode("div",_hoisted_19$j,[createBaseVNode("span",{class:normalizeClass(["badge",v.type])},toDisplayString(v.type),3)])])])])])],40,_hoisted_9$o))),256))]))}},_hoisted_1$v={class:"p-0"},_hoisted_2$v={class:"position-relative clickable-shadow rounded"},_hoisted_3$u=["src"],_hoisted_4$t={class:"d-flex flex-fill"},_sfc_main$x={__name:"Artist",props:{artist:{type:Object}},setup(t){const e=t,n=useRouter();async function r(i){i.target.src="/images/artist.svg"}function s(i){return i?i.startsWith("http")?i:ft.server+"/"+i:"/images/artist.svg"}async function o(){n.push("/artist/"+e.artist.id)}return(i,d)=>(openBlock(),createElementBlock("div",{class:"card h-100 w-100 border-0",onContextmenu:d[0]||(d[0]=withModifiers(l=>unref(right_click)({item:e.artist,event:l}),["prevent"]))},[createBaseVNode("div",_hoisted_1$v,[createBaseVNode("div",_hoisted_2$v,[createBaseVNode("div",{class:"ph rounded",onClick:o},[createBaseVNode("img",{class:"img-fluid placeholder-img rounded",src:s(e.artist.cover),onError:r},null,40,_hoisted_3$u)])]),createBaseVNode("div",_hoisted_4$t,[createBaseVNode("h6",{class:"theme-color purple-on-hover fw-bold text-break text-wrap clickable p-2 ps-0",onClick:o},toDisplayString(e.artist.title),1)])])],32))}},_hoisted_1$u={key:0,class:"card rounded-0 border-0 mx-3"},_hoisted_2$u={class:"card-body px-3"},_hoisted_3$t={class:"row g-3"},_hoisted_4$s=createBaseVNode("h3",{class:"theme-color fw-bold"},"Artists",-1),_hoisted_5$s={key:0,class:"px-3 text-decoration-underline theme-color"},_hoisted_6$q={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_sfc_main$w={__name:"Artists",setup(t){const e=ref([]),n=ref(!1),r=ref(!0);async function s(o=0){r.value=!1;let i=await ft.API("/artists/"+o);if(!i){n.value=!0;return}e.value=e.value.concat(i.artists),n.value=!0,r.value=!0}return onBeforeMount(()=>{s();let o=document.querySelector(".content-view");o.addEventListener("scroll",()=>{o.scrollTop>=o.scrollTopMax&&r.value&&s(e.value.length)})}),(o,i)=>n.value?(openBlock(),createElementBlock("div",_hoisted_1$u,[createBaseVNode("div",_hoisted_2$u,[createBaseVNode("div",_hoisted_3$t,[_hoisted_4$s,e.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$s,"No artists in the library.")),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,d=>(openBlock(),createElementBlock("div",_hoisted_6$q,[createVNode(_sfc_main$x,{artist:d},null,8,["artist"])]))),256))])])])):createCommentVNode("",!0)}},_hoisted_1$t={class:"p-0"},_hoisted_2$t={class:"position-relative clickable-shadow rounded"},_hoisted_3$s=["src"],_hoisted_4$r={class:"position-absolute bottom-0 right-0 m-2"},_hoisted_5$r={class:"d-flex flex-fill"},_sfc_main$v={__name:"Album",props:{album:{type:Object}},setup(t){const e=t,n=useRouter();async function r(d){d.target.src="/images/album.svg"}function s(d){return d?d.startsWith("http")?d:ft.server+"/"+d:"/images/album.svg"}async function o(){n.push("/album/"+e.album.id)}async function i(d){action({func:async function(){ft.playAlbum(d)},object:[d],operation:"playAlbum"})}return(d,l)=>(openBlock(),createElementBlock("div",{class:"card h-100 w-100 border-0",onContextmenu:l[1]||(l[1]=withModifiers(u=>unref(right_click)({item:e.album,event:u}),["prevent"]))},[createBaseVNode("div",_hoisted_1$t,[createBaseVNode("div",_hoisted_2$t,[createBaseVNode("div",{class:"ph rounded",onClick:o},[createBaseVNode("img",{class:"img-fluid placeholder-img rounded",src:s(e.album.cover),onError:r},null,40,_hoisted_3$s)]),createBaseVNode("div",_hoisted_4$r,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill",type:"button",onClick:l[0]||(l[0]=u=>i(e.album.id))})])]),createBaseVNode("div",_hoisted_5$r,[createBaseVNode("h6",{class:"theme-color purple-on-hover fw-bold text-break text-wrap clickable p-2 ps-0",onClick:o},toDisplayString(e.album.title),1)])])],32))}},_hoisted_1$s={key:0,class:"card rounded-0 border-0 mx-3"},_hoisted_2$s={class:"card-body px-3"},_hoisted_3$r={class:"row g-3"},_hoisted_4$q=createBaseVNode("h3",{class:"theme-color fw-bold"},"Albums",-1),_hoisted_5$q={key:0,class:"px-3 text-decoration-underline theme-color"},_hoisted_6$p={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_sfc_main$u={__name:"Albums",setup(t){const e=ref([]),n=ref(!1),r=ref(!0);async function s(o=0){r.value=!1;let i=await ft.API("/albums/"+o);if(!i){n.value=!0;return}e.value=e.value.concat(i.albums),n.value=!0,r.value=!0}return onBeforeMount(()=>{s();let o=document.querySelector(".content-view");o.addEventListener("scroll",()=>{o.scrollTop>=o.scrollTopMax&&r.value&&s(e.value.length)})}),(o,i)=>n.value?(openBlock(),createElementBlock("div",_hoisted_1$s,[createBaseVNode("div",_hoisted_2$s,[createBaseVNode("div",_hoisted_3$r,[_hoisted_4$q,e.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$q,"No albums in the library.")),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,d=>(openBlock(),createElementBlock("div",_hoisted_6$p,[createVNode(_sfc_main$v,{album:d},null,8,["album"])]))),256))])])])):createCommentVNode("",!0)}},_hoisted_1$r={class:"p-0"},_hoisted_2$r={class:"position-relative clickable-shadow rounded"},_hoisted_3$q=["src"],_hoisted_4$p={class:"position-absolute bottom-0 right-0 m-2"},_hoisted_5$p={class:"d-flex flex-fill"},_sfc_main$t={__name:"Playlist",props:{playlist:{type:Object}},setup(t){const e=t,n=useRouter();async function r(d){d.target.src="/images/cassette.svg"}function s(d){return d?d.startsWith("http")?d:ft.server+"/"+d:"/images/cassette.svg"}async function o(){n.push("/playlist/"+e.playlist.id)}async function i(d){action({func:async function(){ft.playPlaylist(d)},object:[d],operation:"playPlaylist"})}return(d,l)=>(openBlock(),createElementBlock("div",{class:"card h-100 w-100 border-0",onContextmenu:l[1]||(l[1]=withModifiers(u=>unref(right_click)({item:e.playlist,event:u}),["prevent"]))},[createBaseVNode("div",_hoisted_1$r,[createBaseVNode("div",_hoisted_2$r,[createBaseVNode("div",{class:"ph rounded",onClick:o},[createBaseVNode("img",{class:"square img-fluid placeholder-img rounded",src:s(e.playlist.cover),onError:r},null,40,_hoisted_3$q)]),createBaseVNode("div",_hoisted_4$p,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill",type:"button",onClick:l[0]||(l[0]=u=>i(e.playlist.id))})])]),createBaseVNode("div",_hoisted_5$p,[createBaseVNode("h6",{class:"theme-color purple-on-hover fw-bold text-break text-wrap clickable p-2 ps-0",onClick:o},toDisplayString(e.playlist.title),1)])])],32))}},_hoisted_1$q={key:0,class:"card rounded-0 border-0 mx-3"},_hoisted_2$q={class:"card-body px-3"},_hoisted_3$p={class:"row g-3"},_hoisted_4$o=createBaseVNode("h3",{class:"theme-color fw-bold"},"Playlists",-1),_hoisted_5$o={key:0,class:"px-3 text-decoration-underline theme-color"},_hoisted_6$o={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_sfc_main$s={__name:"Playlists",setup(t){const e=ref([]),n=ref(!1),r=ref(!0);async function s(o=0){r.value=!1;let i=await ft.API("/playlists/"+o);if(!i){n.value=!0;return}e.value=e.value.concat(i.playlists),n.value=!0,r.value=!0}return onBeforeMount(()=>{s();let o=document.querySelector(".content-view");o.addEventListener("scroll",()=>{o.scrollTop>=o.scrollTopMax&&r.value&&s(e.value.length)})}),(o,i)=>n.value?(openBlock(),createElementBlock("div",_hoisted_1$q,[createBaseVNode("div",_hoisted_2$q,[createBaseVNode("div",_hoisted_3$p,[_hoisted_4$o,e.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$o,"No playlists in the library. ")),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,d=>(openBlock(),createElementBlock("div",_hoisted_6$o,[createVNode(_sfc_main$t,{playlist:d},null,8,["playlist"])]))),256))])])])):createCommentVNode("",!0)}},_hoisted_1$p=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("div",{class:"spinner-border",role:"status"},[createBaseVNode("span",{class:"visually-hidden"},"Loading...")])],-1),_hoisted_2$p=[_hoisted_1$p],_hoisted_3$o={class:"card rounded-0 border-0 m-3"},_hoisted_4$n={class:"card-body px-3"},_hoisted_5$n={class:"row g-3"},_hoisted_6$n={class:"col-md-3"},_hoisted_7$n=["src"],_hoisted_8$n={class:"col d-flex flex-column"},_hoisted_9$n={class:"theme-color d-flex flex-column"},_hoisted_10$n={class:"artist-title"},_hoisted_11$k={class:"text-muted"},_hoisted_12$k={class:"pt-2"},_hoisted_13$k={class:"d-flex flex-wrap"},_hoisted_14$k={class:"me-2"},_hoisted_15$k=createBaseVNode("hr",null,null,-1),_hoisted_16$k={class:"list-group"},_hoisted_17$k=createBaseVNode("li",{class:"list-group-item rounded my-1 theme-btn text-light d-flex"},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between"},[createBaseVNode("div",null,[createBaseVNode("span",{class:"fw-bold"},"Album")]),createBaseVNode("div",null,[createBaseVNode("span",{class:"fw-bold"},"Tracks")])])],-1),_hoisted_18$k=["onContextmenu","onClick"],_hoisted_19$i={class:"d-flex w-100 justify-content-between"},_hoisted_20$i={class:"d-flex"},_hoisted_21$i={class:"d-flex align-items-center"},_hoisted_22$g=["src"],_hoisted_23$f={class:"d-flex flex-column justify-content-center"},_hoisted_24$e={class:"btn btn-link search-link d-flex flex-row text-start py-0",style:{display:"contents"}},_hoisted_25$d={class:"theme-color"},_hoisted_26$8={class:"btn btn-link search-link d-flex flex-row text-start py-0",style:{display:"contents"}},_hoisted_27$5={class:"text-muted"},_hoisted_28$5={class:"d-flex align-items-center search-link"},_hoisted_29$5={class:"btn btn-link search-link d-flex flex-row text-start",style:{display:"contents"}},_hoisted_30$5={class:"text-muted"},_hoisted_31$4={class:"card rounded-0 border-0 mx-3 mt-3"},_hoisted_32$4={class:"card-body px-3"},_hoisted_33$3=createBaseVNode("h5",{class:"theme-color fw-bold"},"Comments",-1),_hoisted_34$3={class:"row g-3"},_hoisted_35$3=createBaseVNode("div",{class:"input-group"},[createBaseVNode("textarea",{class:"form-control search-card-input","aria-label":"With textarea",rows:"5",cols:"33",placeholder:"Remember, be nice!"})],-1),_hoisted_36$3={class:"list-group list-group-flush"},_hoisted_37$3={class:"list-group-item theme-comment-item p-1"},_hoisted_38$3={class:"d-flex justify-content-between align-items-center"},_hoisted_39$3={class:"text-muted timestamp"},_hoisted_40$3={class:"theme-color"},_hoisted_41$3={class:"d-flex justify-content-end"},_hoisted_42$3={class:"btn btn-dark",type:"button",disabled:""},_hoisted_43$3=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$r={__name:"Artist",setup(t){const e=useRouter(),n=ref(null),r=ref(null),s=ref(!1),o=ref({}),i=ref([]),d=ref([]),l=ref(0),u=ref(!1),_=ref(!0),a=ref(!1),c=ref(null),f=ref(null);async function m(J){J.target.src="/images/album.svg"}function v(J){let F=new Date(J),G=F.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),C=F.toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0});return`${G} ${C}`}async function g(){if(s.value){b();return}y()}async function y(){let J=document.querySelector("textarea").value;!J.length||(document.querySelector("textarea").value="",await ft.add_comment(ft.username,"artist",o.value.id,o.value.uuid,J))}async function b(){let J=document.querySelector("textarea").value;!J.length||(document.querySelector("textarea").value="",await ft.add_federated_comment(n.value,ft.username,"artist",o.value.id,o.value.uuid,J))}async function N(){c.value.disabled=!0;let J=await fetch(`https://en.wikipedia.org/w/api.php?origin=*&action=opensearch&search=${o.value.title}&limit=1&namespace=0&format=json`).then(F=>F.json()).then(F=>F[3]);if(J.length){window.open(J[0],"_blank"),c.value.disabled=!1;return}c.value.value="Page not found"}async function x(){f.value.disabled=!0;let J=await ft.lastfm_artist_page(o.value.title);if(J.hasOwnProperty("url")){window.open(J.url,"_blank"),f.value.disabled=!1;return}f.value.value="Page not found"}function A(J){return J?J.startsWith("http")?J:ft.server+"/"+J:"/images/artist.svg"}function L(J){return J?J.startsWith("http")?J:ft.server+"/"+J:"/images/album.svg"}function V(J,F){return F.year-J.year}async function P(J){let F=await ft.API(`/artist/${J}`);!F||F.error||(o.value=F.artist,i.value=F.albums,i.value.sort(V),u.value=!0)}async function j(J){let F=await ft.fAPI(n.value,`/artist/${J}`);!F||F.error||(o.value=F.artist,o.value.server=n.value,i.value=F.albums,i.value.map(G=>G.server=n.value),i.value.sort(V),u.value=!0)}async function H(J){if(!_.value)return;_.value=!1;let F=await ft.fAPI(n.value,`/comments/artist/${J}/${l.value}`);!F||F.error||(l.value+=F.comments.length,d.value=d.value.concat(F.comments),_.value=!0)}async function ae(J){if(!_.value)return;_.value=!1;let F=await ft.API(`/comments/artist/${J}/${l.value}`);!F||F.error||(l.value+=F.comments.length,d.value=d.value.concat(F.comments),_.value=!0)}async function ie(J){if(J.server){e.push(`/album/${J.id}@${J.server}`);return}e.push("/album/"+J.id)}async function le(){if(r.value=e.currentRoute.value.params.id,r.value.includes("@")){[r.value,n.value]=r.value.split("@"),s.value=!0,j(r.value),H(r.value);return}P(r.value),ae(r.value)}return onBeforeMount(()=>{le()}),(J,F)=>{const G=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",null,_hoisted_2$p,512),[[vShow,!u.value]]),withDirectives(createBaseVNode("div",_hoisted_3$o,[createBaseVNode("div",_hoisted_4$n,[createBaseVNode("div",_hoisted_5$n,[createBaseVNode("div",_hoisted_6$n,[createBaseVNode("div",{class:"ph rounded",onContextmenu:F[0]||(F[0]=withModifiers(C=>unref(right_click)({item:o.value,event:C}),["prevent"]))},[createBaseVNode("img",{class:"playlist-img shadow rounded",src:A(o.value.cover)},null,8,_hoisted_7$n)],32)]),createBaseVNode("div",_hoisted_8$n,[createBaseVNode("div",_hoisted_9$n,[createBaseVNode("h1",_hoisted_10$n,toDisplayString(o.value.title),1),createBaseVNode("small",_hoisted_11$k,toDisplayString(i.value.length)+" albums",1),createBaseVNode("div",_hoisted_12$k,[createBaseVNode("div",_hoisted_13$k,[createBaseVNode("div",_hoisted_14$k,[createBaseVNode("button",{ref_key:"wiki_btn",ref:c,type:"button",class:normalizeClass(["btn theme-btn black-on-hover text-white fw-bold",{disabled:a.value}]),onClick:N},"Wikipedia",2)]),createBaseVNode("div",null,[createBaseVNode("button",{ref_key:"lastfm_btn",ref:f,type:"button",class:normalizeClass(["btn theme-btn black-on-hover text-white fw-bold",{disabled:a.value}]),onClick:x},"Last.fm",2)])])]),_hoisted_15$k]),createBaseVNode("ul",_hoisted_16$k,[_hoisted_17$k,(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,C=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item foreground-content clickable rounded d-flex p-1",onContextmenu:withModifiers(D=>unref(right_click)({item:C,event:D}),["prevent"]),onClick:D=>ie(C)},[createBaseVNode("div",_hoisted_19$i,[createBaseVNode("div",_hoisted_20$i,[createBaseVNode("div",_hoisted_21$i,[createBaseVNode("img",{src:L(C.cover),class:"track-cover theme-border rounded",onError:m},null,40,_hoisted_22$g)]),createBaseVNode("div",_hoisted_23$f,[createBaseVNode("div",_hoisted_24$e,[createBaseVNode("span",_hoisted_25$d,toDisplayString(C.title),1)]),createBaseVNode("div",_hoisted_26$8,[createBaseVNode("span",_hoisted_27$5,toDisplayString(C.year),1)])])]),createBaseVNode("div",_hoisted_28$5,[createBaseVNode("div",_hoisted_29$5,[createBaseVNode("span",_hoisted_30$5,toDisplayString(C.nb_tracks),1)])])])],40,_hoisted_18$k))),256))])])])])],512),[[vShow,u.value]]),withDirectives(createBaseVNode("div",_hoisted_31$4,[createBaseVNode("div",_hoisted_32$4,[_hoisted_33$3,createBaseVNode("div",_hoisted_34$3,[_hoisted_35$3,createBaseVNode("div",{class:"d-flex justify-content-end"},[createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:g},"Post")]),createBaseVNode("div",null,[createBaseVNode("ul",_hoisted_36$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,C=>(openBlock(),createElementBlock("li",_hoisted_37$3,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_38$3,[createVNode(G,{to:"/user/"+C.author,class:"theme-color purple-on-hover fw-bold me-2"},{default:withCtx(()=>[createTextVNode(toDisplayString(C.author),1)]),_:2},1032,["to"]),createBaseVNode("span",_hoisted_39$3,toDisplayString(v(C.created_at)),1)]),createBaseVNode("p",_hoisted_40$3,toDisplayString(C.content),1)])]))),256))]),createBaseVNode("div",_hoisted_41$3,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:ae},"Load more",512),[[vShow,_.value&&d.value.length]]),withDirectives(createBaseVNode("button",_hoisted_42$3,[_hoisted_43$3,createTextVNode(" Loading... ")],512),[[vShow,!_.value&&d.value.length]])])])])])],512),[[vShow,u.value]])],64)}}},_hoisted_1$o=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("div",{class:"spinner-border",role:"status"},[createBaseVNode("span",{class:"visually-hidden"},"Loading...")])],-1),_hoisted_2$o=[_hoisted_1$o],_hoisted_3$n={class:"card rounded-0 border-0 m-3"},_hoisted_4$m={class:"card-body px-3"},_hoisted_5$m={class:"row g-3"},_hoisted_6$m={class:"col-md-3"},_hoisted_7$m={class:"ph rounded"},_hoisted_8$m=["src"],_hoisted_9$m={class:"position-absolute bottom-0 right-0"},_hoisted_10$m={class:"col theme-color"},_hoisted_11$j={class:"d-flex flex-column"},_hoisted_12$j={class:"album-title"},_hoisted_13$j={class:"d-flex"},_hoisted_14$j={class:"text-muted"},_hoisted_15$j={class:"album-info text-muted"},_hoisted_16$j={class:"album-info text-muted"},_hoisted_17$j={class:"pt-2"},_hoisted_18$j={class:"d-inline-flex align-content-center align-items-center"},_hoisted_19$h=["src"],_hoisted_20$h={class:"purple-on-hover theme-color mx-2"},_hoisted_21$h=createBaseVNode("hr",null,null,-1),_hoisted_22$f={class:"list-group"},_hoisted_23$e={key:0,class:"list-group-item rounded my-1 theme-btn text-light d-flex"},_hoisted_24$d={class:"d-flex w-100 justify-content-between"},_hoisted_25$c={class:"fw-bold"},_hoisted_26$7=["onContextmenu","onClick"],_hoisted_27$4={class:"d-flex w-100 justify-content-between"},_hoisted_28$4={class:"d-flex"},_hoisted_29$4={class:"d-flex align-items-center"},_hoisted_30$4=["src"],_hoisted_31$3={class:"d-flex align-items-center"},_hoisted_32$3={class:"btn btn-link search-link d-flex text-start py-0",style:{display:"contents"}},_hoisted_33$2={class:"text-muted me-2"},_hoisted_34$2={class:"theme-color text-break"},_hoisted_35$2={class:"card rounded-0 border-0 mx-3 mt-3"},_hoisted_36$2={class:"card-body px-3"},_hoisted_37$2=createBaseVNode("h5",{class:"theme-color fw-bold"},"Comments",-1),_hoisted_38$2={class:"row g-3"},_hoisted_39$2=createBaseVNode("div",{class:"input-group"},[createBaseVNode("textarea",{class:"form-control search-card-input","aria-label":"With textarea",rows:"5",cols:"33",placeholder:"Remember, be nice!"})],-1),_hoisted_40$2={class:"list-group list-group-flush"},_hoisted_41$2={class:"list-group-item theme-comment-item p-1"},_hoisted_42$2={class:"d-flex justify-content-between align-items-center"},_hoisted_43$2={class:"text-muted timestamp"},_hoisted_44$2={class:"theme-color"},_hoisted_45$2={class:"d-flex justify-content-end"},_hoisted_46$2={class:"btn btn-dark",type:"button",disabled:""},_hoisted_47$2=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$q={__name:"Album",setup(t){const e=useRouter(),n=ref(null),r=ref(null),s=ref(!1),o=ref({}),i=ref({}),d=ref([]),l=ref([]),u=ref(0),_=ref(!1),a=ref(!0),c=ref(null),f=computed(()=>e.currentRoute.value.params);async function m(C){C.target.src="/images/album.svg"}async function v(C){C.target.src="/images/track.svg"}function g(C){return C?C.toString():"Unknown"}async function y(C){if(n.value){e.push(`/artist/${C.id}@${n.value}`);return}e.push(`/artist/${C.id}`)}async function b(){if(s.value){x();return}N()}async function N(){let C=document.querySelector("textarea").value;!C.length||(document.querySelector("textarea").value="",await ft.add_comment(ft.username,"album",o.value.id,o.value.uuid,C))}async function x(){let C=document.querySelector("textarea").value;!C.length||(document.querySelector("textarea").value="",await ft.add_federated_comment(n.value,ft.username,"album",o.value.id,o.value.uuid,C))}function A(C){let D=new Date(C),X=D.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),z=D.toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0});return`${X} ${z}`}function L(C){return C?C.startsWith("http")?C:ft.server+"/"+C:"/images/album.svg"}function V(C){return C?C.startsWith("http")?C:ft.server+"/"+C:"/images/track.svg"}function P(C){return C?C.startsWith("http")?C:ft.server+"/"+C:"/images/artist.svg"}async function j(C){if(n.value){action({func:async function(){ft.playTrack(C,n.value)},object:[C,n.value],operation:"playTrack"});return}action({func:async function(){ft.playTrack(C)},object:[C],operation:"playTrack"})}async function H(C){let D=await ft.API(`/album/${C}`);!D||D.error||(i.value=D.artist,o.value=D.album,d.value=D.tracks,d.value.sort((X,z)=>X.track_position-z.track_position),d.value.sort((X,z)=>X.disc_number-z.disc_number),_.value=!0)}async function ae(C){let D=await ft.fAPI(n.value,"/album/"+C);!D||D.error||(i.value=D.artist,i.value.server=n.value,o.value=D.album,o.value.server=n.value,d.value=D.tracks,d.value.map(X=>X.server=n.value),d.value.sort((X,z)=>X.track_position-z.track_position),d.value.sort((X,z)=>X.disc_number-z.disc_number),_.value=!0)}async function ie(C){if(n.value){action({func:async function(){ft.playAlbum(C,n.value)},object:[C,n.value],operation:"playAlbum"});return}action({func:async function(){ft.playAlbum(C)},object:[C],operation:"playAlbum"})}async function le(C){if(!a.value)return;a.value=!1;let D=await ft.API(`/comments/album/${C}/${u.value}`);!D||D.error||(u.value+=D.comments.length,l.value=l.value.concat(D.comments),a.value=!0)}async function J(C){if(!a.value)return;a.value=!1;let D=await ft.fAPI(n.value,`/comments/album/${C}/${u.value}`);!D||D.error||(u.value+=D.comments.length,l.value=l.value.concat(D.comments),a.value=!0)}async function F(){if(store.selected_track_id&&(c.value=store.selected_track_id,store.selected_track_id=null),r.value=e.currentRoute.value.params.id,r.value.includes("@")){[r.value,n.value]=r.value.split("@"),s.value=!0,ae(r.value),J(r.value);return}H(r.value),le(r.value)}async function G(){if(s.value){J(r.value);return}le(r.value)}return watch(f,C=>{store.selected_track_id&&(c.value=store.selected_track_id,store.selected_track_id=null),C.id&&F()}),onBeforeMount(()=>{F()}),(C,D)=>{const X=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",null,_hoisted_2$o,512),[[vShow,!_.value]]),withDirectives(createBaseVNode("div",_hoisted_3$n,[createBaseVNode("div",_hoisted_4$m,[createBaseVNode("div",_hoisted_5$m,[createBaseVNode("div",_hoisted_6$m,[createBaseVNode("div",{class:"d-flex position-relative",onContextmenu:D[1]||(D[1]=withModifiers(z=>unref(right_click)({item:o.value,event:z}),["prevent"]))},[createBaseVNode("div",_hoisted_7$m,[createBaseVNode("img",{class:"playlist-img shadow rounded",src:L(o.value.cover),onError:m},null,40,_hoisted_8$m)]),createBaseVNode("div",_hoisted_9$m,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill m-2",type:"button",onClick:D[0]||(D[0]=z=>ie(o.value.id))})])],32)]),createBaseVNode("div",_hoisted_10$m,[createBaseVNode("div",_hoisted_11$j,[createBaseVNode("h1",_hoisted_12$j,toDisplayString(o.value.title),1),createBaseVNode("div",_hoisted_13$j,[createBaseVNode("small",_hoisted_14$j,toDisplayString(o.value.year),1),createBaseVNode("small",_hoisted_15$j,toDisplayString(g(o.value.genre)),1),createBaseVNode("small",_hoisted_16$j,toDisplayString(d.value.length)+" tracks",1)])]),createBaseVNode("div",_hoisted_17$j,[createBaseVNode("a",{class:"search-link clickable",onClick:D[2]||(D[2]=z=>y(i.value))},[createBaseVNode("div",_hoisted_18$j,[createBaseVNode("img",{class:"img-fluid figure-img rounded m-0",src:P(i.value.cover),width:"28",height:"28"},null,8,_hoisted_19$h),createBaseVNode("span",_hoisted_20$h,toDisplayString(i.value.title),1)])])]),_hoisted_21$h,createBaseVNode("ul",_hoisted_22$f,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,z=>(openBlock(),createElementBlock("div",null,[z.track_position==1?(openBlock(),createElementBlock("li",_hoisted_23$e,[createBaseVNode("div",_hoisted_24$d,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_25$c,"Disc "+toDisplayString(z.disc_number),1)])])])):createCommentVNode("",!0),createBaseVNode("li",{class:normalizeClass(["list-group-item theme-list-item foreground-content clickable rounded d-flex p-1",{"now-playing":c.value==z.id}]),onContextmenu:withModifiers(pe=>unref(right_click)({item:z,event:pe}),["prevent"]),onClick:pe=>j(z.id)},[createBaseVNode("div",_hoisted_27$4,[createBaseVNode("div",_hoisted_28$4,[createBaseVNode("div",_hoisted_29$4,[createBaseVNode("img",{src:V(o.value.cover),class:"track-cover theme-border rounded",onError:v},null,40,_hoisted_30$4)]),createBaseVNode("div",_hoisted_31$3,[createBaseVNode("button",_hoisted_32$3,[createBaseVNode("span",_hoisted_33$2,toDisplayString(z.track_position)+".",1),createBaseVNode("span",_hoisted_34$2,toDisplayString(z.title),1)])])])])],42,_hoisted_26$7)]))),256))])])])])],512),[[vShow,_.value]]),withDirectives(createBaseVNode("div",_hoisted_35$2,[createBaseVNode("div",_hoisted_36$2,[_hoisted_37$2,createBaseVNode("div",_hoisted_38$2,[_hoisted_39$2,createBaseVNode("div",{class:"d-flex justify-content-end"},[createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:b},"Post")]),createBaseVNode("div",null,[createBaseVNode("ul",_hoisted_40$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value,z=>(openBlock(),createElementBlock("li",_hoisted_41$2,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_42$2,[createVNode(X,{to:"/user/"+z.author,class:"theme-color purple-on-hover fw-bold me-2"},{default:withCtx(()=>[createTextVNode(toDisplayString(z.author),1)]),_:2},1032,["to"]),createBaseVNode("span",_hoisted_43$2,toDisplayString(A(z.created_at)),1)]),createBaseVNode("p",_hoisted_44$2,toDisplayString(z.content),1)])]))),256))]),createBaseVNode("div",_hoisted_45$2,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:G},"Load more",512),[[vShow,a.value&&l.value.length]]),withDirectives(createBaseVNode("button",_hoisted_46$2,[_hoisted_47$2,createTextVNode(" Loading... ")],512),[[vShow,!a.value&&l.value.length]])])])])])],512),[[vShow,_.value]])],64)}}},_hoisted_1$n=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("div",{class:"spinner-border",role:"status"},[createBaseVNode("span",{class:"visually-hidden"},"Loading...")])],-1),_hoisted_2$n=[_hoisted_1$n],_hoisted_3$m={class:"card rounded-0 border-0 m-3"},_hoisted_4$l={class:"card-body px-3"},_hoisted_5$l={class:"row g-3"},_hoisted_6$l={class:"col-md-3"},_hoisted_7$l={class:"ph rounded"},_hoisted_8$l=["src"],_hoisted_9$l={class:"position-absolute bottom-0 right-0"},_hoisted_10$l={class:"col theme-color"},_hoisted_11$i={class:"d-flex flex-column"},_hoisted_12$i={class:"album-title"},_hoisted_13$i={class:"text-muted"},_hoisted_14$i={class:"pt-2"},_hoisted_15$i={class:"d-inline-flex align-content-center align-items-center"},_hoisted_16$i={class:"purple-on-hover theme-color"},_hoisted_17$i=createBaseVNode("hr",null,null,-1),_hoisted_18$i={class:"list-group"},_hoisted_19$g=createBaseVNode("li",{class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between"},[createBaseVNode("div",null,[createBaseVNode("span",{class:"fw-bold"},"Playlist")])])],-1),_hoisted_20$g=["onContextmenu"],_hoisted_21$g=["onClick"],_hoisted_22$e={class:"d-flex"},_hoisted_23$d={class:"d-flex align-items-start"},_hoisted_24$c=["src"],_hoisted_25$b={class:"d-flex align-items-center"},_hoisted_26$6={class:"btn btn-link search-link d-flex text-start py-0",style:{display:"contents"}},_hoisted_27$3={class:"text-muted me-2"},_hoisted_28$3={class:"theme-color text-break"},_hoisted_29$3={class:"d-flex h-100 align-items-center"},_hoisted_30$3={class:"btn btn-light action-btn bi bi-three-dots m-0 me-3",type:"button","data-bs-toggle":"dropdown"},_hoisted_31$2={class:"dropdown-menu shadow-lg context-menu"},_hoisted_32$2=["onClick"],_hoisted_33$1=createBaseVNode("span",{class:"bi bi-trash-fill me-1"},null,-1),_hoisted_34$1={class:"card rounded-0 border-0 mx-3 mt-3"},_hoisted_35$1={class:"card-body px-3"},_hoisted_36$1=createBaseVNode("h5",{class:"theme-color fw-bold"},"Comments",-1),_hoisted_37$1={class:"row g-3"},_hoisted_38$1=createBaseVNode("div",{class:"input-group"},[createBaseVNode("textarea",{class:"form-control search-card-input","aria-label":"With textarea",rows:"5",cols:"33",placeholder:"Remember, be nice!"})],-1),_hoisted_39$1={class:"list-group list-group-flush mb-3"},_hoisted_40$1={class:"list-group-item foreground-content theme-comment-item p-1"},_hoisted_41$1={class:"d-flex flex-column mx-2 py-1"},_hoisted_42$1={class:"d-flex justify-content-between align-items-center"},_hoisted_43$1={class:"text-muted timestamp"},_hoisted_44$1={class:"theme-color mb-0"},_hoisted_45$1={class:"d-flex justify-content-end"},_hoisted_46$1={class:"btn btn-dark",type:"button",disabled:""},_hoisted_47$1=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$p={__name:"Playlist",setup(t){const e=useRouter(),n=ref(null),r=ref(null),s=ref(!1),o=ref([]),i=ref({}),d=ref([]),l=ref(0),u=ref(!1),_=ref(!0),a=ref(!1),c=computed(()=>e.currentRoute.value.params);function f(F){return F?F.startsWith("http")?F:ft.server+"/"+F:"/images/cassette.svg"}function m(F){return F?F.startsWith("http")?over:ft.server+"/"+F:"/images/track.svg"}async function v(F){F.target.src="/images/cassette.svg"}async function g(F){F.target.src="/images/track.svg"}async function y(){if(s.value){N();return}b()}async function b(){let F=document.querySelector("textarea").value;!F.length||(document.querySelector("textarea").value="",await ft.add_comment(ft.username,"playlist",i.value.id,i.value.uuid,F))}async function N(){let F=document.querySelector("textarea").value;!F.length||(document.querySelector("textarea").value="",await ft.add_federated_comment(n.value,ft.username,"playlist",i.value.id,i.value.uuid,F))}function x(F){let G=new Date(F),C=G.toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric"}),D=G.toLocaleString("en-GB",{hour:"numeric",minute:"numeric",hour12:!0});return`${C} ${D}`}async function A(F){if(!_.value)return;_.value=!1;let G=await ft.API(`/comments/playlist/${F}/${l.value}`);!G||G.error||(l.value+=G.comments.length,d.value=d.value.concat(G.comments),_.value=!0)}async function L(F){if(!_.value)return;_.value=!1;let G=await ft.fAPI(n.value,`/comments/playlist/${F}/${l.value}`);!G||G.error||(l.value+=G.comments.length,d.value=d.value.concat(G.comments),_.value=!0)}async function V(F){await ft.deleteTrackFromPlaylist(i.value.id,F),le()}async function P(F){if(F.server){action({func:async function(){ft.playTrack(F.id,F.server)},object:[F.id,F.server],operation:"playTrack"});return}action({func:async function(){ft.playTrack(F.id)},object:[F.id],operation:"playTrack"})}async function j(F,G){let C={};for(let D of F){let[X,z]=D.split("@");C[z]||(C[z]=[]),C[z].push(parseInt(X))}for(let D in C){let X=await ft.get_federated_tracks(D,C[D]);if(!X)return;X.tracks.map(z=>z.server=D);for(let z=0;z<G.length;z++){let pe=G[z],_e=X.tracks.filter(be=>`${be.id}@${be.server}`==pe);_e.length&&(o.value[z]=_e[0])}}}async function H(F){let G=await ft.API(`/playlist/${F}`);if(!(!G||G.error)){i.value=G.playlist,o.value=[];for(let C=0;C<G.playlist.tracks.length;C++)o.value.push({});j(G.federated,G.playlist.tracks);for(let C=0;C<G.playlist.tracks.length;C++){let D=G.playlist.tracks[C],X=G.tracks.filter(z=>z.id==D);X.length&&(o.value[C]=X[0])}JSON.parse(localStorage.getItem("username"))==i.value.author&&(a.value=!0),u.value=!0}}async function ae(F){if(n.value){action({func:async function(){ft.playPlaylist(F,n.value)},object:[F,n.value],operation:"playAlbum"});return}action({func:async function(){ft.playPlaylist(F)},object:[F],operation:"playPlaylist"})}async function ie(F){let G=await ft.fAPI(n.value,"/playlist/"+F);if(!(!G||G.error)){i.value=G.playlist,i.value.server=n.value;for(let C=0;C<G.playlist.tracks.length;C++)o.value.push({});j(G.federated,G.playlist.tracks),G.tracks.map(C=>C.server=n.value);for(let C=0;C<G.playlist.tracks.length;C++){let D=G.playlist.tracks[C],X=G.tracks.filter(z=>z.id==D);X.length&&(o.value[C]=X[0])}u.value=!0}}async function le(){if(r.value=e.currentRoute.value.params.id,r.value.includes("@")){[r.value,n.value]=r.value.split("@"),s.value=!0,ie(r.value),L(r.value);return}H(r.value),A(r.value)}async function J(){if(s.value){L(r.value);return}A(r.value)}return watch(c,F=>{F.id&&le()}),onBeforeMount(()=>{le()}),(F,G)=>{const C=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",null,_hoisted_2$n,512),[[vShow,!u.value]]),withDirectives(createBaseVNode("div",_hoisted_3$m,[createBaseVNode("div",_hoisted_4$l,[createBaseVNode("div",_hoisted_5$l,[createBaseVNode("div",_hoisted_6$l,[createBaseVNode("div",{class:"d-flex position-relative",onContextmenu:G[1]||(G[1]=withModifiers(D=>unref(right_click)({item:i.value,event:D}),["prevent"]))},[createBaseVNode("div",_hoisted_7$l,[createBaseVNode("img",{class:"playlist-img shadow rounded",src:f(i.value.cover),onError:v},null,40,_hoisted_8$l)]),createBaseVNode("div",_hoisted_9$l,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill m-2",type:"button",onClick:G[0]||(G[0]=D=>ae(i.value.id))})])],32)]),createBaseVNode("div",_hoisted_10$l,[createBaseVNode("div",_hoisted_11$i,[createBaseVNode("h1",_hoisted_12$i,toDisplayString(i.value.title),1),createBaseVNode("small",_hoisted_13$i,toDisplayString(o.value.length)+" tracks",1)]),createBaseVNode("div",_hoisted_14$i,[createVNode(C,{to:"/user/"+i.value.author,class:"search-link"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_15$i,[createBaseVNode("span",_hoisted_16$i,toDisplayString(i.value.author),1)])]),_:1},8,["to"])]),_hoisted_17$i,createBaseVNode("ul",_hoisted_18$i,[_hoisted_19$g,(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,(D,X)=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item foreground-content clickable rounded d-flex p-1",onContextmenu:withModifiers(z=>unref(right_click)({item:D,event:z}),["prevent"])},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between",onClick:z=>P(D)},[createBaseVNode("div",_hoisted_22$e,[createBaseVNode("div",_hoisted_23$d,[createBaseVNode("img",{src:m(D.cover),class:"track-cover theme-border rounded",onError:g},null,40,_hoisted_24$c)]),createBaseVNode("div",_hoisted_25$b,[createBaseVNode("button",_hoisted_26$6,[createBaseVNode("span",_hoisted_27$3,toDisplayString(X+1)+".",1),createBaseVNode("span",_hoisted_28$3,toDisplayString(D.title),1)])])])],8,_hoisted_21$g),withDirectives(createBaseVNode("div",null,[createBaseVNode("div",_hoisted_29$3,[createBaseVNode("button",_hoisted_30$3,[createBaseVNode("ul",_hoisted_31$2,[createBaseVNode("li",null,[createBaseVNode("button",{class:"dropdown-item",type:"button",onClick:z=>V(X)},[_hoisted_33$1,createTextVNode("Delete track")],8,_hoisted_32$2)])])])])],512),[[vShow,a.value]])],40,_hoisted_20$g))),256))])])])])],512),[[vShow,u.value]]),withDirectives(createBaseVNode("div",_hoisted_34$1,[createBaseVNode("div",_hoisted_35$1,[_hoisted_36$1,createBaseVNode("div",_hoisted_37$1,[_hoisted_38$1,createBaseVNode("div",{class:"d-flex justify-content-end"},[createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:y},"Post")]),createBaseVNode("div",null,[createBaseVNode("ul",_hoisted_39$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.value,D=>(openBlock(),createElementBlock("li",_hoisted_40$1,[createBaseVNode("div",_hoisted_41$1,[createBaseVNode("div",_hoisted_42$1,[createVNode(C,{to:"/user/"+D.author,class:"theme-color purple-on-hover fw-bold"},{default:withCtx(()=>[createTextVNode(toDisplayString(D.author),1)]),_:2},1032,["to"]),createBaseVNode("span",_hoisted_43$1,toDisplayString(x(D.created_at)),1)]),createBaseVNode("p",_hoisted_44$1,toDisplayString(D.content),1)])]))),256))]),createBaseVNode("div",_hoisted_45$1,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:J},"Load more",512),[[vShow,_.value&&d.value.length]]),withDirectives(createBaseVNode("button",_hoisted_46$1,[_hoisted_47$1,createTextVNode(" Loading... ")],512),[[vShow,!_.value&&d.value.length]])])])])])],512),[[vShow,u.value]])],64)}}},_hoisted_1$m=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("div",{class:"spinner-border",role:"status"},[createBaseVNode("span",{class:"visually-hidden"},"Loading...")])],-1),_hoisted_2$m=[_hoisted_1$m],_hoisted_3$l={class:"card rounded-0 border-0 m-3"},_hoisted_4$k={class:"card-body px-3"},_hoisted_5$k={class:"row g-3"},_hoisted_6$k={class:"col-md-3"},_hoisted_7$k={class:"d-flex position-relative"},_hoisted_8$k={class:"ph rounded"},_hoisted_9$k=["src"],_hoisted_10$k={class:"position-absolute bottom-0 right-0"},_hoisted_11$h={class:"col theme-color"},_hoisted_12$h={class:"d-flex flex-column"},_hoisted_13$h={class:"album-title"},_hoisted_14$h={class:"text-muted"},_hoisted_15$h={class:"pt-2"},_hoisted_16$h={class:"d-flex flex-wrap"},_hoisted_17$h={class:"m-1"},_hoisted_18$h=createBaseVNode("hr",null,null,-1),_sfc_main$o={__name:"Station",setup(t){const e=useRouter(),n=ref({}),r=ref(!1);async function s(l){l.target.src="/images/station.svg"}async function o(){window.open(n.value.url,"_blank")}async function i(){ft.playStation({guide_id:n.value.guide_id,text:n.value.name,image:n.value.logo})}async function d(l){let u=await ft.API("/station/"+l);!u||u.error||(n.value=u.station,r.value=!0)}return onMounted(()=>{d(e.currentRoute.value.params.id)}),(l,u)=>(openBlock(),createElementBlock(Fragment,null,[withDirectives(createBaseVNode("div",null,_hoisted_2$m,512),[[vShow,!r.value]]),withDirectives(createBaseVNode("div",_hoisted_3$l,[createBaseVNode("div",_hoisted_4$k,[createBaseVNode("div",_hoisted_5$k,[createBaseVNode("div",_hoisted_6$k,[createBaseVNode("div",_hoisted_7$k,[createBaseVNode("div",_hoisted_8$k,[createBaseVNode("img",{class:"playlist-img shadow rounded",src:n.value.logo,onError:s},null,40,_hoisted_9$k)]),createBaseVNode("div",_hoisted_10$k,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill m-2",type:"button",onClick:u[0]||(u[0]=_=>i())})])])]),createBaseVNode("div",_hoisted_11$h,[createBaseVNode("div",_hoisted_12$h,[createBaseVNode("h1",_hoisted_13$h,toDisplayString(n.value.name),1),createBaseVNode("small",_hoisted_14$h,toDisplayString(n.value.slogan),1)]),createBaseVNode("div",_hoisted_15$h,[createBaseVNode("div",_hoisted_16$h,[createBaseVNode("div",_hoisted_17$h,[createBaseVNode("button",{ref:"wiki_btn",type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:o},"Website",512)])])]),_hoisted_18$h,createBaseVNode("div",null,[createBaseVNode("p",null,toDisplayString(n.value.description),1)])])])])],512),[[vShow,r.value]])],64))}},_hoisted_1$l={class:"card rounded-0 border-0 m-3"},_hoisted_2$l={class:"card-body rounded px-3"},_hoisted_3$k={class:"row g-3"},_hoisted_4$j={class:"col-md-3"},_hoisted_5$j={class:"d-flex position-relative"},_hoisted_6$j={class:"ph rounded"},_hoisted_7$j=["src"],_hoisted_8$j={class:"col"},_hoisted_9$j={class:"theme-color album-title mb-4"},_hoisted_10$j=createBaseVNode("hr",null,null,-1),_sfc_main$n={__name:"Profile",setup(t){const e=ref({}),n=ref(null),r=ref(!1);async function s(u){u.target.src="/images/friend.svg"}function o(){return e.value.cover?e.value.cover.startsWith("http")?cover:ft.server+"/"+e.value.cover:"/images/friend.svg"}async function i(){let u=await ft.API("/profile");!u||(e.value=u.profile,r.value=!0)}async function d(){let u=n.value.files[0];if(!u||!u.type.startsWith("image/"))return;let _=new FormData;_.append("cover",u);let a=await ft.upload_cover(_);a.hasOwnProperty("cover")&&(e.value.cover=a.cover)}async function l(){n.value.click()}return onBeforeMount(()=>{i()}),(u,_)=>{const a=resolveComponent("router-view");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$l,[createBaseVNode("div",_hoisted_2$l,[createBaseVNode("div",_hoisted_3$k,[createBaseVNode("div",_hoisted_4$j,[createBaseVNode("div",_hoisted_5$j,[createBaseVNode("div",_hoisted_6$j,[createBaseVNode("img",{class:"playlist-img rounded",src:o(),onError:s},null,40,_hoisted_7$j)]),createBaseVNode("div",{class:"position-absolute bottom-0 right-0"},[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-pencil-square m-2",type:"button",onClick:l})]),createBaseVNode("input",{ref_key:"cover_upload",ref:n,type:"file",class:"visually-hidden",onChange:d},null,544)])]),createBaseVNode("div",_hoisted_8$j,[createBaseVNode("h1",_hoisted_9$j,toDisplayString(e.value.username),1),_hoisted_10$j,createVNode(a)])])])],512)),[[vShow,r.value]])}}},_hoisted_1$k={class:"nav nav-pills"},_hoisted_2$k={class:"nav-item"},_hoisted_3$j={class:"nav-item"},_hoisted_4$i={class:"nav-item"},_hoisted_5$i={class:"nav-item"},_hoisted_6$i={class:"nav-item"},_hoisted_7$i={class:"nav-item"},_hoisted_8$i={class:"nav-item"},_hoisted_9$i={class:"nav-item"},_hoisted_10$i=createBaseVNode("hr",null,null,-1),_hoisted_11$g={class:"list-group"},_hoisted_12$g={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_13$g={class:"d-flex w-100 justify-content-between"},_hoisted_14$g={class:"fw-bold"},_hoisted_15$g={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_16$g=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No albums found")])],-1),_hoisted_17$g=[_hoisted_16$g],_hoisted_18$g=["onContextmenu","onClick"],_hoisted_19$f={class:"d-flex flex-fill foreground align-items-center"},_hoisted_20$f=["src"],_hoisted_21$f={class:"d-flex align-items-center"},_hoisted_22$d=["content_id","content_type"],_hoisted_23$c={class:"theme-color text-break"},_hoisted_24$b={class:"d-flex justify-content-end mt-2"},_hoisted_25$a={class:"btn btn-dark",type:"button",disabled:""},_hoisted_26$5=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$m={__name:"Albums",setup(t){const e=useRouter(),n=ref([]),r=ref(0),s=ref(0),o=ref(!0);async function i(a){a.target.src="/images/album.svg"}function d(a){return a?a.startsWith("http")?a:ft.server+"/"+a:"/images/album.svg"}async function l(a){if(a.server){e.push("/album/"+a.id+"@"+a.server);return}e.push("/album/"+a.id)}async function u(a,c,f){let m={};for(let v of a){let[g,y]=v.split("@");m[y]||(m[y]=[]),m[y].push(parseInt(g))}for(let v in m){let g=await ft.get_federated_albums(v,m[v]);if(!g)return;g.albums.map(y=>y.server=v);for(let y=0;y<c.length;y++){let b=c[y],N=g.albums.filter(x=>`${x.id}@${x.server}`==b);N.length&&(n.value[y+f]=N[0])}}}async function _(){if(!o.value)return;o.value=!1;let a=await ft.API(`/profile/albums/${s.value}/${r.value}`);if(!!a){for(let c=0;c<a.order.length;c++)n.value.push({});u(a.federated,a.order,s.value);for(let c=0;c<a.order.length;c++){let f=a.order[c],m=a.albums.filter(v=>v.id==f);m.length&&(n.value[c+s.value]=m[0])}r.value=a.total,s.value+=a.order.length,o.value=!0}}return onMounted(()=>{_()}),(a,c)=>{const f=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$k,[createBaseVNode("li",_hoisted_2$k,[createVNode(f,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$j,[createVNode(f,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$i,[createVNode(f,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$i,[createVNode(f,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$i,[createVNode(f,{to:"/profile/albums",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$i,[createVNode(f,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$i,[createVNode(f,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$i,[createVNode(f,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$i,createBaseVNode("ul",_hoisted_11$g,[createBaseVNode("li",_hoisted_12$g,[createBaseVNode("div",_hoisted_13$g,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_14$g,toDisplayString(r.value)+" liked albums",1)])])]),n.value.length==0?(openBlock(),createElementBlock("li",_hoisted_15$g,_hoisted_17$g)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,m=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(v=>unref(right_click)({item:m,event:v}),["prevent"]),onClick:v=>l(m)},[createBaseVNode("div",_hoisted_19$f,[createBaseVNode("img",{src:d(m.cover),class:"track-cover theme-border rounded",onError:i},null,40,_hoisted_20$f),createBaseVNode("div",_hoisted_21$f,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:m.id,content_type:m.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_23$c,toDisplayString(m.title),1)],8,_hoisted_22$d)])])],40,_hoisted_18$g))),256))]),createBaseVNode("div",_hoisted_24$b,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:_},"Load more",512),[[vShow,o.value]]),withDirectives(createBaseVNode("button",_hoisted_25$a,[_hoisted_26$5,createTextVNode(" Loading... ")],512),[[vShow,!o.value]])])],64)}}},_hoisted_1$j={class:"nav nav-pills"},_hoisted_2$j={class:"nav-item"},_hoisted_3$i={class:"nav-item"},_hoisted_4$h={class:"nav-item"},_hoisted_5$h={class:"nav-item"},_hoisted_6$h={class:"nav-item"},_hoisted_7$h={class:"nav-item"},_hoisted_8$h={class:"nav-item"},_hoisted_9$h={class:"nav-item"},_hoisted_10$h=createBaseVNode("hr",null,null,-1),_hoisted_11$f={class:"list-group"},_hoisted_12$f={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_13$f={class:"d-flex w-100 justify-content-between"},_hoisted_14$f={class:"fw-bold"},_hoisted_15$f={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_16$f=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No artists found")])],-1),_hoisted_17$f=[_hoisted_16$f],_hoisted_18$f=["onContextmenu","onClick"],_hoisted_19$e={class:"d-flex flex-fill foreground align-items-center"},_hoisted_20$e=["src"],_hoisted_21$e={class:"d-flex align-items-center"},_hoisted_22$c=["content_id","content_type"],_hoisted_23$b={class:"theme-color text-break"},_hoisted_24$a={class:"d-flex justify-content-end mt-2"},_hoisted_25$9={class:"btn btn-dark",type:"button",disabled:""},_hoisted_26$4=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$l={__name:"Artists",setup(t){const e=useRouter(),n=ref([]),r=ref(0),s=ref(0),o=ref(!0);async function i(a){a.target.src="/images/artist.svg"}function d(a){return a?a.startsWith("http")?a:ft.server+"/"+a:"/images/artist.svg"}async function l(a){if(a.server){e.push("/artist/"+a.id+"@"+a.server);return}e.push("/artist/"+a.id)}async function u(a,c,f){let m={};for(let v of a){let[g,y]=v.split("@");m[y]||(m[y]=[]),m[y].push(parseInt(g))}for(let v in m){let g=await ft.get_federated_artists(v,m[v]);if(!g)return;g.artists.map(y=>y.server=v);for(let y=0;y<c.length;y++){let b=c[y],N=g.artists.filter(x=>`${x.id}@${x.server}`==b);N.length&&(n.value[y+f]=N[0])}}}async function _(){if(!o.value)return;o.value=!1;let a=await ft.API(`/profile/artists/${s.value}/${r.value}`);if(!!a){for(let c=0;c<a.order.length;c++)n.value.push({});u(a.federated,a.order,s.value);for(let c=0;c<a.order.length;c++){let f=a.order[c],m=a.artists.filter(v=>v.id==f);m.length&&(n.value[c+s.value]=m[0])}r.value=a.total,s.value+=a.order.length,o.value=!0}}return onMounted(()=>{_()}),(a,c)=>{const f=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$j,[createBaseVNode("li",_hoisted_2$j,[createVNode(f,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$i,[createVNode(f,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$h,[createVNode(f,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$h,[createVNode(f,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$h,[createVNode(f,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$h,[createVNode(f,{to:"/profile/artists",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$h,[createVNode(f,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$h,[createVNode(f,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$h,createBaseVNode("ul",_hoisted_11$f,[createBaseVNode("li",_hoisted_12$f,[createBaseVNode("div",_hoisted_13$f,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_14$f,toDisplayString(r.value)+" liked artists",1)])])]),n.value.length==0?(openBlock(),createElementBlock("li",_hoisted_15$f,_hoisted_17$f)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,m=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(v=>unref(right_click)({item:m,event:v}),["prevent"]),onClick:v=>l(m)},[createBaseVNode("div",_hoisted_19$e,[createBaseVNode("img",{src:d(m.cover),class:"track-cover theme-border rounded",onError:i},null,40,_hoisted_20$e),createBaseVNode("div",_hoisted_21$e,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:m.id,content_type:m.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_23$b,toDisplayString(m.title),1)],8,_hoisted_22$c)])])],40,_hoisted_18$f))),256))]),createBaseVNode("div",_hoisted_24$a,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:_},"Load more",512),[[vShow,o.value]]),withDirectives(createBaseVNode("button",_hoisted_25$9,[_hoisted_26$4,createTextVNode(" Loading... ")],512),[[vShow,!o.value]])])],64)}}},_imports_0$2="/images/empty.svg",_hoisted_1$i={class:"nav nav-pills"},_hoisted_2$i={class:"nav-item"},_hoisted_3$h={class:"nav-item"},_hoisted_4$g={class:"nav-item"},_hoisted_5$g={class:"nav-item"},_hoisted_6$g={class:"nav-item"},_hoisted_7$g={class:"nav-item"},_hoisted_8$g={class:"nav-item"},_hoisted_9$g={class:"nav-item"},_hoisted_10$g=createBaseVNode("hr",null,null,-1),_hoisted_11$e={class:"row g-3"},_hoisted_12$e={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_hoisted_13$e=createStaticVNode('<div class="card h-100 w-100 border-0"><div class="p-3"><div class="d-inline-flex position-relative"><img class="img-fluid bg-light rounded" src="'+_imports_0$2+'"></div><div class="d-flex flex-fill"><h6 class="theme-color fw-bold text-break text-wrap p-2 ps-0">No friends added yet</h6></div></div></div>',1),_hoisted_14$e=[_hoisted_13$e],_hoisted_15$e={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_hoisted_16$e=["onContextmenu"],_hoisted_17$e={class:"p-3"},_hoisted_18$e={class:"d-inline-flex position-relative"},_hoisted_19$d=["onClick"],_hoisted_20$d=["src"],_hoisted_21$d={class:"d-flex flex-fill"},_hoisted_22$b=["onClick"],_sfc_main$k={__name:"Friends",setup(t){const e=useRouter(),n=ref([]);ref(null);const r=ref(!0);async function s(u){u.target.src="/images/friend.svg"}function o(u){return u?u.startsWith("http")?u:ft.server+"/"+u:"/images/friend.svg"}async function i(u){e.push("/user/"+u)}async function d(u){if(u.includes("@")){let a=null;[u,a]=u.split("@");let c=await ft.fAPI(a,`/user/${u}/basic`);c.user.server=a,c.user.username=c.user.title+"@"+a,n.value.push(c.user);return}let _=await ft.API(`/user/${u}/basic`);_.user.username=_.user.title,n.value.push(_.user)}async function l(){if(!r.value)return;r.value=!1;let u=await ft.API("/friends");!u||!u.friends||(u.friends.map(_=>d(_)),r.value=!0)}return onMounted(()=>{l()}),(u,_)=>{const a=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$i,[createBaseVNode("li",_hoisted_2$i,[createVNode(a,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$h,[createVNode(a,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$g,[createVNode(a,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$g,[createVNode(a,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$g,[createVNode(a,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$g,[createVNode(a,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$g,[createVNode(a,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$g,[createVNode(a,{to:"/profile/friends",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$g,createBaseVNode("div",_hoisted_11$e,[withDirectives(createBaseVNode("div",_hoisted_12$e,_hoisted_14$e,512),[[vShow,!n.value.length]]),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,c=>(openBlock(),createElementBlock("div",_hoisted_15$e,[createBaseVNode("div",{class:"card h-100 w-100 border-0",onContextmenu:withModifiers(f=>unref(right_click)({item:c,event:f}),["prevent"])},[createBaseVNode("div",_hoisted_17$e,[createBaseVNode("div",_hoisted_18$e,[createBaseVNode("div",{class:"d-inline-flex clickable-shadow rounded",onClick:f=>i(c.username)},[createBaseVNode("img",{class:"playlist-img rounded",src:o(c.cover),onError:s},null,40,_hoisted_20$d)],8,_hoisted_19$d)]),createBaseVNode("div",_hoisted_21$d,[createBaseVNode("h6",{class:"fw-bold text-break text-wrap clickable theme-color purple-on-hover p-2 ps-0",onClick:f=>i(c.username)},toDisplayString(c.username),9,_hoisted_22$b)])])],40,_hoisted_16$e)]))),256))])],64)}}},_hoisted_1$h={class:"nav nav-pills"},_hoisted_2$h={class:"nav-item"},_hoisted_3$g={class:"nav-item"},_hoisted_4$f={class:"nav-item"},_hoisted_5$f={class:"nav-item"},_hoisted_6$f={class:"nav-item"},_hoisted_7$f={class:"nav-item"},_hoisted_8$f={class:"nav-item"},_hoisted_9$f={class:"nav-item"},_hoisted_10$f=createBaseVNode("hr",null,null,-1),_hoisted_11$d={class:"list-group"},_hoisted_12$d=createBaseVNode("li",{class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between"},[createBaseVNode("div",null,[createBaseVNode("span",{class:"fw-bold"},"Recently played")])])],-1),_hoisted_13$d={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_14$d=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No tracks found")])],-1),_hoisted_15$d=[_hoisted_14$d],_hoisted_16$d=["onContextmenu","onClick"],_hoisted_17$d={class:"d-flex flex-fill foreground align-items-center"},_hoisted_18$d=["src"],_hoisted_19$c={class:"d-flex align-items-center"},_hoisted_20$c=["content_id","content_type"],_hoisted_21$c={class:"theme-color text-break"},_hoisted_22$a={class:"d-flex justify-content-end mt-3"},_hoisted_23$a={class:"btn btn-dark",type:"button",disabled:""},_hoisted_24$9=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$j={__name:"History",setup(t){const e=ref([]),n=ref([]),r=ref(!0);function s(u){return u?u.startsWith("http")?u:ft.server+"/"+u:"/images/track.svg"}async function o(u){u.target.src="/images/track.svg"}async function i(u){if(u.server){action({func:async function(){ft.playTrack(u.uuid,u.server)},object:[u.uuid,u.server],operation:"playTrack"});return}action({func:async function(){ft.playTrack(u.id)},object:[u.id],operation:"playTrack"})}async function d(u){let _={};for(let a of u){let[c,f]=a.split("@");_[f]||(_[f]=[]),_[f].push(parseInt(c))}for(let a in _){let c=await ft.get_federated_tracks(a,_[a]);if(!c)return;c.tracks.map(f=>f.server=a);for(let f=0;f<e.value.length;f++){let m=e.value[f],v=c.tracks.filter(g=>`${g.id}@${g.server}`==m);v.length&&(n.value[f]=v[0])}}}async function l(){if(!r.value)return;r.value=!1;let u=await ft.API("/profile/history");if(!!u){n.value=[];for(let _=0;_<u.order.length;_++)n.value.push({});e.value=u.order,d(u.federated);for(let _=0;_<e.value.length;_++){let a=e.value[_],c=u.tracks.filter(f=>f.id==a);c.length&&(n.value[_]=c[0])}r.value=!0}}return onMounted(()=>{l()}),(u,_)=>{const a=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$h,[createBaseVNode("li",_hoisted_2$h,[createVNode(a,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$g,[createVNode(a,{to:"/profile/history",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$f,[createVNode(a,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$f,[createVNode(a,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$f,[createVNode(a,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$f,[createVNode(a,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$f,[createVNode(a,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$f,[createVNode(a,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$f,createBaseVNode("ul",_hoisted_11$d,[_hoisted_12$d,n.value.length==0?(openBlock(),createElementBlock("li",_hoisted_13$d,_hoisted_15$d)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,c=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(f=>unref(right_click)({item:c,event:f}),["prevent"]),onClick:f=>i(c)},[createBaseVNode("div",_hoisted_17$d,[createBaseVNode("img",{src:s(c.cover),class:"track-cover theme-border rounded",onError:o},null,40,_hoisted_18$d),createBaseVNode("div",_hoisted_19$c,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:c.id,content_type:c.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_21$c,toDisplayString(c.title),1)],8,_hoisted_20$c)])])],40,_hoisted_16$d))),256))]),createBaseVNode("div",_hoisted_22$a,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:l},"Refresh",512),[[vShow,r.value]]),withDirectives(createBaseVNode("button",_hoisted_23$a,[_hoisted_24$9,createTextVNode(" Loading... ")],512),[[vShow,!r.value]])])],64)}}},_imports_0$1="/images/add.svg",_imports_0="/images/cassette.svg",_hoisted_1$g={id:"playlistCreate",class:"modal",tabindex:"-1"},_hoisted_2$g={class:"modal-dialog modal-dialog-centered"},_hoisted_3$f={class:"modal-content theme-bg theme-border"},_hoisted_4$e={class:"modal-body pt-0"},_hoisted_5$e=createBaseVNode("div",{class:"d-flex justify-content-center pb-2"},[createBaseVNode("h3",{class:"theme-color fw-bold"},"Create playlist")],-1),_hoisted_6$e={class:"container"},_hoisted_7$e={class:"d-inline-flex position-relative"},_hoisted_8$e={class:"d-flex flex-column justify-content-between"},_hoisted_9$e={class:"form-floating mb-2"},_hoisted_10$e=createBaseVNode("label",{for:"floatingInput",class:"theme-label theme-color"},"Playlist name",-1),_sfc_main$i={__name:"PlaylistCreate",setup(t,{expose:e}){const n=useRouter(),r=ref(null),s=ref(null),o=ref(null),i=ref(null),d=ref(null);async function l(){if(!i.value.value){i.value.focus();return}let f=new FormData;f.append("title",i.value.value),s.value&&f.append("cover",s.value);let m=await ft.create_playlist(f);m.hasOwnProperty("playlist_id")&&(c(),n.push(`/playlist/${m.playlist_id}`))}async function u(){o.value.click()}async function _(){let f=o.value.files[0];!f||!f.type.startsWith("image/")||(s.value=f,d.value.src=URL.createObjectURL(s.value))}function a(){r.value.show()}function c(){r.value.hide()}return e({show:a,hide:c}),onMounted(()=>{r.value=new Modal(document.querySelector("#playlistCreate"))}),(f,m)=>(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$g,[createBaseVNode("div",_hoisted_3$f,[createBaseVNode("div",{class:"d-flex justify-content-end p-3 pb-2"},[createBaseVNode("button",{type:"button",class:"btn-close theme-filter",onClick:c,"aria-label":"Close"})]),createBaseVNode("div",_hoisted_4$e,[_hoisted_5$e,createBaseVNode("div",_hoisted_6$e,[createBaseVNode("div",_hoisted_7$e,[createBaseVNode("img",{ref_key:"playlist_cover",ref:d,src:_imports_0,class:"playlist-img shadow rounded"},null,512),createBaseVNode("input",{ref_key:"cover_upload",ref:o,type:"file",class:"visually-hidden",onChange:_},null,544),createBaseVNode("div",{class:"position-absolute bottom-0 right-0"},[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-pencil-square m-2",type:"button",onClick:u})])]),createBaseVNode("div",_hoisted_8$e,[createBaseVNode("div",_hoisted_9$e,[createBaseVNode("input",{ref_key:"playlist_name",ref:i,type:"text",class:"form-control search-card-input",id:"floatingInput"},null,512),_hoisted_10$e]),createBaseVNode("div",{class:"d-flex justify-content-end"},[createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold",onClick:l},"Create")])])])])])])]))}},_hoisted_1$f={class:"nav nav-pills"},_hoisted_2$f={class:"nav-item"},_hoisted_3$e={class:"nav-item"},_hoisted_4$d={class:"nav-item"},_hoisted_5$d={class:"nav-item"},_hoisted_6$d={class:"nav-item"},_hoisted_7$d={class:"nav-item"},_hoisted_8$d={class:"nav-item"},_hoisted_9$d={class:"nav-item"},_hoisted_10$d=createBaseVNode("hr",null,null,-1),_hoisted_11$c={class:"list-group"},_hoisted_12$c={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_13$c={class:"d-flex w-100 justify-content-between"},_hoisted_14$c={class:"fw-bold"},_hoisted_15$c=createStaticVNode('<div class="d-flex flex-fill foreground align-items-center"><img class="track-cover theme-border rounded" src="'+_imports_0$1+'"><div class="d-flex"><button class="btn btn-link search-link d-flex text-start" style="display:contents;"><span class="theme-color text-break">Create a playlist</span></button></div></div>',1),_hoisted_16$c=[_hoisted_15$c],_hoisted_17$c=["onContextmenu","onClick"],_hoisted_18$c={class:"d-flex flex-fill foreground align-items-center"},_hoisted_19$b=["src"],_hoisted_20$b={class:"d-flex align-items-center"},_hoisted_21$b=["content_id","content_type"],_hoisted_22$9={class:"theme-color text-break"},_hoisted_23$9={class:"d-flex justify-content-end mt-3"},_hoisted_24$8={class:"btn btn-dark",type:"button",disabled:""},_hoisted_25$8=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$h={__name:"Playlists",setup(t){const e=useRouter(),n=ref([]),r=ref(0),s=ref(0),o=ref(!0),i=ref(null);async function d(){i.value.show()}function l(f){return f?f.startsWith("http")?f:ft.server+"/"+f:"/images/track.svg"}async function u(f){if(f.server){e.push(`/playlist/${f.id}@${f.server}`);return}e.push("/playlist/"+f.id)}async function _(f){f.target.src="/images/track.svg"}async function a(f,m,v){let g={};for(let y of f){let[b,N]=y.split("@");g[N]||(g[N]=[]),g[N].push(parseInt(b))}for(let y in g){let b=await ft.get_federated_playlists(y,g[y]);if(!b)return;b.playlists.map(N=>N.server=y);for(let N=0;N<m.length;N++){let x=m[N],A=b.playlists.filter(L=>`${L.id}@${L.server}`==x);A.length&&(n.value[N+v]=A[0])}}}async function c(){if(!o.value)return;o.value=!1;let f=await ft.API(`/profile/playlists/${s.value}/${r.value}`);if(!!f){for(let m=0;m<f.order.length;m++)n.value.push({});a(f.federated,f.order,s.value);for(let m=0;m<f.order.length;m++){let v=f.order[m],g=f.playlists.filter(y=>y.id==v);g.length&&(n.value[m+s.value]=g[0])}r.value=f.total,s.value+=f.order.length,o.value=!0}}return onMounted(()=>{c()}),(f,m)=>{const v=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$f,[createBaseVNode("li",_hoisted_2$f,[createVNode(v,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$e,[createVNode(v,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$d,[createVNode(v,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$d,[createVNode(v,{to:"/profile/playlists",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$d,[createVNode(v,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$d,[createVNode(v,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$d,[createVNode(v,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$d,[createVNode(v,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$d,createBaseVNode("ul",_hoisted_11$c,[createBaseVNode("li",_hoisted_12$c,[createBaseVNode("div",_hoisted_13$c,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_14$c,toDisplayString(r.value)+" liked playlists",1)])])]),createBaseVNode("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onClick:d},_hoisted_16$c),(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,g=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(y=>unref(right_click)({item:g,event:y}),["prevent"]),onClick:y=>u(g)},[createBaseVNode("div",_hoisted_18$c,[createBaseVNode("img",{src:l(g.cover),class:"track-cover theme-border rounded",onError:_},null,40,_hoisted_19$b),createBaseVNode("div",_hoisted_20$b,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:g.id,content_type:g.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_22$9,toDisplayString(g.title),1)],8,_hoisted_21$b)])])],40,_hoisted_17$c))),256))]),createBaseVNode("div",_hoisted_23$9,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:c},"Load more",512),[[vShow,o.value]]),withDirectives(createBaseVNode("button",_hoisted_24$8,[_hoisted_25$8,createTextVNode(" Loading... ")],512),[[vShow,!o.value]])]),createVNode(_sfc_main$i,{ref_key:"playlistCreate",ref:i},null,512)],64)}}},_hoisted_1$e=createBaseVNode("div",{class:"modal-header"},[createBaseVNode("h5",{class:"modal-title"},"Log out"),createBaseVNode("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_hoisted_2$e=createBaseVNode("p",null,"Are you sure you really want to log out? ",-1),_sfc_main$g={__name:"Reset",setup(t,{expose:e}){let n=null;const r=ref(null);async function s(){["init","offline","session","server","username","token","volume","groupSession","groupSessionID"].map(d=>{localStorage.removeItem(d)}),sessionStorage.clear(),window.location.replace("/")}async function o(){n.show()}async function i(){n.hide()}return e({show:o,hide:i}),onMounted(()=>{n=new Modal(r.value)}),(d,l)=>(openBlock(),createElementBlock("div",{ref_key:"modalEl",ref:r,class:"modal",tabindex:"-1"},[createBaseVNode("div",{class:"modal-dialog modal-dialog-centered"},[createBaseVNode("div",{class:"modal-content"},[_hoisted_1$e,createBaseVNode("div",{class:"modal-body"},[_hoisted_2$e,createBaseVNode("div",{class:"d-flex justify-content-end"},[createBaseVNode("button",{type:"button",class:"btn btn-success fw-bold",onClick:s},"Confirm")])])])])],512))}},_hoisted_1$d={class:"nav nav-pills"},_hoisted_2$d={class:"nav-item"},_hoisted_3$d={class:"nav-item"},_hoisted_4$c={class:"nav-item"},_hoisted_5$c={class:"nav-item"},_hoisted_6$c={class:"nav-item"},_hoisted_7$c={class:"nav-item"},_hoisted_8$c={class:"nav-item"},_hoisted_9$c={class:"nav-item"},_hoisted_10$c=createBaseVNode("hr",null,null,-1),_hoisted_11$b={class:"card border-0"},_hoisted_12$b={class:"card-body"},_hoisted_13$b=createBaseVNode("h3",{class:"theme-color"},"Last.fm",-1),_hoisted_14$b={class:"d-inline-flex flex-column"},_hoisted_15$b={key:0,class:"d-inline-flex border rounded mb-2 p-2"},_hoisted_16$b={class:"d-flex"},_hoisted_17$b=["src"],_hoisted_18$b={class:"d-flex flex-column mx-2"},_hoisted_19$a={class:"fw-bold"},_hoisted_20$a={class:"d-flex flex-wrap align-items-center"},_hoisted_21$a=createBaseVNode("span",{class:"text-muted fw-bold"},"Scrobbles:",-1),_hoisted_22$8={class:"badge bg-dark mx-2"},_hoisted_23$8={class:"input-group flex-nowrap mb-2"},_hoisted_24$7=createBaseVNode("span",{class:"input-group-text foreground theme-color theme-border",id:"basic-addon1"},"Scrobbling",-1),_hoisted_25$7={key:0,class:"d-flex flex-column mt-4"},_hoisted_26$3=createBaseVNode("h5",null,"Top Tracks This Week",-1),_hoisted_27$2={class:"list-group list-group-flush flex-fill"},_hoisted_28$2=["onClick"],_hoisted_29$2={class:"d-flex"},_hoisted_30$2=["src"],_hoisted_31$1={class:"d-flex flex-fill justify-content-between"},_hoisted_32$1={class:"d-flex flex-column mx-2"},_hoisted_33={class:"fw-bold"},_hoisted_34={class:"d-flex align-items-center"},_hoisted_35={class:"badge bg-dark"},_hoisted_36=createBaseVNode("hr",null,null,-1),_hoisted_37={class:"card border-0"},_hoisted_38={class:"card-body"},_hoisted_39={class:"d-inline-flex"},_hoisted_40={class:"d-flex flex-column"},_hoisted_41=createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold flex-nowrap text-start m-1"},[createBaseVNode("span",{class:"bi bi-globe me-2"}),createBaseVNode("span",null,"Servers")],-1),_hoisted_42=createBaseVNode("span",null,"Theme",-1),_hoisted_43=createBaseVNode("span",{class:"bi bi-box-arrow-right me-2"},null,-1),_hoisted_44=createBaseVNode("span",null,"Log out",-1),_hoisted_45=[_hoisted_43,_hoisted_44],_hoisted_46=createBaseVNode("hr",null,null,-1),_hoisted_47=createBaseVNode("div",null,[createBaseVNode("a",{class:"purple-on-hover fw-bold theme-color",href:"https://github.com/kaangiray26/forte/tree/gh-pages",target:"_blank"},[createBaseVNode("span",null,"Forte May 16 Version.")])],-1),_sfc_main$f={__name:"Settings",setup(t){const e=ref(null),n=ref({}),r=ref(null),s=ref(null),o=ref([]);async function i(){store.theme=store.theme=="dark"?"light":"dark",localStorage.setItem("theme",JSON.stringify(store.theme)),document.body.className=store.theme+"-theme"}async function d(v){v.preventDefault(),e.value.show()}async function l(v){window.open(v.url,"_blank")}async function u(){if(!n.value.lastfm_key){window.location.href=`https://www.last.fm/api/auth/?api_key=${r.value}`;return}n.value.scrobbling=!n.value.scrobbling,localStorage.setItem("scrobbling",JSON.stringify(n.value.scrobbling)),store.scrobbling=n.value.scrobbling}async function _(){let v=JSON.parse(localStorage.getItem("lastfm_username"));if(!v)return;let g=await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=${v}&api_key=${r.value}&format=json`).then(y=>y.json());s.value=g.user}async function a(){let v=JSON.parse(localStorage.getItem("lastfm_username"));if(!v)return;let g=await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.gettoptracks&limit=24&period=7day&user=${v}&api_key=${r.value}&format=json`).then(y=>y.json());o.value=g.toptracks.track}async function c(){localStorage.removeItem("lastfm_key"),localStorage.removeItem("lastfm_username"),localStorage.removeItem("scrobbling"),n.value={},s.value=null}function f(v){return v.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}async function m(){["lastfm_key","scrobbling"].forEach(g=>{let y=JSON.parse(localStorage.getItem(g));y?n.value[g]=y:n.value[g]=null});let v=await ft.API("/lastfm/auth");v.hasOwnProperty("error")||(r.value=v.api_key,_(),a())}return onBeforeMount(()=>{m()}),(v,g)=>{const y=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$d,[createBaseVNode("li",_hoisted_2$d,[createVNode(y,{to:"/profile",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$d,[createVNode(y,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$c,[createVNode(y,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$c,[createVNode(y,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$c,[createVNode(y,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$c,[createVNode(y,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$c,[createVNode(y,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$c,[createVNode(y,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$c,createBaseVNode("div",_hoisted_11$b,[createBaseVNode("div",_hoisted_12$b,[_hoisted_13$b,createBaseVNode("div",_hoisted_14$b,[s.value?(openBlock(),createElementBlock("div",_hoisted_15$b,[createBaseVNode("div",_hoisted_16$b,[createBaseVNode("img",{src:s.value.image[3]["#text"],class:"img-lastfm",width:"50",height:"50"},null,8,_hoisted_17$b)]),createBaseVNode("div",_hoisted_18$b,[createBaseVNode("span",_hoisted_19$a,toDisplayString(s.value.name),1),createBaseVNode("div",_hoisted_20$a,[_hoisted_21$a,createBaseVNode("span",_hoisted_22$8,toDisplayString(f(s.value.playcount)),1)])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_23$8,[_hoisted_24$7,withDirectives(createBaseVNode("button",{type:"button",class:"btn btn-danger flex-fill rounded-end",onClick:u},"Off",512),[[vShow,!n.value.scrobbling]]),withDirectives(createBaseVNode("button",{type:"button",class:"btn btn-success flex-fill rounded-end",onClick:u},"On",512),[[vShow,n.value.scrobbling]])]),s.value?(openBlock(),createElementBlock("button",{key:1,class:"btn btn-dark mb-2",onClick:c},"Remove account")):createCommentVNode("",!0)]),s.value?(openBlock(),createElementBlock("div",_hoisted_25$7,[_hoisted_26$3,createBaseVNode("ul",_hoisted_27$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,b=>(openBlock(),createElementBlock("li",{class:"list-group-item list-group-item-action clickable",onClick:N=>l(b)},[createBaseVNode("div",_hoisted_29$2,[createBaseVNode("img",{src:b.image[3]["#text"],class:"img-lastfm",width:"50",height:"50"},null,8,_hoisted_30$2),createBaseVNode("div",_hoisted_31$1,[createBaseVNode("div",_hoisted_32$1,[createBaseVNode("span",_hoisted_33,toDisplayString(b.artist.name),1),createBaseVNode("span",null,toDisplayString(b.name),1)]),createBaseVNode("div",_hoisted_34,[createBaseVNode("span",_hoisted_35,toDisplayString(b.playcount),1)])])])],8,_hoisted_28$2))),256))])])):createCommentVNode("",!0)])]),_hoisted_36,createBaseVNode("div",_hoisted_37,[createBaseVNode("div",_hoisted_38,[createBaseVNode("div",_hoisted_39,[createBaseVNode("div",_hoisted_40,[createVNode(y,{to:"/servers"},{default:withCtx(()=>[_hoisted_41]),_:1}),createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold flex-nowrap text-start m-1",onClick:i},[createBaseVNode("span",{class:normalizeClass(["bi me-2",{"bi-sun-fill":unref(store).theme=="light","bi-moon-fill":unref(store).theme=="dark"}])},null,2),_hoisted_42]),createBaseVNode("button",{class:"btn theme-btn black-on-hover text-white fw-bold flex-nowrap text-start m-1",onClick:d},_hoisted_45)])])])]),_hoisted_46,_hoisted_47,createVNode(_sfc_main$g,{ref_key:"resetModal",ref:e},null,512)],64)}}},_hoisted_1$c={class:"nav nav-pills"},_hoisted_2$c={class:"nav-item"},_hoisted_3$c={class:"nav-item"},_hoisted_4$b={class:"nav-item"},_hoisted_5$b={class:"nav-item"},_hoisted_6$b={class:"nav-item"},_hoisted_7$b={class:"nav-item"},_hoisted_8$b={class:"nav-item"},_hoisted_9$b={class:"nav-item"},_hoisted_10$b=createBaseVNode("hr",null,null,-1),_hoisted_11$a={key:0,class:"col-12 mb-2"},_hoisted_12$a=["src"],_hoisted_13$a={class:"d-flex flex-column"},_hoisted_14$a={class:"input-group flex-nowrap mb-2"},_hoisted_15$a=createBaseVNode("span",{class:"input-group-text bi bi-broadcast",id:"addon-wrapping"},null,-1),_hoisted_16$a=["onKeypress"],_hoisted_17$a={key:0,class:"alert alert-primary appear",role:"alert"},_hoisted_18$a={class:"row g-3 mx-0"},_hoisted_19$9={class:"list-group p-0"},_hoisted_20$9=["onClick"],_hoisted_21$9={class:"d-flex w-100 foreground justify-content-between"},_hoisted_22$7={class:"d-flex"},_hoisted_23$7=["onMouseenter","onMouseleave"],_hoisted_24$6=["src"],_hoisted_25$6={key:0,class:"position-absolute bottom-0 right-0"},_hoisted_26$2=["onClick"],_hoisted_27$1={class:"d-flex align-items-center"},_hoisted_28$1={class:"btn btn-link search-link d-flex flex-column text-start py-0",style:{display:"contents"}},_hoisted_29$1={class:"theme-color text-break"},_hoisted_30$1={class:"text-muted"},_sfc_main$e={__name:"Stations",setup(t){const e=useRouter(),n=ref([]),r=ref(null),s=ref(!0),o=ref(null);function i(){let a="?background=light";return document.body.classList.contains("dark-theme")&&(a="?background=dark"),console.log("https://gemini.tunein.com/embed/player/"+o.value+a),"https://gemini.tunein.com/embed/player/"+o.value+a}async function d(a){a.target.src="/images/station.svg"}async function l(a,c){c||e.push("/station/"+a)}async function u(a){ft.playStation(a)}async function _(){if(!s.value)return;s.value=!1;let a=r.value.value;if(!a.length)return;let c=await ft.API("/station/search/"+a);!c||c.error||(c.stations.forEach(f=>{f.hover=!1}),n.value=c.stations,s.value=!0)}return onMounted(()=>{r.value.focus()}),(a,c)=>{const f=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$c,[createBaseVNode("li",_hoisted_2$c,[createVNode(f,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$c,[createVNode(f,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$b,[createVNode(f,{to:"/profile/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$b,[createVNode(f,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$b,[createVNode(f,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$b,[createVNode(f,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$b,[createVNode(f,{to:"/profile/stations",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$b,[createVNode(f,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$b,o.value?(openBlock(),createElementBlock("div",_hoisted_11$a,[createBaseVNode("iframe",{class:"radio-player w-100 rounded",src:i()},null,8,_hoisted_12$a)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("div",_hoisted_14$a,[_hoisted_15$a,createBaseVNode("input",{ref_key:"station_name",ref:r,type:"text",class:"form-control",placeholder:"Station name","aria-label":"Station name","aria-describedby":"addon-wrapping",onKeypress:withKeys(_,["enter"])},null,40,_hoisted_16$a)]),s.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_17$a," Searching... "))]),createBaseVNode("div",_hoisted_18$a,[createBaseVNode("ul",_hoisted_19$9,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,m=>(openBlock(),createElementBlock("div",null,[createBaseVNode("li",{class:"list-group-item theme-list-item clickable rounded d-flex p-1",onClick:v=>l(m.guide_id,m.hover)},[createBaseVNode("div",_hoisted_21$9,[createBaseVNode("div",_hoisted_22$7,[createBaseVNode("div",{onMouseenter:v=>m.hover=!0,onMouseleave:v=>m.hover=!1,class:"d-inline-flex align-items-center position-relative"},[createBaseVNode("img",{src:m.image,class:"track-cover theme-border rounded",onError:d},null,40,_hoisted_24$6),m.hover?(openBlock(),createElementBlock("div",_hoisted_25$6,[createBaseVNode("button",{class:"btn btn-light action-btn bi bi-play-fill m-2",type:"button",onClick:v=>u(m)},null,8,_hoisted_26$2)])):createCommentVNode("",!0)],40,_hoisted_23$7),createBaseVNode("div",_hoisted_27$1,[createBaseVNode("button",_hoisted_28$1,[createBaseVNode("span",_hoisted_29$1,toDisplayString(m.text),1),createBaseVNode("span",_hoisted_30$1,toDisplayString(m.subtext),1)])])])])],8,_hoisted_20$9)]))),256))])])],64)}}},_hoisted_1$b={class:"nav nav-pills"},_hoisted_2$b={class:"nav-item"},_hoisted_3$b={class:"nav-item"},_hoisted_4$a={class:"nav-item"},_hoisted_5$a={class:"nav-item"},_hoisted_6$a={class:"nav-item"},_hoisted_7$a={class:"nav-item"},_hoisted_8$a={class:"nav-item"},_hoisted_9$a={class:"nav-item"},_hoisted_10$a=createBaseVNode("hr",null,null,-1),_hoisted_11$9={class:"list-group"},_hoisted_12$9={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_13$9={class:"d-flex w-100 justify-content-between"},_hoisted_14$9={class:"fw-bold"},_hoisted_15$9={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_16$9=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No tracks found")])],-1),_hoisted_17$9=[_hoisted_16$9],_hoisted_18$9=["onContextmenu","onClick"],_hoisted_19$8={class:"d-flex flex-fill foreground align-items-center"},_hoisted_20$8=["src"],_hoisted_21$8={class:"d-flex align-items-center"},_hoisted_22$6=["content_id","content_type"],_hoisted_23$6={class:"theme-color text-break"},_hoisted_24$5={class:"d-flex justify-content-end mt-3"},_hoisted_25$5={class:"btn btn-dark",type:"button",disabled:""},_hoisted_26$1=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$d={__name:"Tracks",setup(t){const e=ref([]),n=ref(0),r=ref(0),s=ref(!0);function o(_){return _?_.startsWith("http")?_:ft.server+"/"+_:"/images/track.svg"}async function i(_){_.target.src="/images/track.svg"}async function d(_){if(_.server){action({func:async function(){ft.playTrack(_.id,_.server)},object:[_.id,_.server],operation:"playTrack"});return}action({func:async function(){ft.playTrack(_.id)},object:[_.id],operation:"playTrack"})}async function l(_,a,c){let f={};for(let m of _){let[v,g]=m.split("@");f[g]||(f[g]=[]),f[g].push(parseInt(v))}for(let m in f){let v=await ft.get_federated_tracks(m,f[m]);if(!v)return;v.tracks.map(g=>g.server=m);for(let g=0;g<a.length;g++){let y=a[g],b=v.tracks.filter(N=>`${N.id}@${N.server}`==y);b.length&&(e.value[g+c]=b[0])}}}async function u(){if(!s.value)return;s.value=!1;let _=await ft.API(`/profile/tracks/${r.value}/${n.value}`);if(!!_){for(let a=0;a<_.order.length;a++)e.value.push({});l(_.federated,_.order,r.value);for(let a=0;a<_.order.length;a++){let c=_.order[a],f=_.tracks.filter(m=>m.id==c);f.length&&(e.value[a+r.value]=f[0])}n.value=_.total,r.value+=_.order.length,s.value=!0}}return onMounted(()=>{u()}),(_,a)=>{const c=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$b,[createBaseVNode("li",_hoisted_2$b,[createVNode(c,{to:"/profile",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1})]),createBaseVNode("li",_hoisted_3$b,[createVNode(c,{to:"/profile/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1})]),createBaseVNode("li",_hoisted_4$a,[createVNode(c,{to:"/profile/tracks",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1})]),createBaseVNode("li",_hoisted_5$a,[createVNode(c,{to:"/profile/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1})]),createBaseVNode("li",_hoisted_6$a,[createVNode(c,{to:"/profile/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1})]),createBaseVNode("li",_hoisted_7$a,[createVNode(c,{to:"/profile/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1})]),createBaseVNode("li",_hoisted_8$a,[createVNode(c,{to:"/profile/stations",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Stations")]),_:1})]),createBaseVNode("li",_hoisted_9$a,[createVNode(c,{to:"/profile/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1})])]),_hoisted_10$a,createBaseVNode("ul",_hoisted_11$9,[createBaseVNode("li",_hoisted_12$9,[createBaseVNode("div",_hoisted_13$9,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_14$9,toDisplayString(n.value)+" liked tracks",1)])])]),e.value.length==0?(openBlock(),createElementBlock("li",_hoisted_15$9,_hoisted_17$9)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(e.value,f=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(m=>unref(right_click)({item:f,event:m}),["prevent"]),onClick:m=>d(f)},[createBaseVNode("div",_hoisted_19$8,[createBaseVNode("img",{src:o(f.cover),class:"track-cover theme-border rounded",onError:i},null,40,_hoisted_20$8),createBaseVNode("div",_hoisted_21$8,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:f.id,content_type:f.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_23$6,toDisplayString(f.title),1)],8,_hoisted_22$6)])])],40,_hoisted_18$9))),256))]),createBaseVNode("div",_hoisted_24$5,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:u},"Load more",512),[[vShow,s.value]]),withDirectives(createBaseVNode("button",_hoisted_25$5,[_hoisted_26$1,createTextVNode(" Loading... ")],512),[[vShow,!s.value]])])],64)}}},_hoisted_1$a={class:"card rounded-0 border-0 m-3"},_hoisted_2$a={class:"card-body rounded px-3"},_hoisted_3$a={class:"row g-3"},_hoisted_4$9={class:"col-md-3"},_hoisted_5$9={class:"d-flex position-relative"},_hoisted_6$9={class:"ph rounded"},_hoisted_7$9=["src"],_hoisted_8$9=createBaseVNode("div",{class:"position-absolute bottom-0 right-0"},null,-1),_hoisted_9$9={class:"col"},_hoisted_10$9={class:"theme-color album-title mb-4"},_hoisted_11$8={class:"pt-2"},_hoisted_12$8=createBaseVNode("span",{class:"bi bi-emoji-smile-fill me-2"},null,-1),_hoisted_13$8=createBaseVNode("span",null,"Friends",-1),_hoisted_14$8=[_hoisted_12$8,_hoisted_13$8],_hoisted_15$8=createBaseVNode("span",{class:"bi bi-emoji-frown-fill me-2"},null,-1),_hoisted_16$8=createBaseVNode("span",null,"Add Friend",-1),_hoisted_17$8=[_hoisted_15$8,_hoisted_16$8],_hoisted_18$8=createBaseVNode("hr",null,null,-1),_sfc_main$c={__name:"User",setup(t){const e=useRouter(),n=ref(null),r=ref(!1),s=ref({}),o=ref(!1),i=ref(!1),d=computed(()=>e.currentRoute.value.params.id);async function l(g){g.target.src="/images/friend.svg"}function u(){return s.value.cover?ft.server+"/"+s.value.cover:"/images/friend.svg"}async function _(g){let y=await ft.API("/user/"+g);!y||y.error||(r.value=y.user.username==ft.username,s.value=y.user,await c(),o.value=!0)}async function a(g){let y=await ft.fAPI(n.value,"/user/"+g);!y||y.error||(r.value=y.user.username==ft.username&&y.server==ft.server,s.value=y.user,await c(),o.value=!0)}async function c(){if(r.value)return;let g=await ft.API("/friends/"+e.currentRoute.value.params.id);!g||(i.value=g.friend)}async function f(g){g.target.parentElement.setAttribute("disabled",!0),await ft.add_friend(e.currentRoute.value.params.id,n.value),await c(),g.target.parentElement.disabled=!1}async function m(g){g.target.parentElement.setAttribute("disabled",!0),await ft.remove_friend(e.currentRoute.value.params.id,n.value),await c(),g.target.parentElement.disabled=!1}async function v(){let g=e.currentRoute.value.params.id;if(g.includes("@")){[g,n.value]=g.split("@"),a(g);return}_(g)}return watch(d,()=>{!e.currentRoute.value.params.id||v()}),onBeforeMount(()=>{v()}),(g,y)=>{const b=resolveComponent("router-view");return withDirectives((openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$a,[createBaseVNode("div",_hoisted_4$9,[createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$9,[createBaseVNode("img",{class:"playlist-img rounded",src:u(),onError:l},null,40,_hoisted_7$9)]),_hoisted_8$9])]),createBaseVNode("div",_hoisted_9$9,[createBaseVNode("h1",_hoisted_10$9,toDisplayString(s.value.username),1),withDirectives(createBaseVNode("div",_hoisted_11$8,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:m},_hoisted_14$8,512),[[vShow,i.value]]),withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:f},_hoisted_17$8,512),[[vShow,!i.value]])],512),[[vShow,!r.value]]),_hoisted_18$8,createVNode(b)])])])],512)),[[vShow,o.value]])}}},_hoisted_1$9={class:"nav nav-pills"},_hoisted_2$9={class:"nav-item"},_hoisted_3$9={class:"nav-item"},_hoisted_4$8={class:"nav-item"},_hoisted_5$8={class:"nav-item"},_hoisted_6$8={class:"nav-item"},_hoisted_7$8={class:"nav-item"},_hoisted_8$8={class:"nav-item"},_hoisted_9$8=createBaseVNode("hr",null,null,-1),_hoisted_10$8={class:"list-group"},_hoisted_11$7={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_12$7={class:"d-flex w-100 justify-content-between"},_hoisted_13$7={class:"fw-bold"},_hoisted_14$7={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_15$7=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No albums found")])],-1),_hoisted_16$7=[_hoisted_15$7],_hoisted_17$7=["onContextmenu","onClick"],_hoisted_18$7={class:"d-flex flex-fill foreground align-items-center"},_hoisted_19$7=["src"],_hoisted_20$7={class:"d-flex align-items-center"},_hoisted_21$7=["content_id","content_type"],_hoisted_22$5={class:"theme-color text-break"},_hoisted_23$5={class:"d-flex justify-content-end mt-2"},_hoisted_24$4={class:"btn btn-dark",type:"button",disabled:""},_hoisted_25$4=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$b={__name:"Albums",setup(t){const e=useRouter(),n=ref(null),r=ref(e.currentRoute.value.params.id),s=ref([]),o=ref(0),i=ref(0),d=ref(!0);function l(v){return v?v.startsWith("http")?v:ft.server+"/"+v:"/images/album.svg"}async function u(v){v.target.src="/images/album.svg"}async function _(v){if(v.server){e.push("/album/"+v.id+"@"+v.server);return}e.push("/album/"+v.id)}async function a(v){if(!d.value)return;d.value=!1;let g=await ft.fAPI(n.value,`/user/${v}/albums/${i.value}/${o.value}`);if(!!g){for(let y=0;y<g.order.length;y++)s.value.push({});f(g.federated,g.order,i.value);for(let y=0;y<g.order.length;y++){let b=g.order[y],N=g.albums.filter(x=>x.id==b);N.length&&(s.value[y+i.value]=N[0])}o.value=g.total,i.value+=g.order.length,d.value=!0}}async function c(v){if(!d.value)return;d.value=!1;let g=await ft.API(`/user/${v}/albums/${i.value}/${o.value}`);if(!!g){for(let y=0;y<g.order.length;y++)s.value.push({});f(g.federated,g.order,i.value);for(let y=0;y<g.order.length;y++){let b=g.order[y],N=g.albums.filter(x=>x.id==b);N.length&&(s.value[y+i.value]=N[0])}o.value=g.total,i.value+=g.order.length,d.value=!0}}async function f(v,g,y){let b={};for(let N of v){let[x,A]=N.split("@");b[A]||(b[A]=[]),b[A].push(parseInt(x))}for(let N in b){let x=await ft.get_federated_albums(N,b[N]);if(!x)return;x.albums.map(A=>A.server=N);for(let A=0;A<g.length;A++){let L=g[A],V=x.albums.filter(P=>`${P.id}@${P.server}`==L);V.length&&(s.value[A+y]=V[0])}}}async function m(){let v=e.currentRoute.value.params.id;if(v.includes("@")){[v,n.value]=v.split("@"),a(v);return}c(v)}return onMounted(()=>{m()}),(v,g)=>{const y=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$9,[createBaseVNode("li",_hoisted_2$9,[createVNode(y,{to:"/user/"+r.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$9,[createVNode(y,{to:"/user/"+r.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$8,[createVNode(y,{to:"/user/"+r.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$8,[createVNode(y,{to:"/user/"+r.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$8,[createVNode(y,{to:"/user/"+r.value+"/albums",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$8,[createVNode(y,{to:"/user/"+r.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$8,[createVNode(y,{to:"/user/"+r.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$8,createBaseVNode("ul",_hoisted_10$8,[createBaseVNode("li",_hoisted_11$7,[createBaseVNode("div",_hoisted_12$7,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_13$7,toDisplayString(o.value)+" liked albums",1)])])]),s.value.length==0?(openBlock(),createElementBlock("li",_hoisted_14$7,_hoisted_16$7)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,b=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(N=>unref(right_click)({item:b,event:N}),["prevent"]),onClick:N=>_(b)},[createBaseVNode("div",_hoisted_18$7,[createBaseVNode("img",{src:l(b.cover),class:"track-cover theme-border rounded",onError:u},null,40,_hoisted_19$7),createBaseVNode("div",_hoisted_20$7,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:b.id,content_type:b.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_22$5,toDisplayString(b.title),1)],8,_hoisted_21$7)])])],40,_hoisted_17$7))),256))]),createBaseVNode("div",_hoisted_23$5,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:m},"Load more",512),[[vShow,d.value]]),withDirectives(createBaseVNode("button",_hoisted_24$4,[_hoisted_25$4,createTextVNode(" Loading... ")],512),[[vShow,!d.value]])])],64)}}},_hoisted_1$8={class:"nav nav-pills"},_hoisted_2$8={class:"nav-item"},_hoisted_3$8={class:"nav-item"},_hoisted_4$7={class:"nav-item"},_hoisted_5$7={class:"nav-item"},_hoisted_6$7={class:"nav-item"},_hoisted_7$7={class:"nav-item"},_hoisted_8$7={class:"nav-item"},_hoisted_9$7=createBaseVNode("hr",null,null,-1),_hoisted_10$7={class:"list-group"},_hoisted_11$6={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_12$6={class:"d-flex w-100 justify-content-between"},_hoisted_13$6={class:"fw-bold"},_hoisted_14$6={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_15$6=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No artists found")])],-1),_hoisted_16$6=[_hoisted_15$6],_hoisted_17$6=["onContextmenu","onClick"],_hoisted_18$6={class:"d-flex flex-fill foreground align-items-center"},_hoisted_19$6=["src"],_hoisted_20$6={class:"d-flex align-items-center"},_hoisted_21$6=["content_id","content_type"],_hoisted_22$4={class:"theme-color text-break"},_hoisted_23$4={class:"d-flex justify-content-end mt-2"},_hoisted_24$3={class:"btn btn-dark",type:"button",disabled:""},_hoisted_25$3=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$a={__name:"Artists",setup(t){const e=useRouter(),n=ref(null),r=ref(e.currentRoute.value.params.id),s=ref([]),o=ref(0),i=ref(0),d=ref(!0);function l(m){return m?m.startsWith("http")?m:ft.server+"/"+m:"/images/artist.svg"}async function u(m){if(m.server){e.push("/artist/"+m.id+"@"+m.server);return}e.push("/artist/"+m.id)}async function _(m){if(!d.value)return;d.value=!1;let v=await ft.fAPI(n.value,`/user/${m}/artists/${i.value}/${o.value}`);if(!!v){for(let g=0;g<v.order.length;g++)s.value.push({});c(v.federated,v.order,i.value);for(let g=0;g<v.order.length;g++){let y=v.order[g],b=v.artists.filter(N=>N.id==y);b.length&&(s.value[g+i.value]=b[0])}o.value=v.total,i.value+=v.order.length,d.value=!0}}async function a(m){if(!d.value)return;d.value=!1;let v=await ft.API(`/user/${m}/artists/${i.value}/${o.value}`);if(!!v){for(let g=0;g<v.order.length;g++)s.value.push({});c(v.federated,v.order,i.value);for(let g=0;g<v.order.length;g++){let y=v.order[g],b=v.artists.filter(N=>N.id==y);b.length&&(s.value[g+i.value]=b[0])}o.value=v.total,i.value+=v.order.length,d.value=!0}}async function c(m,v,g){let y={};for(let b of m){let[N,x]=b.split("@");y[x]||(y[x]=[]),y[x].push(parseInt(N))}for(let b in y){let N=await ft.get_federated_artists(b,y[b]);if(!N)return;N.artists.map(x=>x.server=b);for(let x=0;x<v.length;x++){let A=v[x],L=N.artists.filter(V=>`${V.id}@${V.server}`==A);L.length&&(s.value[x+g]=L[0])}}}async function f(){let m=e.currentRoute.value.params.id;if(m.includes("@")){[m,n.value]=m.split("@"),_(m);return}a(m)}return onMounted(()=>{f()}),(m,v)=>{const g=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$8,[createBaseVNode("li",_hoisted_2$8,[createVNode(g,{to:"/user/"+r.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$8,[createVNode(g,{to:"/user/"+r.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$7,[createVNode(g,{to:"/user/"+r.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$7,[createVNode(g,{to:"/user/"+r.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$7,[createVNode(g,{to:"/user/"+r.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$7,[createVNode(g,{to:"/user/"+r.value+"/artists",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$7,[createVNode(g,{to:"/user/"+r.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$7,createBaseVNode("ul",_hoisted_10$7,[createBaseVNode("li",_hoisted_11$6,[createBaseVNode("div",_hoisted_12$6,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_13$6,toDisplayString(o.value)+" liked artists",1)])])]),s.value.length==0?(openBlock(),createElementBlock("li",_hoisted_14$6,_hoisted_16$6)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,y=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(b=>unref(right_click)({item:y,event:b}),["prevent"]),onClick:b=>u(y)},[createBaseVNode("div",_hoisted_18$6,[createBaseVNode("img",{src:l(y.cover),class:"track-cover theme-border rounded",onError:v[0]||(v[0]=(...b)=>m.placeholder&&m.placeholder(...b))},null,40,_hoisted_19$6),createBaseVNode("div",_hoisted_20$6,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:y.id,content_type:y.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_22$4,toDisplayString(y.title),1)],8,_hoisted_21$6)])])],40,_hoisted_17$6))),256))]),createBaseVNode("div",_hoisted_23$4,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:f},"Load more",512),[[vShow,d.value]]),withDirectives(createBaseVNode("button",_hoisted_24$3,[_hoisted_25$3,createTextVNode(" Loading... ")],512),[[vShow,!d.value]])])],64)}}},_hoisted_1$7={class:"nav nav-pills"},_hoisted_2$7={class:"nav-item"},_hoisted_3$7={class:"nav-item"},_hoisted_4$6={class:"nav-item"},_hoisted_5$6={class:"nav-item"},_hoisted_6$6={class:"nav-item"},_hoisted_7$6={class:"nav-item"},_hoisted_8$6={class:"nav-item"},_hoisted_9$6=createBaseVNode("hr",null,null,-1),_hoisted_10$6={class:"row g-3"},_hoisted_11$5={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_hoisted_12$5=createStaticVNode('<div class="card h-100 w-100 border-0"><div class="p-3"><div class="d-inline-flex position-relative"><img class="img-fluid bg-light rounded" src="'+_imports_0$2+'"></div><div class="d-flex flex-fill"><h6 class="theme-color fw-bold text-break text-wrap p-2 ps-0">No friends added yet</h6></div></div></div>',1),_hoisted_13$5=[_hoisted_12$5],_hoisted_14$5={class:"col-12 col-sm-6 col-lg-4 col-xl-3 col-xxl-2"},_hoisted_15$5=["onContextmenu"],_hoisted_16$5={class:"p-3"},_hoisted_17$5=["onClick"],_hoisted_18$5={class:"d-inline-flex clickable-shadow rounded"},_hoisted_19$5=["src"],_hoisted_20$5={class:"d-flex flex-fill"},_hoisted_21$5=["onClick"],_sfc_main$9={__name:"Friends",setup(t){const e=useRouter(),n=ref(null),r=ref(e.currentRoute.value.params.id),s=ref([]),o=ref(!0);async function i(f){f.target.src="/images/friend.svg"}function d(f){return f?f.startsWith("http")?f:ft.server+"/"+f:"/images/friend.svg"}async function l(f){e.push("/user/"+f)}async function u(f){if(console.log(f),f.includes("@")){let v=null;[f,v]=f.split("@");let g=await ft.fAPI(v,`/user/${f}/basic`);g.user.server=v,g.user.username=g.user.title+"@"+v,s.value.push(g.user);return}let m=await ft.API(`/user/${f}/basic`);m.user.username=m.user.title,s.value.push(m.user)}async function _(f){if(!o.value)return;o.value=!1;let m=await ft.API(`/user/${f}/friends`);!m||!m.friends||(m.friends.map(v=>u(v)),o.value=!0)}async function a(f){if(!o.value)return;o.value=!1;let m=await ft.fAPI(n.value,`/user/${f}/friends`);!m||!m.friends||(m.friends.map(v=>u(v)),o.value=!0)}async function c(){let f=e.currentRoute.value.params.id;if(f.includes("@")){[f,n.value]=f.split("@"),a(f);return}_(f)}return onMounted(()=>{c()}),(f,m)=>{const v=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$7,[createBaseVNode("li",_hoisted_2$7,[createVNode(v,{to:"/user/"+r.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$7,[createVNode(v,{to:"/user/"+r.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$6,[createVNode(v,{to:"/user/"+r.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$6,[createVNode(v,{to:"/user/"+r.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$6,[createVNode(v,{to:"/user/"+r.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$6,[createVNode(v,{to:"/user/"+r.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$6,[createVNode(v,{to:"/user/"+r.value+"/friends",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$6,createBaseVNode("div",_hoisted_10$6,[withDirectives(createBaseVNode("div",_hoisted_11$5,_hoisted_13$5,512),[[vShow,!s.value.length]]),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,g=>(openBlock(),createElementBlock("div",_hoisted_14$5,[createBaseVNode("div",{class:"card h-100 w-100 border-0",onContextmenu:withModifiers(y=>unref(right_click)({item:g,event:y}),["prevent"])},[createBaseVNode("div",_hoisted_16$5,[createBaseVNode("div",{class:"d-inline-flex position-relative",onClick:y=>l(g.username)},[createBaseVNode("div",_hoisted_18$5,[createBaseVNode("img",{class:"playlist-img rounded",src:d(g.cover),onError:i},null,40,_hoisted_19$5)])],8,_hoisted_17$5),createBaseVNode("div",_hoisted_20$5,[createBaseVNode("h6",{class:"fw-bold text-break text-wrap clickable theme-color purple-on-hover p-2 ps-0",onClick:y=>l(g.username)},toDisplayString(g.username),9,_hoisted_21$5)])])],40,_hoisted_15$5)]))),256))])],64)}}},_hoisted_1$6={class:"nav nav-pills"},_hoisted_2$6={class:"nav-item"},_hoisted_3$6={class:"nav-item"},_hoisted_4$5={class:"nav-item"},_hoisted_5$5={class:"nav-item"},_hoisted_6$5={class:"nav-item"},_hoisted_7$5={class:"nav-item"},_hoisted_8$5={class:"nav-item"},_hoisted_9$5=createBaseVNode("hr",null,null,-1),_hoisted_10$5={class:"list-group"},_hoisted_11$4=createBaseVNode("li",{class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},[createBaseVNode("div",{class:"d-flex w-100 justify-content-between"},[createBaseVNode("div",null,[createBaseVNode("span",{class:"fw-bold"},"Recently played")])])],-1),_hoisted_12$4={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_13$4=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No tracks found")])],-1),_hoisted_14$4=[_hoisted_13$4],_hoisted_15$4=["onContextmenu","onClick"],_hoisted_16$4={class:"d-flex flex-fill foreground align-items-center"},_hoisted_17$4=["src"],_hoisted_18$4={class:"d-flex align-items-center"},_hoisted_19$4=["content_id","content_type","onClick"],_hoisted_20$4={class:"theme-color text-break"},_hoisted_21$4={class:"d-flex justify-content-end mt-2"},_hoisted_22$3={class:"btn btn-dark",type:"button",disabled:""},_hoisted_23$3=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$8={__name:"History",setup(t){const e=ref(null),n=ref([]),r=ref([]),s=ref(!0),o=useRouter(),i=ref(o.currentRoute.value.params.id);function d(m){return m?m.startsWith("http")?m:ft.server+"/"+m:"/images/track.svg"}async function l(m){m.target.src="/images/track.svg"}async function u(m){if(m.server){action({func:async function(){ft.playTrack(m.uuid,m.server)},object:[m.uuid,m.server],operation:"playTrack"});return}action({func:async function(){ft.playTrack(m.id)},object:[m.id],operation:"playTrack"})}async function _(m){let v={};for(let g of m){let[y,b]=g.split("@");v[b]||(v[b]=[]),v[b].push(parseInt(y))}for(let g in v){let y=await ft.get_federated_tracks(g,v[g]);if(!y)return;y.tracks.map(b=>b.server=g);for(let b=0;b<n.value.length;b++){let N=n.value[b],x=y.tracks.filter(A=>`${A.id}@${A.server}`==N);x.length&&(r.value[b]=x[0])}}}async function a(m){if(!s.value)return;s.value=!1;let v=await ft.API(`/user/${m}/history`);if(!!v){r.value=[];for(let g=0;g<v.order.length;g++)r.value.push({});n.value=v.order,_(v.federated);for(let g=0;g<n.value.length;g++){let y=n.value[g],b=v.tracks.filter(N=>N.id==y);b.length&&(r.value[g]=b[0])}s.value=!0}}async function c(m){if(!s.value)return;s.value=!1;let v=await ft.fAPI(e.value,`/user/${m}/history`);if(!!v){r.value=[];for(let g=0;g<v.order.length;g++)r.value.push({});n.value=v.order,_(v.federated);for(let g=0;g<n.value.length;g++){let y=n.value[g],b=v.tracks.filter(N=>N.id==y);b.length&&(r.value[g]=b[0])}s.value=!0}}async function f(){let m=o.currentRoute.value.params.id;if(m.includes("@")){[m,e.value]=m.split("@"),c(m);return}a(m)}return onMounted(()=>{f()}),(m,v)=>{const g=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$6,[createBaseVNode("li",_hoisted_2$6,[createVNode(g,{to:"/user/"+i.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$6,[createVNode(g,{to:"/user/"+i.value+"/history",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$5,[createVNode(g,{to:"/user/"+i.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$5,[createVNode(g,{to:"/user/"+i.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$5,[createVNode(g,{to:"/user/"+i.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$5,[createVNode(g,{to:"/user/"+i.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$5,[createVNode(g,{to:"/user/"+i.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$5,createBaseVNode("ul",_hoisted_10$5,[_hoisted_11$4,r.value.length==0?(openBlock(),createElementBlock("li",_hoisted_12$4,_hoisted_14$4)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,y=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(b=>unref(right_click)({item:y,event:b}),["prevent"]),onClick:b=>u(y)},[createBaseVNode("div",_hoisted_16$4,[createBaseVNode("img",{src:d(y.cover),class:"track-cover theme-border rounded",onError:l},null,40,_hoisted_17$4),createBaseVNode("div",_hoisted_18$4,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:y.id,content_type:y.type,onClick:b=>u(y.id),style:{display:"contents"}},[createBaseVNode("span",_hoisted_20$4,toDisplayString(y.title),1)],8,_hoisted_19$4)])])],40,_hoisted_15$4))),256))]),createBaseVNode("div",_hoisted_21$4,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:f},"Refresh",512),[[vShow,s.value]]),withDirectives(createBaseVNode("button",_hoisted_22$3,[_hoisted_23$3,createTextVNode(" Loading... ")],512),[[vShow,!s.value]])])],64)}}},_hoisted_1$5={class:"nav nav-pills"},_hoisted_2$5={class:"nav-item"},_hoisted_3$5={class:"nav-item"},_hoisted_4$4={class:"nav-item"},_hoisted_5$4={class:"nav-item"},_hoisted_6$4={class:"nav-item"},_hoisted_7$4={class:"nav-item"},_hoisted_8$4={class:"nav-item"},_hoisted_9$4=createBaseVNode("hr",null,null,-1),_hoisted_10$4={class:"list-group"},_hoisted_11$3={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_12$3={class:"d-flex w-100 justify-content-between"},_hoisted_13$3={class:"fw-bold"},_hoisted_14$3={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_15$3=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No playlists found")])],-1),_hoisted_16$3=[_hoisted_15$3],_hoisted_17$3=["onContextmenu","onClick"],_hoisted_18$3={class:"d-flex flex-fill foreground align-items-center"},_hoisted_19$3=["src"],_hoisted_20$3={class:"d-flex"},_hoisted_21$3=["content_id","content_type"],_hoisted_22$2={class:"theme-color text-break"},_hoisted_23$2={class:"d-flex justify-content-end mt-3"},_hoisted_24$2={class:"btn btn-dark",type:"button",disabled:""},_hoisted_25$2=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$7={__name:"Playlists",setup(t){const e=useRouter(),n=ref(null),r=ref([]),s=ref(e.currentRoute.value.params.id),o=ref(0),i=ref(0),d=ref(!0);function l(m){return m?ft.server+"/"+m:"/images/cassette.svg"}async function u(m){if(m.server){e.push(`/playlist/${m.id}@${m.server}`);return}e.push("/playlist/"+m.id)}async function _(m,v,g){let y={};for(let b of m){let[N,x]=b.split("@");y[x]||(y[x]=[]),y[x].push(parseInt(N))}for(let b in y){let N=await ft.get_federated_playlists(b,y[b]);if(!N)return;N.playlists.map(x=>x.server=b);for(let x=0;x<v.length;x++){let A=v[x],L=N.playlists.filter(V=>`${V.id}@${V.server}`==A);L.length&&(r.value[x+g]=L[0])}}}async function a(m){if(!d.value)return;d.value=!1;let v=await ft.fAPI(n.value,`/user/${m}/playlists/${i.value}/${o.value}`);if(!!v){for(let g=0;g<v.order.length;g++)r.value.push({});_(v.federated,v.order,i.value);for(let g=0;g<v.order.length;g++){let y=v.order[g],b=v.playlists.filter(N=>N.id==y);b.length&&(r.value[g+i.value]=b[0])}o.value=v.total,i.value+=v.order.length,d.value=!0}}async function c(m){if(!d.value)return;d.value=!1;let v=await ft.API(`/user/${m}/playlists/${i.value}/${o.value}`);if(!!v){for(let g=0;g<v.order.length;g++)r.value.push({});_(v.federated,v.order,i.value);for(let g=0;g<v.order.length;g++){let y=v.order[g],b=v.playlists.filter(N=>N.id==y);b.length&&(r.value[g+i.value]=b[0])}o.value=v.total,i.value+=v.order.length,d.value=!0}}async function f(){let m=e.currentRoute.value.params.id;if(m.includes("@")){[m,n.value]=m.split("@"),a(m);return}c(m)}return onMounted(()=>{f()}),(m,v)=>{const g=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$5,[createBaseVNode("li",_hoisted_2$5,[createVNode(g,{to:"/user/"+s.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$5,[createVNode(g,{to:"/user/"+s.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$4,[createVNode(g,{to:"/user/"+s.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$4,[createVNode(g,{to:"/user/"+s.value+"/playlists",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$4,[createVNode(g,{to:"/user/"+s.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$4,[createVNode(g,{to:"/user/"+s.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$4,[createVNode(g,{to:"/user/"+s.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$4,createBaseVNode("ul",_hoisted_10$4,[createBaseVNode("li",_hoisted_11$3,[createBaseVNode("div",_hoisted_12$3,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_13$3,toDisplayString(o.value)+" liked playlists",1)])])]),r.value.length==0?(openBlock(),createElementBlock("li",_hoisted_14$3,_hoisted_16$3)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value,y=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(b=>unref(right_click)({item:y,event:b}),["prevent"]),onClick:b=>u(y)},[createBaseVNode("div",_hoisted_18$3,[createBaseVNode("img",{src:l(y.cover),class:"track-cover theme-border rounded",onError:v[0]||(v[0]=(...b)=>m.placeholder&&m.placeholder(...b))},null,40,_hoisted_19$3),createBaseVNode("div",_hoisted_20$3,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:y.id,content_type:y.type,style:{display:"contents"}},[createBaseVNode("span",_hoisted_22$2,toDisplayString(y.title),1)],8,_hoisted_21$3)])])],40,_hoisted_17$3))),256))]),createBaseVNode("div",_hoisted_23$2,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:f},"Load more",512),[[vShow,d.value]]),withDirectives(createBaseVNode("button",_hoisted_24$2,[_hoisted_25$2,createTextVNode(" Loading... ")],512),[[vShow,!d.value]])])],64)}}},_hoisted_1$4={class:"nav nav-pills"},_hoisted_2$4={class:"nav-item"},_hoisted_3$4={class:"nav-item"},_hoisted_4$3={class:"nav-item"},_hoisted_5$3={class:"nav-item"},_hoisted_6$3={class:"nav-item"},_hoisted_7$3={class:"nav-item"},_hoisted_8$3={class:"nav-item"},_hoisted_9$3=createBaseVNode("hr",null,null,-1),_hoisted_10$3={key:0,class:"card border-0"},_hoisted_11$2={class:"card-body"},_hoisted_12$2=createBaseVNode("h3",null,"Last.fm",-1),_hoisted_13$2={class:"d-inline-flex flex-column"},_hoisted_14$2={class:"d-inline-flex border rounded mb-2 p-2"},_hoisted_15$2={class:"d-flex"},_hoisted_16$2=["src"],_hoisted_17$2={class:"d-flex flex-column mx-2"},_hoisted_18$2={class:"fw-bold"},_hoisted_19$2={class:"d-flex flex-wrap align-items-center"},_hoisted_20$2=createBaseVNode("span",{class:"text-muted fw-bold"},"Scrobbles:",-1),_hoisted_21$2={class:"badge bg-dark mx-2"},_hoisted_22$1={class:"d-flex flex-column mt-4"},_hoisted_23$1=createBaseVNode("h5",null,"Top Tracks This Week",-1),_hoisted_24$1={class:"list-group list-group-flush flex-fill"},_hoisted_25$1=["onClick"],_hoisted_26={class:"d-flex"},_hoisted_27=["src"],_hoisted_28={class:"d-flex flex-fill justify-content-between"},_hoisted_29={class:"d-flex flex-column mx-2"},_hoisted_30={class:"fw-bold"},_hoisted_31={class:"d-flex align-items-center"},_hoisted_32={class:"badge bg-dark"},_sfc_main$6={__name:"Settings",setup(t){const e=useRouter(),n=ref(null),r=ref(e.currentRoute.value.params.id),s=ref(null),o=ref(null),i=ref([]);async function d(f){let m=await ft.API("/lastfm/profile/"+f);!m.lastfm||(u(m.lastfm),_(m.lastfm))}async function l(f){let m=await ft.fAPI(n.value,"/lastfm/profile/"+f);!m.lastfm||(u(m.lastfm),_(m.lastfm))}async function u(f){let m=await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=${f}&api_key=${o.value}&format=json`).then(v=>v.json());s.value=m.user}async function _(f){let m=await fetch(`https://ws.audioscrobbler.com/2.0/?method=user.gettoptracks&limit=24&period=7day&user=${f}&api_key=${o.value}&format=json`).then(v=>v.json());i.value=m.toptracks.track}function a(f){return f.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}async function c(){let f=await ft.API("/lastfm/auth");if(f.hasOwnProperty("error"))return;o.value=f.api_key;let m=e.currentRoute.value.params.id;if(m.includes("@")){[m,n.value]=m.split("@"),l(m);return}d(m)}return onBeforeMount(()=>{c()}),(f,m)=>{const v=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$4,[createBaseVNode("li",_hoisted_2$4,[createVNode(v,{to:"/user/"+r.value,class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$4,[createVNode(v,{to:"/user/"+r.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$3,[createVNode(v,{to:"/user/"+r.value+"/tracks",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$3,[createVNode(v,{to:"/user/"+r.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$3,[createVNode(v,{to:"/user/"+r.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$3,[createVNode(v,{to:"/user/"+r.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$3,[createVNode(v,{to:"/user/"+r.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$3,s.value?(openBlock(),createElementBlock("div",_hoisted_10$3,[createBaseVNode("div",_hoisted_11$2,[_hoisted_12$2,createBaseVNode("div",_hoisted_13$2,[createBaseVNode("div",_hoisted_14$2,[createBaseVNode("div",_hoisted_15$2,[createBaseVNode("img",{src:s.value.image[3]["#text"],class:"img-lastfm",width:"50",height:"50"},null,8,_hoisted_16$2)]),createBaseVNode("div",_hoisted_17$2,[createBaseVNode("span",_hoisted_18$2,toDisplayString(s.value.name),1),createBaseVNode("div",_hoisted_19$2,[_hoisted_20$2,createBaseVNode("span",_hoisted_21$2,toDisplayString(a(s.value.playcount)),1)])])])]),createBaseVNode("div",_hoisted_22$1,[_hoisted_23$1,createBaseVNode("ul",_hoisted_24$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,g=>(openBlock(),createElementBlock("li",{class:"list-group-item list-group-item-action clickable",onClick:y=>f.openTrack(g)},[createBaseVNode("div",_hoisted_26,[createBaseVNode("img",{src:g.image[3]["#text"],class:"img-lastfm",width:"50",height:"50"},null,8,_hoisted_27),createBaseVNode("div",_hoisted_28,[createBaseVNode("div",_hoisted_29,[createBaseVNode("span",_hoisted_30,toDisplayString(g.artist.name),1),createBaseVNode("span",null,toDisplayString(g.name),1)]),createBaseVNode("div",_hoisted_31,[createBaseVNode("span",_hoisted_32,toDisplayString(g.playcount),1)])])])],8,_hoisted_25$1))),256))])])])])):createCommentVNode("",!0)],64)}}},_hoisted_1$3={class:"nav nav-pills"},_hoisted_2$3={class:"nav-item"},_hoisted_3$3={class:"nav-item"},_hoisted_4$2={class:"nav-item"},_hoisted_5$2={class:"nav-item"},_hoisted_6$2={class:"nav-item"},_hoisted_7$2={class:"nav-item"},_hoisted_8$2={class:"nav-item"},_hoisted_9$2=createBaseVNode("hr",null,null,-1),_hoisted_10$2={class:"list-group"},_hoisted_11$1={class:"list-group-item rounded mb-1 theme-btn text-light d-flex"},_hoisted_12$1={class:"d-flex w-100 justify-content-between"},_hoisted_13$1={class:"fw-bold"},_hoisted_14$1={key:0,class:"list-group-item theme-list-item-no-hover foreground d-flex justify-content-between"},_hoisted_15$1=createBaseVNode("div",{class:"d-flex flex-fill align-items-center"},[createBaseVNode("div",{class:"d-flex flex-column"},[createBaseVNode("span",{class:"theme-color fw-bold"},"No tracks found")])],-1),_hoisted_16$1=[_hoisted_15$1],_hoisted_17$1=["onContextmenu","onClick"],_hoisted_18$1={class:"d-flex flex-fill foreground align-items-center"},_hoisted_19$1=["src"],_hoisted_20$1={class:"d-flex align-items-center"},_hoisted_21$1=["content_id","content_type","onClick"],_hoisted_22={class:"theme-color text-break"},_hoisted_23={class:"d-flex justify-content-end mt-2"},_hoisted_24={class:"btn btn-dark",type:"button",disabled:""},_hoisted_25=createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),_sfc_main$5={__name:"Tracks",setup(t){const e=useRouter(),n=ref(null),r=ref(e.currentRoute.value.params.id),s=ref([]),o=ref(0),i=ref(0),d=ref(!0);function l(v){return v?v.startsWith("http")?v:ft.server+"/"+v:"/images/track.svg"}async function u(v){v.target.src="/images/track.svg"}async function _(v){if(v.server){action({func:async function(){ft.playTrack(v.uuid,v.server)},object:[v.uuid,v.server],operation:"playTrack"});return}action({func:async function(){ft.playTrack(v.id)},object:[v.id],operation:"playTrack"})}async function a(v){if(!d.value)return;d.value=!1;let g=await ft.API(`/user/${v}/tracks/${i.value}/${o.value}`);if(!!g){for(let y=0;y<g.order.length;y++)s.value.push({});c(g.federated,g.order,i.value);for(let y=0;y<g.order.length;y++){let b=g.order[y],N=g.tracks.filter(x=>x.id==b);N.length&&(s.value[y+i.value]=N[0])}o.value=g.total,i.value+=g.order.length,d.value=!0}}async function c(v,g,y){let b={};for(let N of v){let[x,A]=N.split("@");b[A]||(b[A]=[]),b[A].push(parseInt(x))}for(let N in b){let x=await ft.get_federated_tracks(N,b[N]);if(!x)return;x.tracks.map(A=>A.server=N);for(let A=0;A<g.length;A++){let L=g[A],V=x.tracks.filter(P=>`${P.id}@${P.server}`==L);V.length&&(s.value[A+y]=V[0])}}}async function f(v){if(!d.value)return;d.value=!1;let g=await ft.fAPI(n.value,`/user/${v}/tracks/${i.value}/${o.value}`);if(!!g){for(let y=0;y<g.order.length;y++)s.value.push({});c(g.federated,g.order,i.value);for(let y=0;y<g.order.length;y++){let b=g.order[y],N=g.tracks.filter(x=>x.id==b);N.length&&(s.value[y+i.value]=N[0])}o.value=g.total,i.value+=g.order.length,d.value=!0}}async function m(){let v=e.currentRoute.value.params.id;if(v.includes("@")){[v,n.value]=v.split("@"),f(v);return}a(v)}return onMounted(()=>{m()}),(v,g)=>{const y=resolveComponent("router-link");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("ul",_hoisted_1$3,[createBaseVNode("li",_hoisted_2$3,[createVNode(y,{to:"/user/"+r.value,class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Profile")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_3$3,[createVNode(y,{to:"/user/"+r.value+"/history",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Listening History")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_4$2,[createVNode(y,{to:"/user/"+r.value+"/tracks",class:"nav-link fw-bold theme-btn black-on-hover text-white"},{default:withCtx(()=>[createTextVNode("Favorite Tracks")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_5$2,[createVNode(y,{to:"/user/"+r.value+"/playlists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Playlists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_6$2,[createVNode(y,{to:"/user/"+r.value+"/albums",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Albums")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_7$2,[createVNode(y,{to:"/user/"+r.value+"/artists",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Artists")]),_:1},8,["to"])]),createBaseVNode("li",_hoisted_8$2,[createVNode(y,{to:"/user/"+r.value+"/friends",class:"nav-link fw-bold purple-on-hover theme-color"},{default:withCtx(()=>[createTextVNode("Friends")]),_:1},8,["to"])])]),_hoisted_9$2,createBaseVNode("ul",_hoisted_10$2,[createBaseVNode("li",_hoisted_11$1,[createBaseVNode("div",_hoisted_12$1,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_13$1,toDisplayString(o.value)+" liked tracks",1)])])]),s.value.length==0?(openBlock(),createElementBlock("li",_hoisted_14$1,_hoisted_16$1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,b=>(openBlock(),createElementBlock("li",{class:"list-group-item theme-list-item clickable rounded d-flex justify-content-between p-1",onContextmenu:withModifiers(N=>unref(right_click)({item:b,event:N}),["prevent"]),onClick:N=>_(b)},[createBaseVNode("div",_hoisted_18$1,[createBaseVNode("img",{src:l(b.cover),class:"track-cover theme-border rounded",onError:u},null,40,_hoisted_19$1),createBaseVNode("div",_hoisted_20$1,[createBaseVNode("button",{class:"btn btn-link search-link d-flex text-start py-0",content_id:b.id,content_type:b.type,onClick:N=>_(b),style:{display:"contents"}},[createBaseVNode("span",_hoisted_22,toDisplayString(b.title),1)],8,_hoisted_21$1)])])],40,_hoisted_17$1))),256))]),createBaseVNode("div",_hoisted_23,[withDirectives(createBaseVNode("button",{type:"button",class:"btn theme-btn black-on-hover text-white fw-bold",onClick:m},"Load more",512),[[vShow,d.value]]),withDirectives(createBaseVNode("button",_hoisted_24,[_hoisted_25,createTextVNode(" Loading... ")],512),[[vShow,!d.value]])])],64)}}},_hoisted_1$2={class:"d-flex justify-content-center border"},_hoisted_2$2=createBaseVNode("div",{class:"d-flex flex-column align-items-center text-dark p-2"},[createBaseVNode("div",null,[createBaseVNode("h3",null,"Group session loading...")]),createBaseVNode("div",{class:"spinner-border",role:"status"})],-1),_hoisted_3$2=[_hoisted_2$2],_sfc_main$4={__name:"GroupSessionLink",setup(t){const e=useRouter();return onBeforeMount(()=>{e.currentRoute.value.params.hasOwnProperty("id")&&localStorage.setItem("group_session_id",JSON.stringify(e.currentRoute.value.params.id)),e.push("/")}),(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$2,_hoisted_3$2))}},_sfc_main$3={__name:"LastfmAuth",setup(t){const e=useRouter();return onMounted(async()=>{let n=e.currentRoute.value.query.token;if(n){let r=await ft.lastfm_auth(n);if(!r.hasOwnProperty("key")){e.push("/profile");return}localStorage.setItem("lastfm_username",JSON.stringify(r.username)),localStorage.setItem("lastfm_key",JSON.stringify(r.key)),localStorage.setItem("scrobbling",JSON.stringify(!0)),store.scrobbling=!0,e.push("/profile")}}),(n,r)=>null}},_sfc_main$2={__name:"TrackRedirect",setup(t){const e=useRouter();return onBeforeMount(()=>{let n=e.currentRoute.value.params.id;ft.API(`/track/${n}/basic`).then(r=>{store.selected_track_id=r.track.id,e.push("/album/"+r.track.album)})}),(n,r)=>null}},_hoisted_1$1={class:"card rounded-0 border-0 mx-3"},_hoisted_2$1={class:"card-body px-3"},_hoisted_3$1={class:"row g-3 justify-content-center align-items-center"},_hoisted_4$1={class:"col-auto"},_hoisted_5$1={class:"d-flex flex-column text-center theme-color"},_hoisted_6$1={class:"d-flex justify-content-center mb-3"},_hoisted_7$1={key:0,src:_imports_0$3,width:"64",height:"64"},_hoisted_8$1={key:1,src:_imports_1,width:"64",height:"64"},_hoisted_9$1=createBaseVNode("h1",{class:"album-title"},"Page not found",-1),_hoisted_10$1=createBaseVNode("h3",{class:"text-muted"},"We can't find the page you're looking for.",-1),_sfc_main$1={__name:"NotFound",setup(t){return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[unref(store).theme=="light"?(openBlock(),createElementBlock("img",_hoisted_7$1)):createCommentVNode("",!0),unref(store).theme=="dark"?(openBlock(),createElementBlock("img",_hoisted_8$1)):createCommentVNode("",!0)]),_hoisted_9$1,_hoisted_10$1])])])])]))}},_hoisted_1={class:"modal-dialog modal-fullscreen"},_hoisted_2={class:"modal-content theme-bg"},_hoisted_3={class:"modal-body pt-0"},_hoisted_4={class:"row gx-0"},_hoisted_5={class:"col"},_hoisted_6={class:"list-group"},_hoisted_7=createBaseVNode("div",{class:"d-flex align-items-center"},[createBaseVNode("span",{class:"fw-bold"},"Servers")],-1),_hoisted_8=createBaseVNode("span",{class:"bi bi-arrow-clockwise me-1"},null,-1),_hoisted_9=createBaseVNode("span",null,"Refresh",-1),_hoisted_10=[_hoisted_8,_hoisted_9],_hoisted_11={class:"list-group-item theme-list-item foreground rounded p-3"},_hoisted_12={class:"d-flex justify-content-between theme-color"},_hoisted_13={class:"d-flex flex-column flex-fill text-break"},_hoisted_14={class:"d-flex align-items-center justify-content-between"},_hoisted_15={class:"fw-bold m-0"},_hoisted_16={class:"d-flex"},_hoisted_17=["onClick"],_hoisted_18={class:"purple-color fw-bold"},_hoisted_19={class:"text-decoration-underline"},_hoisted_20=createBaseVNode("div",{class:"d-flex justify-content-center text-dark p-2"},[createBaseVNode("button",{class:"btn btn-dark",type:"button",disabled:""},[createBaseVNode("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),createTextVNode(" Fetching servers... ")])],-1),_hoisted_21=[_hoisted_20],_sfc_main={__name:"Servers",setup(t){const e=useRouter();let n=null;const r=ref(null),s=ref([]),o=ref(!1);async function i(){n.hide(),e.push("/profile")}async function d(_){window.open(`${_.address}/about`,"_blank")}async function l(){if(o.value)return;o.value=!0,s.value=[];let _=await fetch("https://api.github.com/repos/kaangiray26/forte/git/trees/servers").then(c=>c.json()).then(c=>c.tree).then(c=>c.filter(f=>f.path=="hostnames")).then(c=>c[0].url).catch(()=>null);if(!_)return null;(await fetch(_).then(c=>c.json()).then(c=>c.tree)).forEach(async c=>{await u(c.path)}),o.value=!1}async function u(_){let a=await fetch(`https://raw.githubusercontent.com/kaangiray26/forte/servers/hostnames/${_}`).then(f=>f.json()).then(f=>f.address).catch(()=>null);if(!a)return;let c=await fetch(`${a}/alive`).then(f=>f.json()).catch(()=>null);if(!c){s.value.push({name:_.split(".json")[0],address:a,version:"Unknown",status:"Offline"});return}s.value.push({name:_.split(".json")[0],address:a,version:c.version,status:"Online"})}return onMounted(()=>{n=new Modal(r.value,{keyboard:!1}),n.show(),l()}),(_,a)=>(openBlock(),createElementBlock("div",{ref_key:"serversModalEl",ref:r,class:"modal",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",{class:"modal-header border-0 bg-dark text-white justify-content-center mb-3"},[createBaseVNode("button",{type:"button",class:"btn-close btn-close-white","aria-label":"Close",onClick:i})]),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[createBaseVNode("ul",_hoisted_6,[createBaseVNode("li",{class:"list-group-item rounded mb-1 theme-btn text-light d-flex justify-content-between"},[_hoisted_7,createBaseVNode("div",null,[createBaseVNode("button",{type:"button",class:"btn btn-dark theme-btn fw-bold black-on-hover d-flex align-items-center text-nowrap text-start",onClick:l},_hoisted_10)])]),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.value,c=>(openBlock(),createElementBlock("li",_hoisted_11,[createBaseVNode("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[createBaseVNode("h5",_hoisted_15,toDisplayString(c.name),1),createBaseVNode("div",_hoisted_16,[createBaseVNode("button",{type:"button",class:"btn btn-dark theme-btn fw-bold black-on-hover text-nowrap",onClick:f=>d(c)},"About",8,_hoisted_17)])]),createBaseVNode("div",null,[createBaseVNode("span",{class:normalizeClass(["badge me-2",{"text-bg-success":c.status=="Online","text-bg-danger":c.status=="Offline"}])},toDisplayString(c.status),3),createBaseVNode("span",null,[createTextVNode("Version "),createBaseVNode("span",_hoisted_18,toDisplayString(c.version),1)])]),createBaseVNode("span",_hoisted_19,toDisplayString(c.address),1)])])]))),256))]),withDirectives(createBaseVNode("div",null,_hoisted_21,512),[[vShow,o.value]])])])])])])],512))}},routes=[{path:"/:pathMatch(.*)*",component:_sfc_main$1},{path:"/",component:_sfc_main$z},{path:"/artists",component:_sfc_main$w},{path:"/albums",component:_sfc_main$u},{path:"/playlists",component:_sfc_main$s},{path:"/search/:query",component:_sfc_main$y},{path:"/search",component:_sfc_main$y},{path:"/artist/:id",component:_sfc_main$r},{path:"/album/:id",component:_sfc_main$q},{path:"/track/:id",component:_sfc_main$2},{path:"/playlist/:id",component:_sfc_main$p},{path:"/station/:id",component:_sfc_main$o},{path:"/groupsession/:id",component:_sfc_main$4},{path:"/auth/lastfm",component:_sfc_main$3},{path:"/servers",component:_sfc_main},{path:"/profile",component:_sfc_main$n,children:[{path:"",component:_sfc_main$f},{path:"albums",component:_sfc_main$m},{path:"artists",component:_sfc_main$l},{path:"friends",component:_sfc_main$k},{path:"history",component:_sfc_main$j},{path:"playlists",component:_sfc_main$h},{path:"stations",component:_sfc_main$e},{path:"tracks",component:_sfc_main$d}]},{path:"/user/:id",component:_sfc_main$c,children:[{path:"",component:_sfc_main$6},{path:"albums",component:_sfc_main$b},{path:"artists",component:_sfc_main$a},{path:"friends",component:_sfc_main$9},{path:"history",component:_sfc_main$8},{path:"playlists",component:_sfc_main$7},{path:"tracks",component:_sfc_main$5}]}],router=createRouter({history:createWebHistory(),routes}),styles$1="",styles="",bootstrapIcons="";"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceworker.js");window.ft=new Forte;window.ft.init().then(()=>{navigator.mediaSession.playbackState="none",navigator.mediaSession.setActionHandler("play",()=>{action({func:async function(){window.ft.play()},object:[null],operation:"play"})}),navigator.mediaSession.setActionHandler("pause",()=>{action({func:async function(){window.ft.play()},object:[null],operation:"play"})}),navigator.mediaSession.setActionHandler("nexttrack",()=>{action({func:async function(){window.ft.play_next()},object:[null],operation:"playNext"})}),navigator.mediaSession.setActionHandler("previoustrack",()=>{action({func:async function(){window.ft.play_previous()},object:[null],operation:"playPrevious"})}),console.log("Forte initialized."),createApp(_sfc_main$C).use(router).mount("#app")});console.log(`

                    .........::::::::::::::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^~~~~~~~~~~~~
                    .........::::::::::::::::::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^~~~~~~~~~~
                   ..........::::::::::::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^~~~~~^
                 ...........::::::::::::::::::^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
                ...........:::::::^^:^^^^^^^:^:^^^~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
              ...........::::::^:^^^^^~!!777!~~~!!7Y5YYJ?!~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
           ..............:::.:^^^^^~7?YPPBB##BGGBGB##&&&##BPY7~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.......................::::::::^~!?YPGBB#####&&&&&&&&&&&&&&&&&BPJ!~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.....................:::::^::^.^!YGBB###########B##&&&&&&&&&&&&&&#GJ~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..................:::..:^^^^!^:~YGBBB#########BGPGB#&&&&&&&&&&&&&&&&BJ~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
................::::::::^::7J5YY5BB#######BGPP5YJJY55PGGB###&&&&&&&&&&B?~^^^^^^^^^^^^^^^^^^^^^^^::^^
...............::::::::::^7YJGGB######BGP5YJJJJ??????????JJYY5GB#&&&&&&&P!^^^^^^^^::::::::::::::::::
...........:..::::::::::^!YJGBB#####BG5JJ????????????7777777???JY5G&&&&&&#Y~^^^^^^^:::::::::::::::::
.............::.::::::::75PB######BG5J??????7??77??77777777777777??YG&&&&&&G!^^^^^^^^:::::::::::::::
.............:......:::!5G#######BPY?????7777777777777777777777777???5#&&&&&B?~~~^7J^^::::::::::::::
.............::::...::~5G######BGY??????77777777777777777777777777?77?JG&&&&&&Y!!?5J^^::::::::::::::
.............::....::^JG######B5J???????7?777777777777777777777777??????P&&&@&&&GY?Y7^::::::::::::::
.................::::!PB#####G5J??????????77777777777777!!!!!!777???????J5&&@@@&&B##J^^^::::::::::::
:...7^.......!7.....!BGB####B5J?????????JJJ???7777777!!!!!!!!!!777????JJJJB&@@@&BGBGJ?!~:::..:...::.
YJ!!?7!????J?JY7~^^^!BBPGB##PYJJYY55PPGGGBBBBGP5J?7777!!!777?JYYY5555YYYYJG@@@@B#&GPP5J~............
55557!777??JJJJJJJ?7JPPGBGPBGBBBBBB#&&&&&#######BGPYJJJJJYPB#######BBBGGBBB##&##@#YJY??~7JJ77!^~~^::
5YY5Y7!?J?7???7???7!555Y5GGPP###BBBB#&&&&#BBBBBBB###BGPPB##&&&&###BBBBBBBB#&##&@&#B5J75PGBGPGGBBGPYJ
YYYYJJ?YY?7?JJJJJ?7?P55JJBGY?5#BB#BB&&&&&&BBBBBB#B#B5?7?P##&&&&&BBBBB##GGGG##&@&@&G##PP5PPPGPPPGGGP5
JJ???JJJ~   .....^!^YPYJGBPY?JBB##BB##&&&&&&#######BJ777J##&&&&&#######BGGG##&@&&&&GPGYYYY~YY5555PPP
?777!~~!~.      :~.:YPB5G5YJJ?YB#BB##&&&&&&&##B####5?7777P#&&&@&&#####B#BGB&&&#&@&@&J!!!!!!!!!!!7777
...            :~.:755#BYY5YJ??G####&&&&&&&###B###PJ?777?JG&&@@@&B#B#BBGB##&@@B5#BBP?!!!!7!7!!7!7!!!
             .~7:!7!5P##P?JJJJ??5B#&&&&&&&&&&&&#BPJJ??77?JYP#&&@@#&&###BBG5#@@@BYGJ7!!77777777777777
              !^~^^~GB#&#5??JJ???J5GB######BBGPP5YJJ??777?JJYY5PPGGGPP5Y?7?&@@@@G5BY!!!!!!!777!!!777
             :~!J~~?P##&&BBB5J?????????77?????JJJJJJJ77777?J??7??77!!!7777J@@@@@@#PP?!!7?77!!77?77?7
             ::7?7!!P#&&&&#&#J?????J???7????????????J??777???77777777???77P@@@@@@@&P?7777!!!!!!!7777
             .7?~^!!YB&&&&&&&5???7???????7JJJJ???777777777777?JJ777?7777!J@@@@@@@@@&77!7!777~~!!77!!
             :.:!^^~JP#&&&&&&&Y???77??777?PBB5YYYJJJJJ??JJJJG#GY?777777!J&@@&#@@@@@@J7~!!!!!~7!!!~!~
             . :?J7?7JP#&&&&&&#Y???77??777?JPG5J?7?7!77!77?5B5?777777775&@@&#P&@@@@@P7?!!~~!!!?!!7?7
              .^77.^JJJPB&&&&&&&PJ??????77777J5YYJJ7!7!7JJYY?777!7777J#@@@@#Y5B@@@@&Y!!7!!!!!!!!!!77
              .^.:  :7!?G#&&&&&&&B5J????J???????JJJJJJJJJ?777777777YB@@@@#&P7Y&@@@@P77!!!!77777J777?
            ...:.!^.^Y~JGB&&&&&&&@#P5JJ??J??????77777777777777777Y#@@@@@&&P75&@@@@G7!!!~!~~!!~!7!!77
                 :7~7?^5GGGB#&&&&&&#P5YYJJJ????????7777777??77?JB@@@@@@&&GYB&@@@&&?!!!!~~~!!!!!~~~~~
              .:   .::!PGGPPPGB#&@@&B5YYYYJJJ???7777!!!!!777?JP@@@@@@@@&#&&@@@&YPB77!~~!!!!7??7777??
 .             .  :!?5GGGPGPPPPPPB###BPYJJJJJJJJ???777777?7??P&@@@@@@@@@@@@@#YJ?YP!~!!77!!???7!~~!!~
         ..:^!7?Y5PGGGGGGGGGGPPPPP5PPGGGGP55YJJ????????????J5#@@@@@@@@&&&#PJ??5JY?~!!!!!~~!!!777777?
::^~^!77?J5Y5GGGGGGGGGGGGGPGPGGGGPPPPPPPPGGGBGGPP555Y5555PGB#&&&&&&##B5??7~!JY??Y??77?JJ?77?J5555YYJ
JJ755Y5GPPPGPGGGGGGGGBBGGGGPPGPGGPPPPPPPPP5PPPGGGBGGGGGGGGPGPPPPPPP5GBBGP7??7!?7!!7JJ??JJJJ????77777
P5PPGPPGGGGBGGBGGBBGGGGGGGGGGPGPPPPPPPPPGPPPPPP5PP5PP5P5P55P5PPPPPGBB###BBBGP5GPJJYYYYJ?7777???????J
PPGBBGGGBGGGBGGBBGBBGGGGGGGGGGGGGPPPPPPPPPGPPGPPGPPPPPPPPPPPPPGGGGB###BGB#B#&####BBGYJ??7????77!!~!!
PPPGGBGPGBGGBBGBBGGBGGBBBGGGGGGPPGPPPPPPPGPPPPPGPGGPGPPPPPGPGGBBBBBBBGGB#BB##B##B#####BGJ7!~!?777?YJ
PGGGGGGGB#GGGBGGGBGGBBGGBBBBBGGPPGPPPPPGGGGPGPGGPGPPGPGPPGGBGBBBBBGGGBBBBB#BB#B##B##B##B#BG5?JYY????
PPGGBGPBBBBGGBBGGBGGGBGGBBGBBBBBGGGGGGPPPPPPPPGGPGGPGGPGGGGGGGGGPGBBBGGBBBB#BB#BB#BB##&##BB#GP?777J5
`);
